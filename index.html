<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fatefrank.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Seif Zheng&#39;s blog">
<meta property="og:url" content="http://fatefrank.github.io/index.html">
<meta property="og:site_name" content="Seif Zheng&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Seif Zheng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://fatefrank.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Seif Zheng's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Seif Zheng's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ—¥ç§¯æœˆç´¯ï¼Œæ°´æ»´çŸ³ç©¿</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/fatefrank" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://fatefrank.github.io/2020/08/06/MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Seif Zheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seif Zheng's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Mybatis é¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š16:27:14" itemprop="dateCreated datePublished" datetime="2020-08-06T00:00:00+08:00">2020-08-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="MyBatis-ç¼–ç¨‹æ­¥éª¤"><a href="#MyBatis-ç¼–ç¨‹æ­¥éª¤" class="headerlink" title="MyBatis ç¼–ç¨‹æ­¥éª¤"></a>MyBatis ç¼–ç¨‹æ­¥éª¤</h3><ol>
<li>åˆ›å»º SqlSessionFactory å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ SqlSessionFactory è·å– SqlSession å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ SqlSession è·å¾— Mapper ä»£ç†å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ Mapper ä»£ç†å¯¹è±¡ï¼Œæ‰§è¡Œæ•°æ®åº“æ“ä½œã€‚</li>
<li>æ‰§è¡ŒæˆåŠŸï¼Œåˆ™ä½¿ç”¨ SqlSession æäº¤äº‹åŠ¡ã€‚</li>
<li>æ‰§è¡Œå¤±è´¥ï¼Œåˆ™ä½¿ç”¨ SqlSession å›æ»šäº‹åŠ¡ã€‚</li>
<li>æœ€ç»ˆï¼Œå…³é—­ä¼šè¯ã€‚</li>
</ol>
<h3 id="å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="#{} å’Œ ${} çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a><code>#&#123;&#125;</code> å’Œ <code>$&#123;&#125;</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><code>$&#123;&#125;</code> æ˜¯ Properties æ–‡ä»¶ä¸­çš„å˜é‡å ä½ç¬¦ï¼Œå®ƒå¯ä»¥ç”¨äº XML æ ‡ç­¾å±æ€§å€¼å’Œ SQL å†…éƒ¨ï¼Œå±äº<strong>å­—ç¬¦ä¸²æ›¿æ¢</strong>ã€‚ä¾‹å¦‚å°† <code>$&#123;driver&#125;</code> ä¼šè¢«é™æ€æ›¿æ¢ä¸º <code>com.mysql.jdbc.Driver</code> ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dataSource type&#x3D;&quot;UNPOOLED&quot;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;dataSource&gt;</span><br></pre></td></tr></table></figure>

<p><code>$&#123;&#125;</code> ä¹Ÿå¯ä»¥å¯¹ä¼ é€’è¿›æ¥çš„å‚æ•°<strong>åŸæ ·æ‹¼æ¥</strong>åœ¨ SQL ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;getSubject3&quot; parameterType&#x3D;&quot;Integer&quot; resultType&#x3D;&quot;Subject&quot;&gt;</span><br><span class="line">    SELECT * FROM subject</span><br><span class="line">    WHERE id &#x3D; $&#123;id&#125;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>å®é™…åœºæ™¯ä¸‹ï¼Œä¸æ¨èè¿™ä¹ˆåšã€‚å› ä¸ºï¼Œå¯èƒ½æœ‰ SQL æ³¨å…¥çš„é£é™©ã€‚</li>
</ul>
<hr>
<p><code>#&#123;&#125;</code> æ˜¯ SQL çš„å‚æ•°å ä½ç¬¦ï¼ŒMybatis ä¼šå°† SQL ä¸­çš„ <code>#&#123;&#125;</code> æ›¿æ¢ä¸º <code>?</code> å·ï¼Œåœ¨ SQL æ‰§è¡Œå‰ä¼šä½¿ç”¨ PreparedStatement çš„å‚æ•°è®¾ç½®æ–¹æ³•ï¼ŒæŒ‰åºç»™ SQL çš„ <code>?</code> å·å ä½ç¬¦è®¾ç½®å‚æ•°å€¼ï¼Œæ¯”å¦‚ <code>ps.setInt(0, parameterValue)</code> ã€‚ æ‰€ä»¥ï¼Œ<code>#&#123;&#125;</code> æ˜¯<strong>é¢„ç¼–è¯‘å¤„ç†</strong>ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<hr>
<p>å¦å¤–ï¼Œ<code>#&#123;&#125;</code> å’Œ <code>$&#123;&#125;</code> çš„å–å€¼æ–¹å¼éå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼š<code>#&#123;item.name&#125;</code> çš„å–å€¼æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨åå°„ï¼Œä»å‚æ•°å¯¹è±¡ä¸­ï¼Œè·å– <code>item</code> å¯¹è±¡çš„ <code>name</code> å±æ€§å€¼ï¼Œç›¸å½“äº <code>param.getItem().getName()</code> ã€‚</p>
<h3 id="å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠï¼Ÿ</h3><p>ç¬¬ä¸€ç§ï¼Œ é€šè¿‡åœ¨æŸ¥è¯¢çš„ SQL è¯­å¥ä¸­å®šä¹‰å­—æ®µåçš„åˆ«åï¼Œè®©å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectOrder&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Order&quot;</span>&gt;</span> </span><br><span class="line">    SELECT order_id AS id, order_no AS orderno, order_price AS price </span><br><span class="line">    FROM orders </span><br><span class="line">    WHERE order_id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¿™é‡Œï¼Œè‰¿è‰¿è¿˜æœ‰å‡ ç‚¹å»ºè®®ï¼š<ul>
<li>1ã€æ•°æ®åº“çš„å…³é”®å­—ï¼Œç»Ÿä¸€ä½¿ç”¨å¤§å†™ï¼Œä¾‹å¦‚ï¼š<code>SELECT</code>ã€<code>AS</code>ã€<code>FROM</code>ã€<code>WHERE</code> ã€‚</li>
<li>2ã€æ¯ 5 ä¸ªæŸ¥è¯¢å­—æ®µæ¢ä¸€è¡Œï¼Œä¿æŒæ•´é½ã€‚</li>
<li>3ã€<code>,</code> çš„åé¢ï¼Œå’Œ <code>=</code> çš„å‰åï¼Œéœ€è¦æœ‰ç©ºæ ¼ï¼Œæ›´åŠ æ¸…æ™°ã€‚</li>
<li>4ã€<code>SELECT</code>ã€<code>FROM</code>ã€<code>WHERE</code> ç­‰ï¼Œå•ç‹¬ä¸€è¡Œï¼Œé«˜ç«¯å¤§æ°”ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>ç¬¬äºŒç§ï¼Œæ˜¯ç¬¬ä¸€ç§çš„ç‰¹æ®Šæƒ…å†µã€‚å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åå·®ï¼Œä¸»è¦æ˜¯å‰è€…ä¸º<strong>ä¸‹åˆ’çº¿é£æ ¼</strong>ï¼Œåè€…ä¸º<strong>é©¼å³°é£æ ¼</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥é…ç½®å¦‚ä¸‹ï¼Œå®ç°è‡ªåŠ¨çš„ä¸‹åˆ’çº¿è½¬é©¼å³°çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±è¯´ï¼Œçº¦å®šå¤§äºé…ç½®ã€‚éå¸¸æ¨èï¼</p>
<hr>
<p>ç¬¬ä¸‰ç§ï¼Œé€šè¿‡ <code>&lt;resultMap&gt;</code> æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;me.gacl.domain.Order&quot;</span> <span class="attr">id</span>=<span class="string">â€OrderResultMapâ€</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">!â€“-</span> ç”¨ <span class="attr">id</span> å±æ€§æ¥æ˜ å°„ä¸»é”®å­—æ®µ <span class="attr">-</span>â€“&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;order_id&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">!â€“-</span> ç”¨ <span class="attr">result</span> å±æ€§æ¥æ˜ å°„éä¸»é”®å­—æ®µï¼Œ<span class="attr">property</span> ä¸ºå®ä½“ç±»å±æ€§åï¼Œ<span class="attr">column</span> ä¸ºæ•°æ®è¡¨ä¸­çš„å±æ€§ <span class="attr">-</span>â€“&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;orderNo&quot;</span> <span class="attr">column</span> =<span class="string">&quot;order_no&quot;</span> /&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span> <span class="attr">column</span>=<span class="string">&quot;order_price&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOrder&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;OrderResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT * </span><br><span class="line">    FROM orders </span><br><span class="line">    WHERE order_id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ­¤å¤„ <code>SELECT *</code> ä»…ä»…ä½œä¸ºç¤ºä¾‹åªç”¨ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œåƒä¸‡åƒä¸‡åƒä¸‡ä¸è¦è¿™ä¹ˆå¹²ã€‚ç”¨å¤šå°‘å­—æ®µï¼ŒæŸ¥è¯¢å¤šå°‘å­—æ®µã€‚</li>
<li>ç›¸æ¯”ç¬¬ä¸€ç§ï¼Œç¬¬ä¸‰ç§çš„<strong>é‡ç”¨æ€§</strong>ä¼šé«˜ä¸€äº›ã€‚</li>
</ul>
<h3 id="XML-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-update-deleteæ ‡-ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"><a href="#XML-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-update-deleteæ ‡-ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ" class="headerlink" title="XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select | insert | update | deleteæ ‡ ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"></a>XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select | insert | update | deleteæ ‡ ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ</h3><p>å¦‚ä¸‹éƒ¨åˆ†ï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/sqlmap-xml.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” Mapper XML æ–‡ä»¶ã€‹</a> ï¼š</p>
<ul>
<li><code>&lt;cache /&gt;</code>æ ‡ç­¾ï¼Œç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li>
<li><code>&lt;cache-ref /&gt;</code> æ ‡ç­¾ï¼Œå…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚</li>
<li><code>&lt;resultMap /&gt;</code> æ ‡ç­¾ï¼Œæ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚</li>
<li><del><code>&lt;parameterMap /&gt;</code> æ ‡ç­¾ï¼Œå·²åºŸå¼ƒï¼è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚å†…è”å‚æ•°æ˜¯é¦–é€‰,è¿™ä¸ªå…ƒç´ å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ï¼Œè¿™é‡Œä¸ä¼šè®°å½•ã€‚</del></li>
<li><code>&lt;sql /&gt;</code>æ ‡ç­¾ï¼Œå¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚</li>
<li><code>&lt;include /&gt;</code> æ ‡ç­¾ï¼Œå¼•ç”¨ <code>&lt;sql /&gt;</code> æ ‡ç­¾çš„è¯­å¥ã€‚</li>
<li><code>&lt;selectKey /&gt;</code> æ ‡ç­¾ï¼Œä¸æ”¯æŒè‡ªå¢çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æ ‡ç­¾ã€‚</li>
</ul>
<p>å¦‚ä¸‹éƒ¨åˆ†ï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” åŠ¨æ€ SQLã€‹</a> ï¼š</p>
<ul>
<li><code>&lt;if /&gt;</code></li>
<li><code>&lt;choose /&gt;</code>ã€<code>&lt;when /&gt;</code>ã€<code>&lt;otherwise /&gt;</code></li>
<li><code>&lt;trim /&gt;</code>ã€<code>&lt;where /&gt;</code>ã€<code>&lt;set /&gt;</code></li>
<li><code>&lt;foreach /&gt;</code></li>
<li><code>&lt;bind /&gt;</code></li>
</ul>
<h3 id="Mybatis-åŠ¨æ€-SQL-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€-SQL-ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€-SQL-çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ"><a href="#Mybatis-åŠ¨æ€-SQL-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€-SQL-ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€-SQL-çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ" class="headerlink" title="Mybatis åŠ¨æ€ SQL æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€ SQL ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€ SQL çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ"></a>Mybatis åŠ¨æ€ SQL æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€ SQL ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€ SQL çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ</h3><ul>
<li>Mybatis åŠ¨æ€ SQL ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ XML æ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥ XML æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€ SQL ï¼Œå®Œæˆé€»è¾‘åˆ¤æ–­å’ŒåŠ¨æ€æ‹¼æ¥ SQL çš„åŠŸèƒ½ã€‚</li>
<li>Mybatis æä¾›äº† 9 ç§åŠ¨æ€ SQL æ ‡ç­¾ï¼š<code>&lt;if /&gt;</code>ã€<code>&lt;choose /&gt;</code>ã€<code>&lt;when /&gt;</code>ã€<code>&lt;otherwise /&gt;</code>ã€<code>&lt;trim /&gt;</code>ã€<code>&lt;where /&gt;</code>ã€<code>&lt;set /&gt;</code>ã€<code>&lt;foreach /&gt;</code>ã€<code>&lt;bind /&gt;</code> ã€‚</li>
<li>å…¶æ‰§è¡ŒåŸç†ä¸ºï¼Œä½¿ç”¨ <strong>OGNL</strong> çš„è¡¨è¾¾å¼ï¼Œä» SQL å‚æ•°å¯¹è±¡ä¸­è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼Œæ ¹æ®è¡¨è¾¾å¼çš„å€¼åŠ¨æ€æ‹¼æ¥ SQL ï¼Œä»¥æ­¤æ¥å®ŒæˆåŠ¨æ€ SQL çš„åŠŸèƒ½ã€‚</li>
</ul>
<p>å¦‚ä¸Šçš„å†…å®¹ï¼Œæ›´åŠ è¯¦ç»†çš„è¯ï¼Œè¯·çœ‹ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” åŠ¨æ€ SQLã€‹</a> æ–‡æ¡£ã€‚</p>
<h3 id="æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª-XML-æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª-Mapper-æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª-Mapper-æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper-æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ"><a href="#æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª-XML-æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª-Mapper-æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª-Mapper-æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper-æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ" class="headerlink" title="æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Mapper æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ"></a>æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Mapper æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ</h3><p>Mapper æ¥å£ï¼Œå¯¹åº”çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ <code>&quot;namespace&quot;</code> çš„å€¼ã€‚</li>
<li>æ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­ MappedStatement çš„ <code>&quot;id&quot;</code> å€¼ã€‚</li>
<li>æ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚</li>
</ul>
<p>Mapper æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å + æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ªå¯¹åº”çš„ MappedStatement ã€‚ä¸¾ä¾‹ï¼š<code>com.mybatis3.mappers.StudentDao.findStudentById</code> ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° <code>&quot;namespace&quot;</code> ä¸º <code>com.mybatis3.mappers.StudentDao</code> ä¸‹é¢ <code>&quot;id&quot;</code> ä¸º <code>findStudentById</code> çš„ MappedStatement ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼Œåœ¨ Mybatis ä¸­ï¼Œæ¯ä¸€ä¸ª <code>&lt;select /&gt;</code>ã€<code>&lt;insert /&gt;</code>ã€<code>&lt;update /&gt;</code>ã€<code>&lt;delete /&gt;</code> æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª MappedStatement å¯¹è±¡ã€‚</p>
<p>å¦å¤–ï¼ŒMapper æ¥å£çš„å®ç°ç±»ï¼Œé€šè¿‡ MyBatis ä½¿ç”¨ <strong>JDK Proxy</strong> è‡ªåŠ¨ç”Ÿæˆå…¶ä»£ç†å¯¹è±¡ Proxy ï¼Œè€Œä»£ç†å¯¹è±¡ Proxy ä¼šæ‹¦æˆªæ¥å£æ–¹æ³•ï¼Œä»è€Œâ€œè°ƒç”¨â€å¯¹åº”çš„ MappedStatement æ–¹æ³•ï¼Œæœ€ç»ˆæ‰§è¡Œ SQL ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/MyBatis/2020_03_15/02.png" alt="æµç¨‹"></p>
<ul>
<li><p>å…¶ä¸­ï¼ŒSqlSession åœ¨è°ƒç”¨ Executor ä¹‹å‰ï¼Œä¼šè·å¾—å¯¹åº”çš„ MappedStatement æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š<code>DefaultSqlSession#select(String statement, Object parameter, RowBounds rowBounds, ResultHandler handler)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DefaultSqlSession.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">(String statement, Object parameter, RowBounds rowBounds, ResultHandler handler)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è·å¾— MappedStatement å¯¹è±¡</span></span><br><span class="line">        MappedStatement ms = configuration.getMappedStatement(statement);</span><br><span class="line">        <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">        executor.query(ms, wrapCollection(parameter), rowBounds, handler);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> ExceptionFactory.wrapException(<span class="string">&quot;Error querying database.  Cause: &quot;</span> + e, e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        ErrorContext.instance().reset();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å®Œæ•´çš„æµç¨‹ï¼Œèƒ–å‹å¯ä»¥æ…¢æ…¢æ’¸ä¸‹ MyBatis çš„æºç ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>Mapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œæ˜¯ä¸èƒ½é‡è½½çš„ï¼Œå› ä¸ºæ˜¯<strong>å…¨é™å + æ–¹æ³•å</strong>çš„ä¿å­˜å’Œå¯»æ‰¾ç­–ç•¥ã€‚ğŸ˜ˆ æ‰€ä»¥æœ‰æ—¶ï¼Œæƒ³ä¸ª Mapper æ¥å£é‡Œçš„æ–¹æ³•åï¼Œè¿˜æ˜¯è›®é—¹å¿ƒçš„ï¼Œå˜¿å˜¿ã€‚</p>
<h3 id="Mapper-æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼-åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„"><a href="#Mapper-æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼-åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„" class="headerlink" title="Mapper æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼,åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„?"></a>Mapper æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼,åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„?</h3><p>æ¥å£ç»‘å®šæœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼Œé€šè¿‡ <strong>XML Mapper</strong> é‡Œé¢å†™ SQL æ¥ç»‘å®šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦æŒ‡å®š XML æ˜ å°„æ–‡ä»¶é‡Œé¢çš„ <code>&quot;namespace&quot;</code> å¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚</p>
<p>ç¬¬äºŒç§ï¼Œé€šè¿‡<strong>æ³¨è§£</strong>ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š <code>@Select</code>ã€<code>@Update</code>ã€<code>@Insert</code>ã€<code>@Delete</code> æ³¨è§£ï¼Œé‡Œé¢åŒ…å« SQL è¯­å¥æ¥ç»‘å®šã€‚</p>
<p>ç¬¬ä¸‰ç§ï¼Œæ˜¯ç¬¬äºŒç§çš„ç‰¹ä¾‹ï¼Œä¹Ÿæ˜¯é€šè¿‡<strong>æ³¨è§£</strong>ç»‘å®šï¼Œåœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š <code>@SelectProvider</code>ã€<code>@UpdateProvider</code>ã€<code>@InsertProvider</code>ã€<code>@DeleteProvider</code> æ³¨è§£ï¼Œé€šè¿‡ Java ä»£ç ï¼Œç”Ÿæˆå¯¹åº”çš„åŠ¨æ€ SQL ã€‚</p>
<hr>
<p>å®é™…åœºæ™¯ä¸‹ï¼Œæœ€æœ€æœ€æ¨èçš„æ˜¯<strong>ç¬¬ä¸€ç§</strong>æ–¹å¼ã€‚å› ä¸ºï¼ŒSQL é€šè¿‡æ³¨è§£å†™åœ¨ Java ä»£ç ä¸­ï¼Œä¼šéå¸¸æ‚ä¹±ã€‚è€Œå†™åœ¨ XML ä¸­ï¼Œæ›´åŠ æœ‰æ•´ä½“æ€§ï¼Œå¹¶ä¸”å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨ OGNL è¡¨è¾¾å¼ã€‚</p>
<h3 id="Mybatis-çš„-XML-Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„-XML-æ˜ å°„æ–‡ä»¶ï¼Œid-æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ"><a href="#Mybatis-çš„-XML-Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„-XML-æ˜ å°„æ–‡ä»¶ï¼Œid-æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ" class="headerlink" title="Mybatis çš„ XML Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„ XML æ˜ å°„æ–‡ä»¶ï¼Œid æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ"></a>Mybatis çš„ XML Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„ XML æ˜ å°„æ–‡ä»¶ï¼Œid æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ</h3><p>ä¸åŒçš„ XML Mapper æ–‡ä»¶ï¼Œå¦‚æœé…ç½®äº† <code>&quot;namespace&quot;</code> ï¼Œé‚£ä¹ˆ id å¯ä»¥é‡å¤ï¼›å¦‚æœæ²¡æœ‰é…ç½® <code>&quot;namespace&quot;</code> ï¼Œé‚£ä¹ˆ id ä¸èƒ½é‡å¤ã€‚æ¯•ç«Ÿ<code>&quot;namespace&quot;</code> ä¸æ˜¯å¿…é¡»çš„ï¼Œåªæ˜¯æœ€ä½³å®è·µè€Œå·²ã€‚</p>
<p>åŸå› å°±æ˜¯ï¼Œ<code>namespace + id</code> æ˜¯ä½œä¸º <code>Map</code> çš„ key ä½¿ç”¨çš„ã€‚å¦‚æœæ²¡æœ‰ <code>&quot;namespace&quot;</code>ï¼Œå°±å‰©ä¸‹ id ï¼Œé‚£ä¹ˆ id é‡å¤ä¼šå¯¼è‡´æ•°æ®äº’ç›¸è¦†ç›–ã€‚å¦‚æœæœ‰äº† <code>&quot;namespace&quot;</code>ï¼Œè‡ªç„¶ id å°±å¯ä»¥é‡å¤ï¼Œ<code>&quot;namespace&quot;</code>ä¸åŒï¼Œ<code>namespace + id</code> è‡ªç„¶ä¹Ÿå°±ä¸åŒã€‚</p>
<h3 id="å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„-ä¸»-é”®å€¼"><a href="#å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„-ä¸»-é”®å€¼" class="headerlink" title="å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼?"></a>å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼?</h3><p>ä¸åŒçš„æ•°æ®åº“ï¼Œè·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼çš„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚</p>
<p>MySQL æœ‰ä¸¤ç§æ–¹å¼ï¼Œä½†æ˜¯<strong>è‡ªå¢ä¸»é”®</strong>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// æ–¹å¼ä¸€ï¼Œä½¿ç”¨ useGeneratedKeys + keyProperty å±æ€§</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Person&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    INSERT INTO person(name, pswd)</span><br><span class="line">    VALUE (#&#123;name&#125;, #&#123;pswd&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">// æ–¹å¼äºŒï¼Œä½¿ç”¨ `<span class="tag">&lt;<span class="name">selectKey</span> /&gt;</span>` æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span>&gt;</span></span><br><span class="line">        SELECT LAST_INSERT_ID()</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    INSERT INTO person(name, pswd)</span><br><span class="line">    VALUE (#&#123;name&#125;, #&#123;pswd&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ï¼Œ<strong>æ–¹å¼ä¸€</strong>è¾ƒä¸ºå¸¸ç”¨ã€‚</li>
</ul>
<hr>
<p>Oracle æœ‰ä¸¤ç§æ–¹å¼ï¼Œ<strong>åºåˆ—</strong>å’Œ<strong>è§¦å‘å™¨</strong>ã€‚å› ä¸ºè‰¿è‰¿è‡ªå·±ä¸äº†è§£ Oracle ï¼Œæ‰€ä»¥é—®äº†é“¶è¡Œçš„æœ‹å‹ï¼Œä»–ä»¬æ˜¯ä½¿ç”¨<strong>åºåˆ—</strong>ã€‚è€ŒåŸºäº<strong>åºåˆ—</strong>ï¼Œæ ¹æ® `` æ‰§è¡Œçš„æ—¶æœºï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸ªæ˜¯åˆ›å»ºè¡¨çš„è‡ªå¢åºåˆ—</span><br><span class="line">CREATE SEQUENCE student_sequence</span><br><span class="line">INCREMENT BY 1</span><br><span class="line">NOMAXVALUE</span><br><span class="line">NOCYCLE</span><br><span class="line">CACHE 10;</span><br><span class="line"></span><br><span class="line">// æ–¹å¼ä¸€ï¼Œä½¿ç”¨ `<span class="tag">&lt;<span class="name">selectKey</span> /&gt;</span>` æ ‡ç­¾ + BEFORE</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">ã€€ã€€<span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;student_id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class="line">      select student_sequence.nextval FROM dual</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     INSERT INTO student(student_id, student_name, student_age)</span><br><span class="line">     VALUES (#&#123;student_id&#125;,#&#123;student_name&#125;,#&#123;student_age&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// æ–¹å¼äºŒï¼Œä½¿ç”¨ `<span class="tag">&lt;<span class="name">selectKey</span> /&gt;</span>` æ ‡ç­¾ + AFTER</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.threeti.to.ZoneTO&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Long&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span> &gt;</span></span><br><span class="line">      SELECT SEQ_ZONE.CURRVAL AS id FROM dual</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    INSERT INTO TBL_ZONE (ID, NAME ) </span><br><span class="line">    VALUES (SEQ_ZONE.NEXTVAL, #&#123;name,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä»–ä»¬ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ²¡æœ‰å…·ä½“åŸå› ï¼Œå¯èƒ½å°±æ²¡ä»€ä¹ˆè®²ç©¶å§ã€‚å˜¿å˜¿ã€‚</li>
</ul>
<p>è‡³äºä¸ºä»€ä¹ˆä¸ç”¨<strong>è§¦å‘å™¨</strong>å‘¢ï¼Ÿæœ‹å‹æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æœ‹å‹ï¼šè§¦å‘å™¨ä¸è¡Œå•Šï¼Œæˆ‘ä»¬è¿™è¾¹åŸæ¥ä¹Ÿæœ‰è§¦å‘å™¨ï¼Œä¸€æœ‰æ•°æ®æ›´æ”¹å°±ä¼šæœ‰é—®é¢˜äº†å‘€<br>è‰¿è‰¿ï¼šæ•°æ®æ›´æ”¹æŒ‡çš„æ˜¯ï¼Ÿ<br>æœ‹å‹ï¼šå°±æ”¹çº¿ä¸ŠæŸå‡ æ¡æ•°æ®<br>è‰¿è‰¿ï¼šå™¢å™¢ã€‚æ‰‹åŠ¨æ”¹æ˜¯å§ï¼Ÿ<br>æœ‹å‹ï¼šä¸è¡Œ~</p>
</blockquote>
<hr>
<p>å½“ç„¶ï¼Œæ•°æ®åº“è¿˜æœ‰ SQLServerã€PostgreSQLã€DB2ã€H2 ç­‰ç­‰ï¼Œå…·ä½“çš„æ–¹å¼ï¼Œèƒ–å‹è‡ªå·± Google ä¸‹å™¢ã€‚</p>
<p>å…³äºå¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼çš„<strong>åŸç†</strong>ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-3/">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆä¸‰ï¼‰ä¹‹ KeyGeneratorã€‹</a> ã€‚</p>
<h3 id="Mybatis-æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ"><a href="#Mybatis-æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ" class="headerlink" title="Mybatis æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ"></a>Mybatis æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ</h3><p>èƒ½ï¼ŒJDBC éƒ½èƒ½åšï¼ŒMybatis å½“ç„¶ä¹Ÿèƒ½åšã€‚</p>
<h3 id="åœ¨-Mapper-ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°"><a href="#åœ¨-Mapper-ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°" class="headerlink" title="åœ¨ Mapper ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?"></a>åœ¨ Mapper ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?</h3><p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨ Map é›†åˆï¼Œè£…è½½å¤šä¸ªå‚æ•°è¿›è¡Œä¼ é€’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è°ƒç”¨æ–¹æ³•</span><br><span class="line">Map&lt;String, Object&gt; map &#x3D; new HashMap();</span><br><span class="line">map.put(&quot;start&quot;, start);</span><br><span class="line">map.put(&quot;end&quot;, end);</span><br><span class="line">return studentMapper.selectStudents(map);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Mapper æ¥å£</span><br><span class="line">List&lt;Student&gt; selectStudents(Map&lt;String, Object&gt; map);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Mapper XML ä»£ç </span><br><span class="line">&lt;select id&#x3D;&quot;selectStudents&quot; parameterType&#x3D;&quot;Map&quot; resultType&#x3D;&quot;Student&quot;&gt;</span><br><span class="line">    SELECT * </span><br><span class="line">    FROM students </span><br><span class="line">    LIMIT #&#123;start&#125;, #&#123;end&#125;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ˜¾ç„¶ï¼Œè¿™ä¸æ˜¯ä¸€ç§ä¼˜é›…çš„æ–¹å¼ã€‚</li>
</ul>
<hr>
<p>ç¬¬äºŒç§ï¼Œä¿æŒä¼ é€’å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨ <code>@Param</code> æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">return</span> studentMapper.selectStudents(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapper æ¥å£</span></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">selectStudents</span><span class="params">(<span class="meta">@Param(&quot;start&quot;)</span> Integer start, <span class="meta">@Param(&quot;end&quot;)</span> Integer end)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapper XML ä»£ç </span></span><br><span class="line">&lt;select id=<span class="string">&quot;selectStudents&quot;</span> resultType=<span class="string">&quot;Student&quot;</span>&gt;</span><br><span class="line">    SELECT * </span><br><span class="line">    FROM students </span><br><span class="line">    LIMIT #&#123;start&#125;, #&#123;end&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</li>
</ul>
<hr>
<p>ç¬¬ä¸‰ç§ï¼Œä¿æŒä¼ é€’å¤šä¸ªå‚æ•°ï¼Œä¸ä½¿ç”¨ <code>@Param</code> æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">return</span> studentMapper.selectStudents(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapper æ¥å£</span></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">selectStudents</span><span class="params">(Integer start, Integer end)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapper XML ä»£ç </span></span><br><span class="line">&lt;select id=<span class="string">&quot;selectStudents&quot;</span> resultType=<span class="string">&quot;Student&quot;</span>&gt;</span><br><span class="line">    SELECT * </span><br><span class="line">    FROM students </span><br><span class="line">    LIMIT #&#123;param1&#125;, #&#123;param2&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ï¼ŒæŒ‰ç…§å‚æ•°åœ¨æ–¹æ³•æ–¹æ³•ä¸­çš„ä½ç½®ï¼Œä» 1 å¼€å§‹ï¼Œé€ä¸ªä¸º <code>#&#123;param1&#125;</code>ã€<code>#&#123;param2&#125;</code>ã€<code>#&#123;param3&#125;</code> ä¸æ–­å‘ä¸‹ã€‚</li>
</ul>
<h3 id="Mybatis-æ˜¯å¦å¯ä»¥æ˜ å°„-Enum-æšä¸¾ç±»ï¼Ÿ"><a href="#Mybatis-æ˜¯å¦å¯ä»¥æ˜ å°„-Enum-æšä¸¾ç±»ï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦å¯ä»¥æ˜ å°„ Enum æšä¸¾ç±»ï¼Ÿ"></a>Mybatis æ˜¯å¦å¯ä»¥æ˜ å°„ Enum æšä¸¾ç±»ï¼Ÿ</h3><p>Mybatis å¯ä»¥æ˜ å°„æšä¸¾ç±»ï¼Œå¯¹åº”çš„å®ç°ç±»ä¸º EnumTypeHandler æˆ– EnumOrdinalTypeHandler ã€‚</p>
<ul>
<li>EnumTypeHandler ï¼ŒåŸºäº <code>Enum.name</code> å±æ€§( String )ã€‚<strong>é»˜è®¤</strong>ã€‚</li>
<li>EnumOrdinalTypeHandler ï¼ŒåŸºäº <code>Enum.ordinal</code> å±æ€§( <code>int</code> )ã€‚å¯é€šè¿‡ `` æ¥è®¾ç½®ã€‚</li>
</ul>
<p>ğŸ˜ˆ å½“ç„¶ï¼Œå®é™…å¼€å‘åœºæ™¯ï¼Œæˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ Enum ç±»å‹ï¼Œæ›´ä½³çš„æ–¹å¼æ˜¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_GOOD = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_BETTER = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_BEST = <span class="number">3</span>ï¼›</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> status;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>å¹¶ä¸”ï¼Œä¸å•å¯ä»¥æ˜ å°„æšä¸¾ç±»ï¼ŒMybatis å¯ä»¥æ˜ å°„ä»»ä½•å¯¹è±¡åˆ°è¡¨çš„ä¸€åˆ—ä¸Šã€‚æ˜ å°„æ–¹å¼ä¸ºè‡ªå®šä¹‰ä¸€ä¸ª TypeHandler ç±»ï¼Œå®ç° TypeHandler çš„<code>#setParameter(...)</code> å’Œ <code>#getResult(...)</code> æ¥å£æ–¹æ³•ã€‚</p>
<p>TypeHandler æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>ä¸€æ˜¯ï¼Œå®Œæˆä» javaType è‡³ jdbcType çš„è½¬æ¢ã€‚</li>
<li>äºŒæ˜¯ï¼Œå®Œæˆ jdbcType è‡³ javaType çš„è½¬æ¢ã€‚</li>
</ul>
<p>å…·ä½“ä½“ç°ä¸º <code>#setParameter(...)</code> å’Œ <code>#getResult(..)</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ä»£è¡¨è®¾ç½® SQL é—®å·å ä½ç¬¦å‚æ•°å’Œè·å–åˆ—æŸ¥è¯¢ç»“æœã€‚</p>
<p>å…³äº TypeHandler çš„<strong>åŸç†</strong>ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/type-package/">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” ç±»å‹æ¨¡å—ã€‹</a> ã€‚</p>
<h3 id="Mybatis-éƒ½æœ‰å“ªäº›-Executor-æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-éƒ½æœ‰å“ªäº›-Executor-æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis éƒ½æœ‰å“ªäº› Executor æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis éƒ½æœ‰å“ªäº› Executor æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Mybatis æœ‰å››ç§ Executor æ‰§è¡Œå™¨ï¼Œåˆ†åˆ«æ˜¯ SimpleExecutorã€ReuseExecutorã€BatchExecutorã€CachingExecutor ã€‚</p>
<ul>
<li>SimpleExecutor ï¼šæ¯æ‰§è¡Œä¸€æ¬¡ update æˆ– select æ“ä½œï¼Œå°±åˆ›å»ºä¸€ä¸ª Statement å¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­ Statement å¯¹è±¡ã€‚</li>
<li>ReuseExecutor ï¼šæ‰§è¡Œ update æˆ– select æ“ä½œï¼Œä»¥ SQL ä½œä¸ºkey æŸ¥æ‰¾<strong>ç¼“å­˜</strong>çš„ Statement å¯¹è±¡ï¼Œå­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼›ç”¨å®Œåï¼Œä¸å…³é—­ Statement å¯¹è±¡ï¼Œè€Œæ˜¯æ”¾ç½®äºç¼“å­˜ <code>Map</code> å†…ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é‡å¤ä½¿ç”¨ Statement å¯¹è±¡ã€‚</li>
<li>BatchExecutor ï¼šæ‰§è¡Œ update æ“ä½œï¼ˆæ²¡æœ‰ select æ“ä½œï¼Œå› ä¸º JDBC æ‰¹å¤„ç†ä¸æ”¯æŒ select æ“ä½œï¼‰ï¼Œå°†æ‰€æœ‰ SQL éƒ½æ·»åŠ åˆ°æ‰¹å¤„ç†ä¸­ï¼ˆé€šè¿‡ addBatch æ–¹æ³•ï¼‰ï¼Œç­‰å¾…ç»Ÿä¸€æ‰§è¡Œï¼ˆä½¿ç”¨ executeBatch æ–¹æ³•ï¼‰ã€‚å®ƒç¼“å­˜äº†å¤šä¸ª Statement å¯¹è±¡ï¼Œæ¯ä¸ª Statement å¯¹è±¡éƒ½æ˜¯è°ƒç”¨ addBatch æ–¹æ³•å®Œæ¯•åï¼Œç­‰å¾…ä¸€æ¬¡æ‰§è¡Œ executeBatch æ‰¹å¤„ç†ã€‚<strong>å®é™…ä¸Šï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ JDBC æ‰¹å¤„ç†æ˜¯ç›¸åŒ</strong>ã€‚</li>
<li>CachingExecutor ï¼šåœ¨ä¸Šè¿°çš„ä¸‰ä¸ªæ‰§è¡Œå™¨ä¹‹ä¸Šï¼Œå¢åŠ <strong>äºŒçº§ç¼“å­˜</strong>çš„åŠŸèƒ½ã€‚</li>
</ul>
<hr>
<p>é€šè¿‡è®¾ç½® <code>&lt;setting name=&quot;defaultExecutorType&quot; value=&quot;&quot;&gt;</code> çš„ <code>&quot;value&quot;</code> å±æ€§ï¼Œå¯ä¼ å…¥ SIMPLEã€REUSEã€BATCH ä¸‰ä¸ªå€¼ï¼Œåˆ†åˆ«ä½¿ç”¨ SimpleExecutorã€ReuseExecutorã€BatchExecutor æ‰§è¡Œå™¨ã€‚</p>
<p>é€šè¿‡è®¾ç½® <code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;&quot;</code> çš„ <code>&quot;value&quot;</code> å±æ€§ä¸º <code>true</code> æ—¶ï¼Œåˆ›å»º CachingExecutor æ‰§è¡Œå™¨ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-1">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆä¸€ï¼‰ä¹‹ Executorã€‹</a> ã€‚</p>
<h3 id="MyBatis-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥"><a href="#MyBatis-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥" class="headerlink" title="MyBatis å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥?"></a>MyBatis å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥?</h3><p>é¦–å…ˆï¼Œåœ¨ Mapper XML ç¼–å†™ä¸€ä¸ªç®€å•çš„ Insert è¯­å¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span> </span><br><span class="line">    INSERT INTO users(name) </span><br><span class="line">    VALUES (#&#123;value&#125;) </span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œç„¶ååœ¨å¯¹åº”çš„ Mapper æ¥å£ä¸­ï¼Œç¼–å†™æ˜ å°„çš„æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insertUser</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œè°ƒç”¨è¯¥ Mapper æ¥å£æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBatch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¦æ’å…¥çš„ç”¨æˆ·çš„åå­—çš„æ•°ç»„</span></span><br><span class="line">    List&lt;String&gt; names = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    names.add(<span class="string">&quot;å å°ç‹¼&quot;</span>);</span><br><span class="line">    names.add(<span class="string">&quot;æœ±å°å®&quot;</span>);</span><br><span class="line">    names.add(<span class="string">&quot;å¾å¦ˆ&quot;</span>);</span><br><span class="line">    names.add(<span class="string">&quot;é£å“¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—æ‰§è¡Œå™¨ç±»å‹ä¸º Batch çš„ SqlSession å¯¹è±¡ï¼Œå¹¶ä¸” autoCommit = false ï¼Œç¦æ­¢äº‹åŠ¡è‡ªåŠ¨æäº¤</span></span><br><span class="line">    <span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH, <span class="keyword">false</span>)) &#123;</span><br><span class="line">        <span class="comment">// è·å¾— Mapper å¯¹è±¡</span></span><br><span class="line">        UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">// å¾ªç¯æ’å…¥</span></span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            mapper.insertUser(name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æäº¤æ‰¹é‡æ“ä½œ</span></span><br><span class="line">        session.commit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç æ¯”è¾ƒç®€å•ï¼Œèƒ–å‹ä»”ç»†çœ‹çœ‹ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO [è¡¨å]([åˆ—å],[åˆ—å]) </span><br><span class="line">VALUES</span><br><span class="line">([åˆ—å€¼],[åˆ—å€¼])),</span><br><span class="line">([åˆ—å€¼],[åˆ—å€¼])),</span><br><span class="line">([åˆ—å€¼],[åˆ—å€¼]));</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯¹äºè¿™ç§æ–¹å¼ï¼Œéœ€è¦ä¿è¯å•æ¡ SQL ä¸è¶…è¿‡è¯­å¥çš„æœ€å¤§é™åˆ¶ <code>max_allowed_packet</code> å¤§å°ï¼Œé»˜è®¤ä¸º 1 M ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æ–¹å¼çš„æ€§èƒ½å¯¹æ¯”ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cce617be9f9e">å®éªŒ]mybatisæ‰¹é‡æ’å…¥æ–¹å¼çš„æ¯”è¾ƒã€‹</a> ã€‚</p>
<h3 id="ä»‹ç»-MyBatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ"><a href="#ä»‹ç»-MyBatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ" class="headerlink" title="ä»‹ç» MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ"></a>ä»‹ç» MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ</h3><p>å†…å®¹æœ‰äº›é•¿ï¼Œç›´æ¥å‚è§ <a target="_blank" rel="noopener" href="https://tech.meituan.com/mybatis_cache.html">ã€ŠèŠèŠ MyBatis ç¼“å­˜æœºåˆ¶ã€‹</a> ä¸€æ–‡ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/cache-package">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” ç¼“å­˜æ¨¡å—ã€‹</a> ã€‚</p>
<h3 id="Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Mybatis ä»…æ”¯æŒ association å…³è”å¯¹è±¡å’Œ collection å…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚å…¶ä¸­ï¼Œassociation æŒ‡çš„å°±æ˜¯<strong>ä¸€å¯¹ä¸€</strong>ï¼Œcollection æŒ‡çš„å°±æ˜¯<strong>ä¸€å¯¹å¤šæŸ¥è¯¢</strong>ã€‚</p>
<p>åœ¨ Mybatis é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½® <code>&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot; /&gt;</code> æ¥å¯ç”¨å»¶è¿ŸåŠ è½½çš„åŠŸèƒ½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå»¶è¿ŸåŠ è½½çš„åŠŸèƒ½æ˜¯<strong>å…³é—­</strong>çš„ã€‚</p>
<hr>
<p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨ CGLIB æˆ– Javassist( é»˜è®¤ ) åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ã€‚å½“è°ƒç”¨ä»£ç†å¯¹è±¡çš„å»¶è¿ŸåŠ è½½å±æ€§çš„ getting æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ã€‚æ¯”å¦‚è°ƒç”¨ <code>a.getB().getName()</code> æ–¹æ³•ï¼Œè¿›å…¥æ‹¦æˆªå™¨çš„ <code>invoke(...)</code> æ–¹æ³•ï¼Œå‘ç° <code>a.getB()</code> éœ€è¦å»¶è¿ŸåŠ è½½æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è” B å¯¹è±¡çš„ SQL ï¼ŒæŠŠ B æŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨<code>a.setB(b)</code> æ–¹æ³•ï¼Œäºæ˜¯ <code>a</code> å¯¹è±¡ <code>b</code> å±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆ<code>a.getB().getName()</code> æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p>
<p>å½“ç„¶äº†ï¼Œä¸å…‰æ˜¯ Mybatisï¼Œå‡ ä¹æ‰€æœ‰çš„åŒ…æ‹¬ Hibernate åœ¨å†…ï¼Œæ”¯æŒå»¶è¿ŸåŠ è½½çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-5">ã€Š ç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆäº”ï¼‰ä¹‹å»¶è¿ŸåŠ è½½ã€‹</a> æ–‡ç« ã€‚</p>
<h3 id="Mybatis-èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚"><a href="#Mybatis-èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚" class="headerlink" title="Mybatis èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚"></a>Mybatis èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</h3><blockquote>
<p>è‰¿è‰¿ï¼šè¿™é“é¢˜æœ‰ç‚¹éš¾åº¦ã€‚ç†è§£å€’æ˜¯å¥½ç†è§£ï¼Œä¸»è¦é‚£å—æºç çš„å®ç°ï¼Œè‰¿è‰¿çœ‹çš„æœ‰ç‚¹æ‡µé€¼ã€‚å¤§ä½“çš„æ„æ€æ˜¯æ‡‚çš„ï¼Œä½†æ˜¯ä¸€äº›ç»†èŠ‚æ²¡æ‰£å®Œã€‚</p>
</blockquote>
<p>èƒ½ï¼ŒMybatis ä¸ä»…å¯ä»¥æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥æ‰§è¡Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šçš„å…³è”æŸ¥è¯¢ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šä¸è¿‡è²Œä¼¼ï¼Œæˆ‘è‡ªå·±å®é™…å¼€å‘ä¸­ï¼Œè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢è‡ªå·±å»æŸ¥è¯¢å’Œæ‹¼æ¥æ˜ å°„çš„æ•°æ®ã€‚ğŸ˜ˆ</p>
</blockquote>
<ul>
<li>å¤šå¯¹ä¸€æŸ¥è¯¢ï¼Œå…¶å®å°±æ˜¯ä¸€å¯¹ä¸€æŸ¥è¯¢ï¼Œåªéœ€è¦æŠŠ <code>selectOne(...)</code> ä¿®æ”¹ä¸º <code>selectList(...)</code> å³å¯ã€‚æ¡ˆä¾‹å¯è§ <a target="_blank" rel="noopener" href="https://blog.csdn.net/xzm_rainbow/article/details/15336959">ã€ŠMyBatisï¼šå¤šå¯¹ä¸€è¡¨å…³ç³»è¯¦è§£ã€‹</a> ã€‚</li>
<li>å¤šå¯¹å¤šæŸ¥è¯¢ï¼Œå…¶å®å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ï¼Œåªéœ€è¦æŠŠ <code>#selectOne(...)</code> ä¿®æ”¹ä¸º <code>selectList(...)</code> å³å¯ã€‚æ¡ˆä¾‹å¯è§ <a target="_blank" rel="noopener" href="https://blog.csdn.net/eson_15/article/details/51655188">ã€Šã€MyBatiså­¦ä¹ 10ã€‘é«˜çº§æ˜ å°„ä¹‹å¤šå¯¹å¤šæŸ¥è¯¢ã€‹</a> ã€‚</li>
</ul>
<hr>
<p>å…³è”å¯¹è±¡æŸ¥è¯¢ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<blockquote>
<p>è‰¿è‰¿ï¼šæ‰€æœ‰çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå³ä¼šæœ‰å¥½å¤„ï¼Œåˆä¼šæœ‰åå¤„ã€‚å¾ˆéš¾å‡ºç°ï¼Œä¸€ä¸ªå®Œç¾çš„é“¶å¼¹æ–¹æ¡ˆã€‚</p>
</blockquote>
<ul>
<li>ä¸€ç§æ˜¯å•ç‹¬å‘é€ä¸€ä¸ª SQL å»æŸ¥è¯¢å…³è”å¯¹è±¡ï¼Œèµ‹ç»™ä¸»å¯¹è±¡ï¼Œç„¶åè¿”å›ä¸»å¯¹è±¡ã€‚å¥½å¤„æ˜¯å¤šæ¡ SQL åˆ†å¼€ï¼Œç›¸å¯¹ç®€å•ï¼Œåå¤„æ˜¯å‘èµ·çš„ SQL å¯èƒ½ä¼šæ¯”è¾ƒå¤šã€‚</li>
<li>å¦ä¸€ç§æ˜¯ä½¿ç”¨åµŒå¥—æŸ¥è¯¢ï¼ŒåµŒå¥—æŸ¥è¯¢çš„å«ä¹‰ä¸ºä½¿ç”¨ <code>join</code> æŸ¥è¯¢ï¼Œä¸€éƒ¨åˆ†åˆ—æ˜¯ A å¯¹è±¡çš„å±æ€§å€¼ï¼Œå¦å¤–ä¸€éƒ¨åˆ†åˆ—æ˜¯å…³è”å¯¹è±¡ B çš„å±æ€§å€¼ã€‚å¥½å¤„æ˜¯åªå‘ä¸€ä¸ª SQL æŸ¥è¯¢ï¼Œå°±å¯ä»¥æŠŠä¸»å¯¹è±¡å’Œå…¶å…³è”å¯¹è±¡æŸ¥å‡ºæ¥ï¼Œåå¤„æ˜¯ SQL å¯èƒ½æ¯”è¾ƒå¤æ‚ã€‚</li>
</ul>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>join</code> æŸ¥è¯¢å‡ºæ¥ 100 æ¡è®°å½•ï¼Œå¦‚ä½•ç¡®å®šä¸»å¯¹è±¡æ˜¯ 5 ä¸ªï¼Œè€Œä¸æ˜¯ 100 ä¸ªå‘¢ï¼Ÿå…¶å»é‡å¤çš„åŸç†æ˜¯ <code>&lt;resultMap&gt;</code> æ ‡ç­¾å†…çš„<code>&lt;id&gt;</code> å­æ ‡ç­¾ï¼ŒæŒ‡å®šäº†å”¯ä¸€ç¡®å®šä¸€æ¡è®°å½•çš„ <code>id</code> åˆ—ã€‚Mybatis ä¼šæ ¹æ®<code>&lt;id&gt;</code> åˆ—å€¼æ¥å®Œæˆ 100 æ¡è®°å½•çš„å»é‡å¤åŠŸèƒ½ï¼Œ<code>&lt;id&gt;</code> å¯ä»¥æœ‰å¤šä¸ªï¼Œä»£è¡¨äº†è”åˆä¸»é”®çš„è¯­æ„ã€‚</p>
<p>åŒæ ·ä¸»å¯¹è±¡çš„å…³è”å¯¹è±¡ï¼Œä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªåŸç†å»é‡å¤çš„ã€‚å°½ç®¡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸»å¯¹è±¡ä¼šæœ‰é‡å¤è®°å½•ï¼Œå…³è”å¯¹è±¡ä¸€èˆ¬ä¸ä¼šé‡å¤ã€‚ä¾‹å¦‚ï¼šä¸‹é¢ <code>join</code> æŸ¥è¯¢å‡ºæ¥6æ¡è®°å½•ï¼Œä¸€ã€äºŒåˆ—æ˜¯ Teacher å¯¹è±¡åˆ—ï¼Œç¬¬ä¸‰åˆ—ä¸º Student å¯¹è±¡åˆ—ã€‚Mybatis å»é‡å¤å¤„ç†åï¼Œç»“æœä¸º 1 ä¸ªè€å¸ˆå’Œ 6 ä¸ªå­¦ç”Ÿï¼Œè€Œä¸æ˜¯ 6 ä¸ªè€å¸ˆå’Œ 6 ä¸ªå­¦ç”Ÿã€‚</p>
<table>
<thead>
<tr>
<th align="left">t_id</th>
<th align="left">t_name</th>
<th align="left">s_id</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">38</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">39</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">40</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">41</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">42</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">teacher</td>
<td align="left">43</td>
</tr>
</tbody></table>
<h3 id="ç®€è¿°-Mybatis-çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ"><a href="#ç®€è¿°-Mybatis-çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ" class="headerlink" title="ç®€è¿° Mybatis çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ"></a>ç®€è¿° Mybatis çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ</h3><p>Mybatis ä»…å¯ä»¥ç¼–å†™é’ˆå¯¹ ParameterHandlerã€ResultSetHandlerã€StatementHandlerã€Executor è¿™ 4 ç§æ¥å£çš„æ’ä»¶ã€‚</p>
<p>Mybatis ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†ï¼Œä¸ºéœ€è¦æ‹¦æˆªçš„æ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ä»¥å®ç°æ¥å£æ–¹æ³•æ‹¦æˆªåŠŸèƒ½ï¼Œæ¯å½“æ‰§è¡Œè¿™ 4 ç§æ¥å£å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šè¿›å…¥æ‹¦æˆªæ–¹æ³•ï¼Œå…·ä½“å°±æ˜¯ InvocationHandler çš„ <code>#invoke(...)</code>æ–¹æ³•ã€‚å½“ç„¶ï¼Œåªä¼šæ‹¦æˆªé‚£äº›ä½ æŒ‡å®šéœ€è¦æ‹¦æˆªçš„æ–¹æ³•ã€‚</p>
<hr>
<p>ç¼–å†™ä¸€ä¸ª MyBatis æ’ä»¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œå®ç° Mybatis çš„ Interceptor æ¥å£ï¼Œå¹¶å®ç° <code>#intercept(...)</code> æ–¹æ³•ã€‚</li>
<li>ç„¶åï¼Œåœ¨ç»™æ’ä»¶ç¼–å†™æ³¨è§£ï¼ŒæŒ‡å®šè¦æ‹¦æˆªå“ªä¸€ä¸ªæ¥å£çš„å“ªäº›æ–¹æ³•å³å¯</li>
<li>æœ€åï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä½ ç¼–å†™çš„æ’ä»¶ã€‚</li>
</ol>
<p>å…·ä½“çš„ï¼Œå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins">ã€ŠMyBatis å®˜æ–¹æ–‡æ¡£ â€”â€” æ’ä»¶ã€‹</a> ã€‚</p>
<hr>
<p>æ’ä»¶çš„è¯¦ç»†è§£æï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/plugin-1">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” æ’ä»¶ä½“ç³»ï¼ˆä¸€ï¼‰ä¹‹åŸç†ã€‹</a> ã€‚</p>
<h3 id="Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Mybatis ä½¿ç”¨ RowBounds å¯¹è±¡è¿›è¡Œåˆ†é¡µï¼Œå®ƒæ˜¯é’ˆå¯¹ ResultSet ç»“æœé›†æ‰§è¡Œçš„<strong>å†…å­˜åˆ†é¡µ</strong>ï¼Œè€Œé<strong>æ•°æ®åº“åˆ†é¡µ</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œä¸é€‚åˆç›´æ¥ä½¿ç”¨ MyBatis åŸæœ‰çš„ RowBounds å¯¹è±¡è¿›è¡Œåˆ†é¡µã€‚è€Œæ˜¯ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li>åœ¨ SQL å†…ç›´æ¥ä¹¦å†™å¸¦æœ‰æ•°æ®åº“åˆ†é¡µçš„å‚æ•°æ¥å®Œæˆæ•°æ®åº“åˆ†é¡µåŠŸèƒ½</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆæ•°æ®åº“åˆ†é¡µã€‚</li>
</ul>
<p>è¿™ä¸¤è€…éƒ½æ˜¯åŸºäºæ•°æ®åº“åˆ†é¡µï¼Œå·®åˆ«åœ¨äºå‰è€…æ˜¯å·¥ç¨‹å¸ˆ<strong>æ‰‹åŠ¨</strong>ç¼–å†™åˆ†é¡µæ¡ä»¶ï¼Œåè€…æ˜¯æ’ä»¶<strong>è‡ªåŠ¨</strong>æ·»åŠ åˆ†é¡µæ¡ä»¶ã€‚</p>
<hr>
<p>åˆ†é¡µæ’ä»¶çš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨ Mybatis æä¾›çš„æ’ä»¶æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰åˆ†é¡µæ’ä»¶ã€‚åœ¨æ’ä»¶çš„æ‹¦æˆªæ–¹æ³•å†…ï¼Œæ‹¦æˆªå¾…æ‰§è¡Œçš„ SQL ï¼Œç„¶åé‡å†™ SQL ï¼Œæ ¹æ®dialect æ–¹è¨€ï¼Œæ·»åŠ å¯¹åº”çš„ç‰©ç†åˆ†é¡µè¯­å¥å’Œç‰©ç†åˆ†é¡µå‚æ•°ã€‚</p>
<p>ä¸¾ä¾‹ï¼š<code>SELECT * FROM student</code> ï¼Œæ‹¦æˆª SQL åé‡å†™ä¸ºï¼š<code>select * FROM student LIMI 0ï¼Œ10</code> ã€‚</p>
<p>ç›®å‰å¸‚é¢ä¸Šç›®å‰ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›çš„ MyBatis åˆ†é¡µæ’ä»¶æœ‰ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">Mybatis-PageHelper</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a></li>
</ul>
<p>ä»ç°åœ¨çœ‹æ¥ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a> é€æ­¥ä½¿ç”¨çš„æ›´åŠ å¹¿æ³›ã€‚</p>
<p>å…³äº MyBatis åˆ†é¡µæ’ä»¶çš„åŸç†æ·±å…¥ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/plugin-2">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” æ’ä»¶ä½“ç³»ï¼ˆäºŒï¼‰ä¹‹ PageHelperã€‹</a> ã€‚</p>
<h3 id="MyBatis-ä¸-Hibernate-æœ‰å“ªäº›ä¸åŒï¼Ÿ"><a href="#MyBatis-ä¸-Hibernate-æœ‰å“ªäº›ä¸åŒï¼Ÿ" class="headerlink" title="MyBatis ä¸ Hibernate æœ‰å“ªäº›ä¸åŒï¼Ÿ"></a>MyBatis ä¸ Hibernate æœ‰å“ªäº›ä¸åŒï¼Ÿ</h3><p>Mybatis å’Œ Hibernate ä¸åŒï¼Œå®ƒ<strong>ä¸å®Œå…¨æ˜¯</strong>ä¸€ä¸ª ORM æ¡†æ¶ï¼Œå› ä¸ºMyBatis éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™ SQL è¯­å¥ã€‚ä¸è¿‡ MyBatis å¯ä»¥é€šè¿‡ XML æˆ–æ³¨è§£æ–¹å¼çµæ´»é…ç½®è¦è¿è¡Œçš„ SQL è¯­å¥ï¼Œå¹¶å°† Java å¯¹è±¡å’Œ SQL è¯­å¥æ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„ SQL ï¼Œæœ€åå°† SQL æ‰§è¡Œçš„ç»“æœå†æ˜ å°„ç”Ÿæˆ Java å¯¹è±¡ã€‚</p>
<p>Mybatis å­¦ä¹ é—¨æ§›ä½ï¼Œç®€å•æ˜“å­¦ï¼Œç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€ SQL ï¼Œå¯ä¸¥æ ¼æ§åˆ¶ SQL æ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ã€‚ä½†æ˜¯çµæ´»çš„å‰ææ˜¯ MyBatis æ— æ³•åšåˆ°æ•°æ®åº“æ— å…³æ€§ï¼Œå¦‚æœéœ€è¦å®ç°æ”¯æŒå¤šç§æ•°æ®åº“çš„è½¯ä»¶åˆ™éœ€è¦è‡ªå®šä¹‰å¤šå¥— SQL æ˜ å°„æ–‡ä»¶ï¼Œå·¥ä½œé‡å¤§ã€‚</p>
<p>Hibernate å¯¹è±¡/å…³ç³»æ˜ å°„èƒ½åŠ›å¼ºï¼Œæ•°æ®åº“æ— å…³æ€§å¥½ã€‚å¦‚æœç”¨ Hibernate å¼€å‘å¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚ä½†æ˜¯ Hibernate çš„ç¼ºç‚¹æ˜¯å­¦ä¹ é—¨æ§›é«˜ï¼Œè¦ç²¾é€šé—¨æ§›æ›´é«˜ï¼Œè€Œä¸”æ€ä¹ˆè®¾è®¡ O/R æ˜ å°„ï¼Œåœ¨æ€§èƒ½å’Œå¯¹è±¡æ¨¡å‹ä¹‹é—´å¦‚ä½•æƒè¡¡ï¼Œä»¥åŠæ€æ ·ç”¨å¥½ Hibernate éœ€è¦å…·æœ‰å¾ˆå¼ºçš„ç»éªŒå’Œèƒ½åŠ›æ‰è¡Œã€‚</p>
<p>æ€»ä¹‹ï¼ŒæŒ‰ç…§ç”¨æˆ·çš„éœ€æ±‚åœ¨æœ‰é™çš„èµ„æºç¯å¢ƒä¸‹åªè¦èƒ½åšå‡ºç»´æŠ¤æ€§ã€æ‰©å±•æ€§è‰¯å¥½çš„è½¯ä»¶æ¶æ„éƒ½æ˜¯å¥½æ¶æ„ï¼Œæ‰€ä»¥æ¡†æ¶åªæœ‰é€‚åˆæ‰æ˜¯æœ€å¥½ã€‚ç®€å•æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li>Hibernate å±äºå…¨è‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ï¼Œä½¿ç”¨ Hibernate æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–è€…å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œå¯ä»¥æ ¹æ®å¯¹è±¡å…³ç³»æ¨¡å‹ç›´æ¥è·å–ã€‚</li>
<li>Mybatis å±äºåŠè‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ï¼Œåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ SQL æ¥å®Œæˆã€‚</li>
</ul>
<p>å¦å¤–ï¼Œåœ¨ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/96171e647885">ã€Šæµ…æ Mybatis ä¸ Hibernate çš„åŒºåˆ«ä¸ç”¨é€”ã€‹</a> æ–‡ç« ï¼Œä¹Ÿæ˜¯å†™çš„éå¸¸ä¸é”™çš„ã€‚</p>
<p>å½“ç„¶ï¼Œå®é™…ä¸Šï¼ŒMyBatis ä¹Ÿå¯ä»¥æ­é…è‡ªåŠ¨ç”Ÿæˆä»£ç çš„å·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="http://mp.baomidou.com/">MyBatis-Plus</a> æ¡†æ¶ï¼Œå·²ç»å†…ç½®å¸¸ç”¨çš„ SQL æ“ä½œï¼Œä¹Ÿæ˜¯éå¸¸ä¸é”™çš„ã€‚</p>
<h3 id="JDBC-ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ"><a href="#JDBC-ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ" class="headerlink" title="JDBC ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ"></a>JDBC ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ</h3><p>é—®é¢˜ä¸€ï¼šSQL è¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸”ä»£ç ä¼šæ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šå°† SQL è¯­å¥é…ç½®åœ¨ Mapper XML æ–‡ä»¶ä¸­ï¼Œä¸ Java ä»£ç åˆ†ç¦»ã€‚</p>
<hr>
<p>é—®é¢˜äºŒï¼šæ ¹æ®å‚æ•°ä¸åŒï¼Œæ‹¼æ¥ä¸åŒçš„ SQL è¯­å¥éå¸¸éº»çƒ¦ã€‚ä¾‹å¦‚ SQL è¯­å¥çš„ WHERE æ¡ä»¶ä¸ä¸€å®šï¼Œå¯èƒ½å¤šä¹Ÿå¯èƒ½å°‘ï¼Œå ä½ç¬¦éœ€è¦å’Œå‚æ•°ä¸€ä¸€å¯¹åº”ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šMyBatis æä¾› <code>&lt;where /&gt;</code>ã€<code>&lt;if /&gt;</code> ç­‰ç­‰åŠ¨æ€è¯­å¥æ‰€éœ€è¦çš„æ ‡ç­¾ï¼Œå¹¶æ”¯æŒ OGNL è¡¨è¾¾å¼ï¼Œç®€åŒ–äº†åŠ¨æ€ SQL æ‹¼æ¥çš„ä»£ç ï¼Œæå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<hr>
<p>é—®é¢˜ä¸‰ï¼Œå¯¹ç»“æœé›†è§£æéº»çƒ¦ï¼ŒSQL å˜åŒ–å¯èƒ½å¯¼è‡´è§£æä»£ç å˜åŒ–ï¼Œä¸”è§£æå‰éœ€è¦éå†ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šMybatis è‡ªåŠ¨å°† SQL æ‰§è¡Œç»“æœæ˜ å°„æˆ Java å¯¹è±¡ã€‚</p>
<hr>
<p>é—®é¢˜å››ï¼Œæ•°æ®åº“é“¾æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹é€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå¦‚æœä½¿ç”¨æ•°æ®åº“é“¾æ¥æ± å¯è§£å†³æ­¤é—®é¢˜ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šåœ¨ <code>mybatis-config.xml</code> ä¸­ï¼Œé…ç½®æ•°æ®é“¾æ¥æ± ï¼Œä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“é“¾æ¥ã€‚</p>
<p>å½“ç„¶ï¼Œå³ä½¿ä¸ä½¿ç”¨ MyBatis ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚<br>å¦å¤–ï¼ŒMyBatis é»˜è®¤æä¾›äº†æ•°æ®åº“è¿æ¥æ± çš„å®ç°ï¼Œåªæ˜¯è¯´ï¼Œå› ä¸ºå…¶å®ƒå¼€æºçš„æ•°æ®åº“è¿æ¥æ± æ€§èƒ½æ›´å¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨ MyBatis è‡ªå¸¦çš„è¿æ¥æ± å®ç°ã€‚</p>
<h3 id="Mybatis-æ¯”-IBatis-æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ¯”-IBatis-æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ¯” IBatis æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ¯” IBatis æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªé€‰æ‹©æ€§äº†è§£çš„é—®é¢˜ï¼Œå› ä¸ºå¯èƒ½ç°åœ¨å¾ˆå¤šé¢è¯•å®˜ï¼Œéƒ½æ²¡ç”¨è¿‡ IBatis æ¡†æ¶ã€‚</p>
</blockquote>
<ol>
<li>æœ‰æ¥å£ç»‘å®šï¼ŒåŒ…æ‹¬æ³¨è§£ç»‘å®š SQL å’Œ XML ç»‘å®š SQL ã€‚</li>
<li>åŠ¨æ€ SQL ç”±åŸæ¥çš„èŠ‚ç‚¹é…ç½®å˜æˆ OGNL è¡¨è¾¾å¼ã€‚</li>
<li>åœ¨ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„æ—¶å€™ï¼Œå¼•è¿›äº† <code>association</code> ï¼Œåœ¨ä¸€å¯¹å¤šçš„æ—¶å€™ï¼Œå¼•å…¥äº† <code>collection</code>èŠ‚ç‚¹ï¼Œä¸è¿‡éƒ½æ˜¯åœ¨ <code>&lt;resultMap /&gt;</code> é‡Œé¢é…ç½®ã€‚</li>
</ol>
<h3 id="Mybatis-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ-A-æ ‡ç­¾é€šè¿‡-include-å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB-æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨-A-æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ"><a href="#Mybatis-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ-A-æ ‡ç­¾é€šè¿‡-include-å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB-æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨-A-æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ" class="headerlink" title="Mybatis æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ A æ ‡ç­¾é€šè¿‡ include å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨ A æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ"></a>Mybatis æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ A æ ‡ç­¾é€šè¿‡ include å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨ A æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ</h3><blockquote>
<p>è¿™é“é¢˜ç›®ï¼Œå·²ç»å’Œæºç å®ç°ï¼Œæœ‰ç‚¹å…³ç³»äº†ã€‚</p>
</blockquote>
<p>è™½ç„¶ Mybatis è§£æ XML æ˜ å°„æ–‡ä»¶æ˜¯<strong>æŒ‰ç…§é¡ºåº</strong>è§£æçš„ã€‚ä½†æ˜¯ï¼Œè¢«å¼•ç”¨çš„ B æ ‡ç­¾ä¾ç„¶å¯ä»¥å®šä¹‰åœ¨ä»»ä½•åœ°æ–¹ï¼ŒMybatis éƒ½å¯ä»¥æ­£ç¡®è¯†åˆ«ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— éœ€æŒ‰ç…§é¡ºåºï¼Œè¿›è¡Œå®šä¹‰</strong>ã€‚</p>
<p>åŸç†æ˜¯ï¼ŒMybatis è§£æ A æ ‡ç­¾ï¼Œå‘ç° A æ ‡ç­¾å¼•ç”¨äº† B æ ‡ç­¾ï¼Œä½†æ˜¯ B æ ‡ç­¾å°šæœªè§£æåˆ°ï¼Œå°šä¸å­˜åœ¨ï¼Œæ­¤æ—¶ï¼ŒMybatis ä¼šå°† A æ ‡ç­¾æ ‡è®°ä¸º<strong>æœªè§£æçŠ¶æ€</strong>ã€‚ç„¶åï¼Œç»§ç»­è§£æä½™ä¸‹çš„æ ‡ç­¾ï¼ŒåŒ…å« B æ ‡ç­¾ï¼Œå¾…æ‰€æœ‰æ ‡ç­¾è§£æå®Œæ¯•ï¼ŒMybatis ä¼šé‡æ–°è§£æé‚£äº›è¢«æ ‡è®°ä¸ºæœªè§£æçš„æ ‡ç­¾ï¼Œæ­¤æ—¶å†è§£æAæ ‡ç­¾æ—¶ï¼ŒB æ ‡ç­¾å·²ç»å­˜åœ¨ï¼ŒA æ ‡ç­¾ä¹Ÿå°±å¯ä»¥æ­£å¸¸è§£æå®Œæˆäº†ã€‚</p>
<p>å¯èƒ½æœ‰ä¸€äº›ç»•ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/builder-package-1">ã€Šç²¾å°½ MyBatis æºç è§£æ â€”â€” MyBatis åˆå§‹åŒ–ï¼ˆä¸€ï¼‰ä¹‹åŠ è½½ mybatis-configã€‹</a> ã€‚</p>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬åœ¨å¼•ç”³ä¸€ä¸ªé—®é¢˜ï¼ŒSpring IOC ä¸­ï¼Œå­˜åœ¨äº’ç›¸ä¾èµ–çš„ Bean å¯¹è±¡ï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>
<p>åŒæ ·ä½¿ç”¨äº†ç±»ä¼¼çš„æ‰‹æ³•ï¼Œåšè§£ææ ‡è®°ï¼Œç­”æ¡ˆè§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/IoC-get-Bean-createBean-5/">ã€Šã€æ­»ç£• Springã€‘â€”â€” IoC ä¹‹åŠ è½½ Beanï¼šåˆ›å»º Beanï¼ˆäº”ï¼‰ä¹‹å¾ªç¯ä¾èµ–å¤„ç†ã€‹</a> ã€‚</p>
<h3 id="ç®€è¿°-Mybatis-çš„-XML-æ˜ å°„æ–‡ä»¶å’Œ-Mybatis-å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ"><a href="#ç®€è¿°-Mybatis-çš„-XML-æ˜ å°„æ–‡ä»¶å’Œ-Mybatis-å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ" class="headerlink" title="ç®€è¿° Mybatis çš„ XML æ˜ å°„æ–‡ä»¶å’Œ Mybatis å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ"></a>ç®€è¿° Mybatis çš„ XML æ˜ å°„æ–‡ä»¶å’Œ Mybatis å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ</h3><blockquote>
<p>è¿™é“é¢˜ç›®ï¼Œå·²ç»å’Œæºç å®ç°ï¼Œæœ‰ç‚¹å…³ç³»äº†ã€‚</p>
</blockquote>
<p>Mybatis å°†æ‰€æœ‰ XML é…ç½®ä¿¡æ¯éƒ½å°è£…åˆ° All-In-One é‡é‡çº§å¯¹è±¡Configurationå†…éƒ¨ã€‚</p>
<p>åœ¨ XML Mapper æ–‡ä»¶ä¸­ï¼š</p>
<ul>
<li><code>&lt;parameterMap&gt;</code> æ ‡ç­¾ï¼Œä¼šè¢«è§£æä¸º ParameterMap å¯¹è±¡ï¼Œå…¶æ¯ä¸ªå­å…ƒç´ ä¼šè¢«è§£æä¸º ParameterMapping å¯¹è±¡ã€‚</li>
<li><code>&lt;resultMap&gt;</code> æ ‡ç­¾ï¼Œä¼šè¢«è§£æä¸º ResultMap å¯¹è±¡ï¼Œå…¶æ¯ä¸ªå­å…ƒç´ ä¼šè¢«è§£æä¸º ResultMapping å¯¹è±¡ã€‚</li>
<li>æ¯ä¸€ä¸ª <code>&lt;select&gt;</code>ã€<code>&lt;insert&gt;</code>ã€<code>&lt;update&gt;</code>ã€<code>&lt;delete&gt;</code> æ ‡ç­¾ï¼Œå‡ä¼šè¢«è§£æä¸ºä¸€ä¸ª MappedStatement å¯¹è±¡ï¼Œæ ‡ç­¾å†…çš„ SQL ä¼šè¢«è§£æä¸ºä¸€ä¸ª BoundSql å¯¹è±¡ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://fatefrank.github.io/2020/08/06/Spring%20MVC%20%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Seif Zheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seif Zheng's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/Spring%20MVC%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Spring MVC é¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š14:27:33" itemprop="dateCreated datePublished" datetime="2020-08-06T00:00:00+08:00">2020-08-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æ¨èå»æ’¸ä¸€æ’¸ Spring MVC çš„æºç ï¼Œç‰¹åˆ«æ˜¯å¦‚ä¸‹ä¸¤ç¯‡ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/Components-intro/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” ç»„ä»¶ä¸€è§ˆã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/DispatcherServlet-process-request-intro/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” è¯·æ±‚å¤„ç†ä¸€è§ˆã€‹</a></li>
</ul>
<p>è€ƒè™‘åˆ° Spring MVC å’Œ Rest å…³ç³»æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸€å…±åˆ†æˆä¸¤å¤§å—ï¼š</p>
<ul>
<li>Spring MVC</li>
<li>REST</li>
</ul>
<h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h2><h3 id="Spring-MVC-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#Spring-MVC-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="Spring MVC æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>Spring MVC æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>Spring Web MVC æ¡†æ¶æä¾›â€æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨â€( Model-View-Controller )æ¶æ„å’Œéšæ—¶å¯ç”¨çš„ç»„ä»¶ï¼Œç”¨äºå¼€å‘çµæ´»ä¸”æ¾æ•£è€¦åˆçš„ Web åº”ç”¨ç¨‹åºã€‚</p>
<p>MVC æ¨¡å¼æœ‰åŠ©äºåˆ†ç¦»åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ï¼Œå¦‚è¾“å…¥é€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰è¿™äº›å…ƒç´ ä¹‹é—´æä¾›æ¾æ•£è€¦åˆã€‚</p>
<h3 id="ä»‹ç»ä¸‹-Spring-MVC-çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ"><a href="#ä»‹ç»ä¸‹-Spring-MVC-çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ" class="headerlink" title="ä»‹ç»ä¸‹ Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ"></a>ä»‹ç»ä¸‹ Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ</h3><p>Spring MVC ä¸€å…±æœ‰ä¹å¤§æ ¸å¿ƒç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>MultipartResolver</li>
<li>LocaleResolver</li>
<li>ThemeResolver</li>
<li>HandlerMapping</li>
<li>HandlerAdapter</li>
<li>HandlerExceptionResolver</li>
<li>RequestToViewNameTranslator</li>
<li>ViewResolver</li>
<li>FlashMapManager</li>
</ul>
<p>è™½ç„¶å¾ˆå¤šï¼Œä½†æ˜¯åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ï¼Œåœ¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/Interview/#">ã€Œæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿã€</a> é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¼šæ˜ç™½ï¼Œæœ€å…³é”®çš„åªæœ‰ HandlerMapping + HandlerAdapter + HandlerExceptionResolver ã€‚</p>
<p>å…³äºæ¯ä¸ªç»„ä»¶çš„è¯´æ˜ï¼Œç›´æ¥çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/Components-intro/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” ç»„ä»¶ä¸€è§ˆã€‹</a> ã€‚</p>
<h3 id="æè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ"></a>æè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><p><img src="https://blog-pictures.oss-cn-shanghai.aliyuncs.com/15300766829012.jpg" alt="DispatcherServlet çš„å·¥ä½œæµç¨‹"></p>
<p>â‘  <strong>å‘é€è¯·æ±‚</strong></p>
<p>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ï¼Œè¯·æ±‚è¢« Spring MVC çš„è°ƒåº¦æ§åˆ¶å™¨ DispatcherServlet æ•è·ã€‚</p>
<p>â‘¡ <strong>æ˜ å°„å¤„ç†å™¨</strong></p>
<p>DispatcherServlet æ ¹æ®è¯·æ±‚ URL ï¼Œè°ƒç”¨ HandlerMapping è·å¾—è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ <strong>Handler</strong> å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„<strong>æ‹¦æˆªå™¨</strong>ï¼‰ï¼Œæœ€åä»¥ HandlerExecutionChain å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</p>
<ul>
<li>å³ HandlerExecutionChain ä¸­ï¼ŒåŒ…å«å¯¹åº”çš„ <strong>Handler</strong> å¯¹è±¡å’Œ<strong>æ‹¦æˆªå™¨</strong>ä»¬ã€‚</li>
</ul>
<blockquote>
<p>æ­¤å¤„ï¼Œå¯¹åº”çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#x2F;&#x2F; HandlerMapping.java</span><br><span class="line">&gt; </span><br><span class="line">&gt; @Nullable</span><br><span class="line">&gt; HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>â‘¢â‘£ <strong>å¤„ç†å™¨é€‚é… + è°ƒç”¨å¤„ç†å™¨æ–¹æ³•</strong></p>
<p>DispatcherServlet æ ¹æ®è·å¾—çš„ Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapter ã€‚ï¼ˆé™„æ³¨ï¼šå¦‚æœæˆåŠŸè·å¾— HandlerAdapter åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ <code>#preHandler(...)</code> æ–¹æ³•ï¼‰ã€‚</p>
<p>æå–è¯·æ±‚ Request ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å…… Handler å…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandlerï¼ˆController)ã€‚ åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpring å°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p>
<ul>
<li>HttpMessageConverter ï¼šä¼šå°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚ JSONã€XML ç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚ String è½¬æ¢æˆ Integerã€Double ç­‰ã€‚</li>
<li>æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰ã€‚</li>
<li>æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ° BindingResult æˆ– Error ä¸­ã€‚</li>
</ul>
<p>Handler(Controller) æ‰§è¡Œå®Œæˆåï¼Œå‘ DispatcherServlet è¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ã€‚</p>
<blockquote>
<p>æ­¤å¤„ï¼Œå¯¹åº”çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#x2F;&#x2F; HandlerAdapter.java</span><br><span class="line">&gt; </span><br><span class="line">&gt; @Nullable</span><br><span class="line">&gt; ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>â‘¤ <strong>è§£æè§†å›¾</strong></p>
<p>æ ¹æ®è¿”å›çš„ ModelAndView ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ ViewResolverï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­çš„ ViewResolver)ï¼Œè§£æå‡º View å¯¹è±¡ï¼Œç„¶åè¿”å›ç»™ DispatcherServletã€‚</p>
<blockquote>
<p>æ­¤å¤„ï¼Œå¯¹åº”çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#x2F;&#x2F; ViewResolver.java</span><br><span class="line">&gt; </span><br><span class="line">&gt; @Nullable</span><br><span class="line">&gt; View resolveViewName(String viewName, Locale locale) throws Exception;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>â‘¥ â‘¦ <strong>æ¸²æŸ“è§†å›¾</strong> + <strong>å“åº”è¯·æ±‚</strong></p>
<p>ViewResolver ç»“åˆ Model å’Œ Viewï¼Œæ¥æ¸²æŸ“è§†å›¾ï¼Œå¹¶å†™å›ç»™ç”¨æˆ·( æµè§ˆå™¨ )ã€‚</p>
<blockquote>
<p>æ­¤å¤„ï¼Œå¯¹åº”çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#x2F;&#x2F; View.java</span><br><span class="line">&gt; </span><br><span class="line">&gt; void render(@Nullable Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response) throws Exception;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<p>è¿™æ ·ä¸€çœ‹ï¼Œèƒ–å‹å¯èƒ½æœ‰ç‚¹æ‡µé€¼ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èçœ‹çœ‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/Components-intro/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” ç»„ä»¶ä¸€è§ˆã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/DispatcherServlet-process-request-intro/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” è¯·æ±‚å¤„ç†ä¸€è§ˆã€‹</a></li>
</ul>
<p><strong>ä½†æ˜¯ Spring MVC çš„æµç¨‹çœŸçš„ä¸€å®šæ˜¯é…±ç´«ä¹ˆ</strong>ï¼Ÿ</p>
<p>æ—¢ç„¶è¿™ä¹ˆé—®ï¼Œç­”æ¡ˆå½“ç„¶ä¸æ˜¯ã€‚å¯¹äºç›®å‰ä¸»æµçš„æ¶æ„ï¼Œå‰åç«¯å·²ç»è¿›è¡Œåˆ†ç¦»äº†ï¼Œæ‰€ä»¥ Spring MVC åªè´Ÿè´£ <strong>M</strong>odel å’Œ <strong>C</strong>ontroller ä¸¤å—ï¼Œè€Œå°† <strong>V</strong>iew ç§»äº¤ç»™äº†å‰ç«¯ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šå›¾ä¸­çš„æ­¥éª¤ â‘¤ å’Œ â‘¥ ä¸¤æ­¥ï¼Œå·²ç»ä¸åœ¨éœ€è¦ã€‚</p>
<p>é‚£ä¹ˆå˜æˆä»€ä¹ˆæ ·äº†å‘¢ï¼Ÿåœ¨æ­¥éª¤ â‘¢ ä¸­ï¼Œå¦‚æœ Handler(Controller) æ‰§è¡Œå®Œåï¼Œå¦‚æœåˆ¤æ–­æ–¹æ³•æœ‰ <code>@ResponseBody</code> æ³¨è§£ï¼Œåˆ™ç›´æ¥å°†ç»“æœå†™å›ç»™ç”¨æˆ·( æµè§ˆå™¨ )ã€‚</p>
<p>ä½†æ˜¯ HTTP æ˜¯ä¸æ”¯æŒè¿”å› Java POJO å¯¹è±¡çš„ï¼Œæ‰€ä»¥éœ€è¦å°†ç»“æœä½¿ç”¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/HandlerAdapter-5-HttpMessageConverter/">HttpMessageConverter</a> è¿›è¡Œè½¬æ¢åï¼Œæ‰èƒ½è¿”å›ã€‚ä¾‹å¦‚è¯´ï¼Œå¤§å®¶æ‰€ç†Ÿæ‚‰çš„ <a target="_blank" rel="noopener" href="https://github.com/alibaba/fastjson/wiki/%E5%9C%A8-Spring-%E4%B8%AD%E9%9B%86%E6%88%90-Fastjson">FastJsonHttpMessageConverter</a> ï¼Œå°† POJO è½¬æ¢æˆ JSON å­—ç¬¦ä¸²è¿”å›ã€‚</p>
<p>å†æ¥è¡¥å……ä¸¤ä¸ªå›¾ï¼Œè¿™çœŸçš„æ˜¯ Spring MVC éå¸¸å…³é”®çš„é—®é¢˜ï¼Œæ‰€ä»¥è¦ç”¨å¿ƒç†è§£ã€‚</p>
<p>FROM <a target="_blank" rel="noopener" href="https://blog.csdn.net/J080624/article/details/77990164">ã€ŠSpringMVC - è¿è¡Œæµç¨‹å›¾åŠåŸç†åˆ†æã€‹</a></p>
<p><strong>æµç¨‹ç¤ºæ„å›¾</strong>ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2022-02-21/01.png" alt="æµç¨‹ç¤ºæ„å›¾"></p>
<p><strong>ä»£ç åºåˆ—å›¾</strong>ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2022-02-21/02.png" alt="ä»£ç åºåˆ—å›¾"></p>
<p>FROM <a target="_blank" rel="noopener" href="https://item.jd.com/11807414.html">ã€Šçœ‹é€ Spring MVCï¼šæºä»£ç åˆ†æä¸å®è·µã€‹</a> P123</p>
<p><strong>æµç¨‹ç¤ºæ„å›¾</strong>ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2022-02-21/03.png" alt="ã€Šæµç¨‹ç¤ºæ„å›¾ã€‹"></p>
<h3 id="Controller-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#Controller-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@Controller æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@Controller æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><code>@Controller</code> æ³¨è§£ï¼Œå®ƒå°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC <strong>æ§åˆ¶å™¨</strong> Controller ã€‚</p>
<h3 id="RestController-å’Œ-Controller-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#RestController-å’Œ-Controller-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="@RestController å’Œ @Controller æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>@RestController å’Œ @Controller æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><code>@RestController</code> æ³¨è§£ï¼Œåœ¨ <code>@Controller</code> åŸºç¡€ä¸Šï¼Œå¢åŠ äº† <code>@ResponseBody</code> æ³¨è§£ï¼Œæ›´åŠ é€‚åˆç›®å‰å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œæä¾› Restful API ï¼Œè¿”å›ä¾‹å¦‚ JSON æ•°æ®æ ¼å¼ã€‚å½“ç„¶ï¼Œè¿”å›ä»€ä¹ˆæ ·çš„æ•°æ®æ ¼å¼ï¼Œæ ¹æ®å®¢æˆ·ç«¯çš„ <code>&quot;ACCEPT&quot;</code> è¯·æ±‚å¤´æ¥å†³å®šã€‚</p>
<h3 id="RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><code>@RequestMapping</code> æ³¨è§£ï¼Œç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»/æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š</p>
<ul>
<li>ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URLã€‚</li>
<li>æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•ã€‚</li>
</ul>
<h3 id="RequestMapping-å’Œ-GetMapping-æ³¨è§£çš„ä¸åŒä¹‹å¤„åœ¨å“ªé‡Œï¼Ÿ"><a href="#RequestMapping-å’Œ-GetMapping-æ³¨è§£çš„ä¸åŒä¹‹å¤„åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="@RequestMapping å’Œ @GetMapping æ³¨è§£çš„ä¸åŒä¹‹å¤„åœ¨å“ªé‡Œï¼Ÿ"></a>@RequestMapping å’Œ @GetMapping æ³¨è§£çš„ä¸åŒä¹‹å¤„åœ¨å“ªé‡Œï¼Ÿ</h3><ul>
<li><code>@RequestMapping</code> å¯æ³¨è§£åœ¨ç±»å’Œæ–¹æ³•ä¸Šï¼›<code>@GetMapping</code> ä»…å¯æ³¨å†Œåœ¨æ–¹æ³•ä¸Šã€‚</li>
<li><code>@RequestMapping</code> å¯è¿›è¡Œ GETã€POSTã€PUTã€DELETE ç­‰è¯·æ±‚æ–¹æ³•ï¼›<code>@GetMapping</code> æ˜¯ <code>@RequestMapping</code> çš„ GET è¯·æ±‚æ–¹æ³•çš„ç‰¹ä¾‹ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜æ¸…æ™°åº¦ã€‚</li>
</ul>
<h3 id="è¿”å›-JSON-æ ¼å¼ä½¿ç”¨ä»€ä¹ˆæ³¨è§£ï¼Ÿ"><a href="#è¿”å›-JSON-æ ¼å¼ä½¿ç”¨ä»€ä¹ˆæ³¨è§£ï¼Ÿ" class="headerlink" title="è¿”å› JSON æ ¼å¼ä½¿ç”¨ä»€ä¹ˆæ³¨è§£ï¼Ÿ"></a>è¿”å› JSON æ ¼å¼ä½¿ç”¨ä»€ä¹ˆæ³¨è§£ï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ <strong><code>@ResponseBody</code></strong> æ³¨è§£ï¼Œæˆ–è€…ä½¿ç”¨åŒ…å« <code>@ResponseBody</code> æ³¨è§£çš„ <strong><code>@RestController</code></strong> æ³¨è§£ã€‚</p>
<p>å½“ç„¶ï¼Œè¿˜æ˜¯éœ€è¦é…åˆç›¸åº”çš„æ”¯æŒ JSON æ ¼å¼åŒ–çš„ HttpMessageConverter å®ç°ç±»ã€‚ä¾‹å¦‚ï¼ŒSpring MVC é»˜è®¤ä½¿ç”¨ MappingJackson2HttpMessageConverter ã€‚</p>
<h3 id="ä»‹ç»ä¸€ä¸‹-WebApplicationContext-ï¼Ÿ"><a href="#ä»‹ç»ä¸€ä¸‹-WebApplicationContext-ï¼Ÿ" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ WebApplicationContext ï¼Ÿ"></a>ä»‹ç»ä¸€ä¸‹ WebApplicationContext ï¼Ÿ</h3><p>WebApplicationContext æ˜¯å®ç°ApplicationContextæ¥å£çš„å­ç±»ï¼Œä¸“é—¨ä¸º WEB åº”ç”¨å‡†å¤‡çš„ã€‚</p>
<ul>
<li>å®ƒå…è®¸ä»ç›¸å¯¹äº Web æ ¹ç›®å½•çš„è·¯å¾„ä¸­<strong>åŠ è½½é…ç½®æ–‡ä»¶</strong>ï¼Œ<strong>å®Œæˆåˆå§‹åŒ– Spring MVC ç»„ä»¶çš„å·¥ä½œ</strong>ã€‚</li>
<li>ä» WebApplicationContext ä¸­ï¼Œå¯ä»¥è·å– ServletContext å¼•ç”¨ï¼Œæ•´ä¸ª Web åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å°†ä½œä¸ºå±æ€§æ”¾ç½®åœ¨ ServletContext ä¸­ï¼Œä»¥ä¾¿ Web åº”ç”¨ç¯å¢ƒå¯ä»¥è®¿é—® Spring ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p>å…³äºè¿™ä¸€å—ï¼Œå¦‚æœæƒ³è¦è¯¦ç»†äº†è§£ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” å®¹å™¨çš„åˆå§‹åŒ–ï¼ˆä¸€ï¼‰ä¹‹ Root WebApplicationContext å®¹å™¨ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” å®¹å™¨çš„åˆå§‹åŒ–ï¼ˆäºŒï¼‰ä¹‹ Servlet WebApplicationContext å®¹å™¨ã€‹</a></li>
</ul>
<h3 id="Spring-MVC-çš„å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#Spring-MVC-çš„å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="Spring MVC çš„å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>Spring MVC çš„å¼‚å¸¸å¤„ç†ï¼Ÿ</h3><p>Spring MVC æä¾›äº†å¼‚å¸¸è§£æå™¨ HandlerExceptionResolver æ¥å£ï¼Œå°†å¤„ç†å™¨( <code>handler</code> )æ‰§è¡Œæ—¶å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè§£æ( è½¬æ¢ )æˆå¯¹åº”çš„ ModelAndView ç»“æœã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HandlerExceptionResolver.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æå¼‚å¸¸ï¼Œè½¬æ¢æˆå¯¹åº”çš„ ModelAndView ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function">ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  HttpServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  <span class="meta">@Nullable</span> Object handler, Exception ex)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå¼‚å¸¸è¢«è§£ææˆåŠŸï¼Œåˆ™ä¼šè¿”å› ModelAndView å¯¹è±¡ã€‚</li>
<li>è¯¦ç»†çš„æºç è§£æï¼Œè§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/HandlerExceptionResolver/">ã€Šç²¾å°½ Spring MVC æºç è§£æ â€”â€” HandlerExceptionResolver ç»„ä»¶ã€‹</a> ã€‚</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@ExceptionHandler</code> æ³¨è§£æ¥å®ç°è¿‡å¼‚å¸¸çš„å¤„ç†ï¼Œå¯ä»¥å…ˆçœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/12e1a752974d">ã€ŠSpring å¼‚å¸¸å¤„ç† ExceptionHandler çš„ä½¿ç”¨ã€‹</a> ã€‚</p>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‰¿è‰¿å–œæ¬¢ä½¿ç”¨<strong>ç¬¬ä¸‰ç§</strong>ã€‚</li>
</ul>
<h3 id="Spring-MVC-æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"><a href="#Spring-MVC-æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="Spring MVC æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"></a>Spring MVC æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h3><ol>
<li>ä½¿ç”¨çœŸçš„çœŸçš„çœŸçš„éå¸¸<strong>æ–¹ä¾¿</strong>ï¼Œæ— è®ºæ˜¯æ·»åŠ  HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„çš„æ–¹æ³•ï¼Œè¿˜æ˜¯ä¸åŒæ•°æ®æ ¼å¼çš„å“åº”ã€‚</li>
<li>æä¾›<strong>æ‹¦æˆªå™¨æœºåˆ¶</strong>ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå¤„ç†ã€‚</li>
<li>æä¾›<strong>å¼‚å¸¸æœºåˆ¶</strong>ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹å¼‚å¸¸åšç»Ÿä¸€å¤„ç†ã€‚</li>
<li>å¯ä»¥ä»»æ„ä½¿ç”¨å„ç§<strong>è§†å›¾</strong>æŠ€æœ¯ï¼Œè€Œä¸ä»…ä»…å±€é™äº JSP ï¼Œä¾‹å¦‚ Freemarkerã€Thymeleaf ç­‰ç­‰ã€‚</li>
<li>ä¸ä¾èµ–äº Servlet API (ç›®æ ‡è™½æ˜¯å¦‚æ­¤ï¼Œä½†æ˜¯åœ¨å®ç°çš„æ—¶å€™ç¡®å®æ˜¯ä¾èµ–äº Servlet çš„ï¼Œå½“ç„¶ä»…ä»…ä¾èµ– Servlet ï¼Œè€Œä¸ä¾èµ– Filterã€Listener )ã€‚</li>
</ol>
<h3 id="Spring-MVC-æ€æ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘-ï¼Ÿ"><a href="#Spring-MVC-æ€æ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘-ï¼Ÿ" class="headerlink" title="Spring MVC æ€æ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘ ï¼Ÿ"></a>Spring MVC æ€æ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘ ï¼Ÿ</h3><ul>
<li>ç»“æœè½¬å‘ï¼šåœ¨è¿”å›å€¼çš„å‰é¢åŠ  <code>&quot;forward:/&quot;</code> ã€‚</li>
<li>é‡å®šå‘ï¼šåœ¨è¿”å›å€¼çš„å‰é¢åŠ ä¸Š <code>&quot;redirect:/&quot;</code> ã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œç›®å‰å‰åç«¯åˆ†ç¦»ä¹‹åï¼Œæˆ‘ä»¬ä½œä¸ºåç«¯å¼€å‘ï¼Œå·²ç»å¾ˆå°‘æœ‰æœºä¼šç”¨ä¸Šè¿™ä¸ªåŠŸèƒ½äº†ã€‚</p>
<h3 id="Spring-MVC-çš„-Controller-æ˜¯ä¸æ˜¯å•ä¾‹ï¼Ÿ"><a href="#Spring-MVC-çš„-Controller-æ˜¯ä¸æ˜¯å•ä¾‹ï¼Ÿ" class="headerlink" title="Spring MVC çš„ Controller æ˜¯ä¸æ˜¯å•ä¾‹ï¼Ÿ"></a>Spring MVC çš„ Controller æ˜¯ä¸æ˜¯å•ä¾‹ï¼Ÿ</h3><p>ç»ç»ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒController æ˜¯<strong>å•ä¾‹</strong>ã€‚</p>
<p>é‚£ä¹ˆï¼ŒController é‡Œä¸€èˆ¬ä¸å»ºè®®å­˜åœ¨<strong>å…±äº«çš„å˜é‡</strong>ã€‚å®é™…åœºæ™¯ä¸‹ï¼Œè‰¿è‰¿ä¹Ÿæ²¡ç¢°åˆ°éœ€è¦ä½¿ç”¨å…±äº«å˜é‡çš„æƒ…å†µã€‚</p>
<h3 id="Spring-MVC-å’Œ-Struts2-çš„å¼‚åŒï¼Ÿ"><a href="#Spring-MVC-å’Œ-Struts2-çš„å¼‚åŒï¼Ÿ" class="headerlink" title="Spring MVC å’Œ Struts2 çš„å¼‚åŒï¼Ÿ"></a>Spring MVC å’Œ Struts2 çš„å¼‚åŒï¼Ÿ</h3><ol>
<li><p>å…¥å£</p>
<p>ä¸åŒ</p>
<ul>
<li>Spring MVC çš„å…¥é—¨æ˜¯ä¸€ä¸ª Servlet <strong>æ§åˆ¶å™¨</strong>ã€‚</li>
<li>Struts2 å…¥é—¨æ˜¯ä¸€ä¸ª Filter <strong>è¿‡æ»¤å™¨</strong>ã€‚</li>
</ul>
</li>
<li><p>é…ç½®æ˜ å°„</p>
<p>ä¸åŒï¼Œ</p>
<ul>
<li>Spring MVC æ˜¯åŸºäº<strong>æ–¹æ³•</strong>å¼€å‘ï¼Œä¼ é€’å‚æ•°æ˜¯é€šè¿‡<strong>æ–¹æ³•å½¢å‚</strong>ï¼Œä¸€èˆ¬è®¾ç½®ä¸º<strong>å•ä¾‹</strong>ã€‚</li>
<li>Struts2 æ˜¯åŸºäº<strong>ç±»</strong>å¼€å‘ï¼Œä¼ é€’å‚æ•°æ˜¯é€šè¿‡<strong>ç±»çš„å±æ€§</strong>ï¼Œåªèƒ½è®¾è®¡ä¸º<strong>å¤šä¾‹</strong>ã€‚</li>
</ul>
</li>
</ol>
<ul>
<li><p>è§†å›¾</p>
<p>ä¸åŒ</p>
<ul>
<li>Spring MVC é€šè¿‡å‚æ•°è§£æå™¨æ˜¯å°† Request å¯¹è±¡å†…å®¹è¿›è¡Œè§£ææˆæ–¹æ³•å½¢å‚ï¼Œå°†å“åº”æ•°æ®å’Œé¡µé¢å°è£…æˆ <strong>ModelAndView</strong> å¯¹è±¡ï¼Œæœ€ååˆå°†æ¨¡å‹æ•°æ®é€šè¿‡ <strong>Request</strong> å¯¹è±¡ä¼ è¾“åˆ°é¡µé¢ã€‚å…¶ä¸­ï¼Œå¦‚æœè§†å›¾ä½¿ç”¨ JSP æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ <strong>JSTL</strong> ã€‚</li>
<li>Struts2 é‡‡ç”¨<strong>å€¼æ ˆ</strong>å­˜å‚¨è¯·æ±‚å’Œå“åº”çš„æ•°æ®ï¼Œé€šè¿‡ <strong>OGNL</strong> å­˜å–æ•°æ®ã€‚</li>
</ul>
</li>
</ul>
<p>å½“ç„¶ï¼Œæ›´è¯¦ç»†çš„ä¹Ÿå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://www.voidcn.com/article/p-ylualwcj-c.html">ã€Šé¢è¯•é¢˜ï¼šSpring MVC å’Œ Struts2 çš„åŒºåˆ«ã€‹</a> ä¸€æ–‡ã€‚</p>
<h3 id="è¯¦ç»†ä»‹ç»ä¸‹-Spring-MVC-æ‹¦æˆªå™¨ï¼Ÿ"><a href="#è¯¦ç»†ä»‹ç»ä¸‹-Spring-MVC-æ‹¦æˆªå™¨ï¼Ÿ" class="headerlink" title="è¯¦ç»†ä»‹ç»ä¸‹ Spring MVC æ‹¦æˆªå™¨ï¼Ÿ"></a>è¯¦ç»†ä»‹ç»ä¸‹ Spring MVC æ‹¦æˆªå™¨ï¼Ÿ</h3><p><code>org.springframework.web.servlet.HandlerInterceptor</code> ï¼Œæ‹¦æˆªå™¨æ¥å£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HandlerInterceptor.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡Œä¹‹å‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">                          HttpServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">                          Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡ŒæˆåŠŸä¹‹å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">                        HttpServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">                        Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">                        <span class="meta">@Nullable</span> ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡Œå®Œä¹‹åï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å¹¶ä¸”ï¼Œåªæœ‰è¯¥å¤„ç†å™¨ &#123;<span class="doctag">@link</span> #preHandle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ‰ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">                             HttpServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">                             Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">                             <span class="meta">@Nullable</span> Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸€å…±æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºï¼š<ul>
<li><code>#preHandle(...)</code> æ–¹æ³•ï¼Œè°ƒç”¨ Controller æ–¹æ³•ä¹‹<strong>å‰</strong>æ‰§è¡Œã€‚</li>
<li><code>#postHandle(...)</code> æ–¹æ³•ï¼Œè°ƒç”¨ Controller æ–¹æ³•ä¹‹<strong>å</strong>æ‰§è¡Œã€‚</li>
<li><code>#afterCompletion(...)</code>æ–¹æ³•ï¼Œå¤„ç†å®Œ Controller æ–¹æ³•è¿”å›ç»“æœä¹‹åæ‰§è¡Œã€‚<ul>
<li>ä¾‹å¦‚ï¼Œé¡µé¢æ¸²æŸ“åã€‚</li>
<li><strong>å½“ç„¶ï¼Œè¦æ³¨æ„ï¼Œæ— è®ºè°ƒç”¨ Controller æ–¹æ³•æ˜¯å¦æˆåŠŸï¼Œéƒ½ä¼šæ‰§è¡Œ</strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ä¸¾ä¸ªä¾‹å­ï¼š<ul>
<li>å½“ä¿©ä¸ªæ‹¦æˆªå™¨éƒ½å®ç°æ”¾è¡Œæ“ä½œæ—¶ï¼Œæ‰§è¡Œé¡ºåºä¸º <code>preHandle[1] =&gt; preHandle[2] =&gt; postHandle[2] =&gt; postHandle[1] =&gt; afterCompletion[2] =&gt; afterCompletion[1]</code> ã€‚</li>
<li>å½“ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨ <code>#preHandle(...)</code> æ–¹æ³•è¿”å› <code>false</code> ï¼Œä¹Ÿå°±æ˜¯å¯¹å…¶è¿›è¡Œæ‹¦æˆªæ—¶ï¼Œç¬¬äºŒä¸ªæ‹¦æˆªå™¨æ˜¯å®Œå…¨ä¸æ‰§è¡Œçš„ï¼Œç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨åªæ‰§è¡Œ <code>#preHandle(...)</code> éƒ¨åˆ†ã€‚</li>
<li>å½“ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨ <code>#preHandle(...)</code> æ–¹æ³•è¿”å› <code>true</code> ï¼Œç¬¬äºŒä¸ªæ‹¦æˆªå™¨ <code>#preHandle(...)</code> è¿”å› <code>false</code> ï¼Œæ‰§è¡Œé¡ºåºä¸º <code>preHandle[1] =&gt; preHandle[2] =&gt; afterCompletion[1]</code> ã€‚</li>
</ul>
</li>
<li>æ€»ç»“æ¥è¯´ï¼š<ul>
<li><code>#preHandle(...)</code> æ–¹æ³•ï¼ŒæŒ‰æ‹¦æˆªå™¨å®šä¹‰<strong>é¡ºåº</strong>è°ƒç”¨ã€‚è‹¥ä»»ä¸€æ‹¦æˆªå™¨è¿”å› <code>false</code> ï¼Œåˆ™ Controller æ–¹æ³•ä¸å†è°ƒç”¨ã€‚</li>
<li><code>#postHandle(...)</code> å’Œ <code>#afterCompletion(...)</code> æ–¹æ³•ï¼ŒæŒ‰æ‹¦æˆªå™¨å®šä¹‰<strong>é€†åº</strong>è°ƒç”¨ã€‚</li>
<li><code>#postHandler(...)</code> æ–¹æ³•ï¼Œåœ¨è°ƒç”¨ Controller æ–¹æ³•ä¹‹<strong>å</strong>æ‰§è¡Œã€‚</li>
<li><code>#afterCompletion(...)</code> æ–¹æ³•ï¼Œåªæœ‰è¯¥æ‹¦æˆªå™¨åœ¨ <code>#preHandle(...)</code> æ–¹æ³•è¿”å› <code>true</code> æ—¶ï¼Œæ‰èƒ½å¤Ÿè¢«è°ƒç”¨ï¼Œä¸”ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚ä¸ºä»€ä¹ˆâ€œä¸”ä¸€å®šä¼šè¢«è°ƒç”¨â€å‘¢ï¼Ÿå³ä½¿ <code>#afterCompletion(...)</code> æ–¹æ³•ï¼ŒæŒ‰æ‹¦æˆªå™¨å®šä¹‰<strong>é€†åº</strong>è°ƒç”¨æ—¶ï¼Œå‰é¢çš„æ‹¦æˆªå™¨å‘ç”Ÿå¼‚å¸¸ï¼Œåé¢çš„æ‹¦æˆªå™¨è¿˜èƒ½å¤Ÿè°ƒç”¨ï¼Œ<strong>å³æ— è§†å¼‚å¸¸</strong>ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>å…³äºè¿™å—ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/amaxiaochen/article/details/77210880">ã€ŠSpring MVC å¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œé¡ºåºåŠæ‹¦æˆªå™¨ä½¿ç”¨æ–¹æ³•ã€‹</a> æ–‡ç« ï¼Œé€šè¿‡<strong>å®è·µ</strong>æ›´åŠ ç†è§£ã€‚</li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-MVC/HandlerMapping-2-HandlerInterceptor/">ã€Šç²¾å°½ Spring MVC æºç åˆ†æ â€”â€” HandlerMapping ç»„ä»¶ï¼ˆäºŒï¼‰ä¹‹ HandlerInterceptorã€‹</a> æ–‡ç« ï¼Œé€šè¿‡<strong>æºç </strong>æ›´åŠ ç†è§£ã€‚</li>
</ul>
<h3 id="Spring-MVC-çš„æ‹¦æˆªå™¨å¯ä»¥åšå“ªäº›äº‹æƒ…ï¼Ÿ"><a href="#Spring-MVC-çš„æ‹¦æˆªå™¨å¯ä»¥åšå“ªäº›äº‹æƒ…ï¼Ÿ" class="headerlink" title="Spring MVC çš„æ‹¦æˆªå™¨å¯ä»¥åšå“ªäº›äº‹æƒ…ï¼Ÿ"></a>Spring MVC çš„æ‹¦æˆªå™¨å¯ä»¥åšå“ªäº›äº‹æƒ…ï¼Ÿ</h3><p>æ‹¦æˆªå™¨èƒ½åšçš„äº‹æƒ…éå¸¸éå¸¸éå¸¸å¤šï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è®°å½•è®¿é—®æ—¥å¿—ã€‚</li>
<li>è®°å½•å¼‚å¸¸æ—¥å¿—ã€‚</li>
<li>éœ€è¦ç™»é™†çš„è¯·æ±‚æ“ä½œï¼Œæ‹¦æˆªæœªç™»é™†çš„ç”¨æˆ·ã€‚</li>
<li>â€¦</li>
</ul>
<h3 id="Spring-MVC-çš„æ‹¦æˆªå™¨å’Œ-Filter-è¿‡æ»¤å™¨æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ"><a href="#Spring-MVC-çš„æ‹¦æˆªå™¨å’Œ-Filter-è¿‡æ»¤å™¨æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ" class="headerlink" title="Spring MVC çš„æ‹¦æˆªå™¨å’Œ Filter è¿‡æ»¤å™¨æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ"></a>Spring MVC çš„æ‹¦æˆªå™¨å’Œ Filter è¿‡æ»¤å™¨æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ</h3><p>çœ‹äº†æ–‡ç«  <a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaodanjava/article/details/32125687">ã€Šè¿‡æ»¤å™¨( Filter )å’Œæ‹¦æˆªå™¨( Interceptor )çš„åŒºåˆ«ã€‹</a> ï¼Œæ„Ÿè§‰å¯¹æ¯”çš„æ€ªæ€ªçš„ã€‚è‰¿è‰¿è§‰å¾—ä¸»è¦å‡ ä¸ªç‚¹å§ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½ç›¸åŒ</strong>ï¼šæ‹¦æˆªå™¨å’Œ Filteréƒ½èƒ½å®ç°ç›¸åº”çš„åŠŸèƒ½ï¼Œè°ä¹Ÿä¸æ¯”è°å¼ºã€‚</li>
<li><strong>å®¹å™¨ä¸åŒ</strong>ï¼šæ‹¦æˆªå™¨æ„å»ºåœ¨ Spring MVC ä½“ç³»ä¸­ï¼›Filter æ„å»ºåœ¨ Servlet å®¹å™¨ä¹‹ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨ä¾¿åˆ©æ€§ä¸åŒ</strong>ï¼šæ‹¦æˆªå™¨æä¾›äº†ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä¸åŒçš„æ—¶æœºæ‰§è¡Œï¼›è¿‡æ»¤å™¨ä»…æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œå½“ç„¶ä¹Ÿèƒ½å®ç°æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºçš„æ•ˆæœï¼Œå°±æ˜¯éº»çƒ¦ä¸€äº›ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œå†è¡¥å……ä¸€ç‚¹å°çŸ¥è¯†ã€‚æˆ‘ä»¬ä¼šå‘ç°ï¼Œæ‹“å±•æ€§å¥½çš„æ¡†æ¶ï¼Œéƒ½ä¼šæä¾›ç›¸åº”çš„æ‹¦æˆªå™¨æˆ–è¿‡æ»¤å™¨æœºåˆ¶ï¼Œæ–¹ä¾¿çš„æˆ‘ä»¬åšä¸€äº›æ‹“å±•ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>Dubbo çš„ Filter æœºåˆ¶ã€‚</li>
<li>Spring Cloud Gateway çš„ Filter æœºåˆ¶ã€‚</li>
<li>Struts2 çš„æ‹¦æˆªå™¨æœºåˆ¶ã€‚</li>
</ul>
<h2 id="REST"><a href="#REST" class="headerlink" title="REST"></a>REST</h2><h3 id="REST-ä»£è¡¨ç€ä»€ä¹ˆ"><a href="#REST-ä»£è¡¨ç€ä»€ä¹ˆ" class="headerlink" title="REST ä»£è¡¨ç€ä»€ä¹ˆ?"></a>REST ä»£è¡¨ç€ä»€ä¹ˆ?</h3><p>REST ä»£è¡¨ç€æŠ½è±¡çŠ¶æ€è½¬ç§»ï¼Œå®ƒæ˜¯æ ¹æ® HTTP åè®®ä»å®¢æˆ·ç«¯å‘é€æ•°æ®åˆ°æœåŠ¡ç«¯ï¼Œä¾‹å¦‚ï¼šæœåŠ¡ç«¯çš„ä¸€æœ¬ä¹¦å¯ä»¥ä»¥ XML æˆ– JSON æ ¼å¼ä¼ é€’åˆ°å®¢æˆ·ç«¯ã€‚</p>
<p>ç„¶è€Œï¼Œå‡å¦‚ä½ ä¸ç†Ÿæ‚‰RESTï¼Œæˆ‘å»ºè®®ä½ å…ˆçœ‹çœ‹ <a target="_blank" rel="noopener" href="http://bit.ly/2zIGzWK">REST API design and development</a> è¿™ç¯‡æ–‡ç« æ¥æ›´å¥½çš„äº†è§£å®ƒã€‚ä¸è¿‡å¯¹äºå¤§å¤šæ•°èƒ–å‹çš„è‹±è¯­ï¼Œå¯èƒ½ä¸å¤ªå¥½ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é˜…è¯»çŸ¥ä¹ä¸Šçš„ <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28557115">ã€Šæ€æ ·ç”¨é€šä¿—çš„è¯­è¨€è§£é‡Š RESTï¼Œä»¥åŠ RESTfulï¼Ÿã€‹</a> è®¨è®ºã€‚</p>
<h3 id="èµ„æºæ˜¯ä»€ä¹ˆ"><a href="#èµ„æºæ˜¯ä»€ä¹ˆ" class="headerlink" title="èµ„æºæ˜¯ä»€ä¹ˆ?"></a>èµ„æºæ˜¯ä»€ä¹ˆ?</h3><p>èµ„æºæ˜¯æŒ‡æ•°æ®åœ¨ REST æ¶æ„ä¸­å¦‚ä½•æ˜¾ç¤ºçš„ã€‚å°†å®ä½“ä½œä¸ºèµ„æºå…¬å¼€ ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯é€šè¿‡ HTTP æ–¹æ³•å¦‚ï¼š<a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2012/03/get-post-method-in-http-and-https.html">GET</a>, <a target="_blank" rel="noopener" href="http://www.java67.com/2014/08/difference-between-post-and-get-request.html">POST</a>,<a target="_blank" rel="noopener" href="http://www.java67.com/2016/09/when-to-use-put-or-post-in-restful-web-services.html">PUT</a>, DELETE ç­‰è¯»ï¼Œå†™ï¼Œä¿®æ”¹å’Œåˆ›å»ºèµ„æºã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯å®‰å…¨çš„-REST-æ“ä½œ"><a href="#ä»€ä¹ˆæ˜¯å®‰å…¨çš„-REST-æ“ä½œ" class="headerlink" title="ä»€ä¹ˆæ˜¯å®‰å…¨çš„ REST æ“ä½œ?"></a>ä»€ä¹ˆæ˜¯å®‰å…¨çš„ REST æ“ä½œ?</h3><p>REST æ¥å£æ˜¯é€šè¿‡ HTTP æ–¹æ³•å®Œæˆæ“ä½œã€‚</p>
<ul>
<li>ä¸€äº›HTTPæ“ä½œæ˜¯å®‰å…¨çš„ï¼Œå¦‚ GET å’Œ HEAD ï¼Œå®ƒä¸èƒ½åœ¨æœåŠ¡ç«¯ä¿®æ”¹èµ„æº</li>
<li>æ¢å¥è¯è¯´ï¼ŒPUT,POST å’Œ DELETE æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºä»–ä»¬èƒ½ä¿®æ”¹æœåŠ¡ç«¯çš„èµ„æºã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ˜¯å¦å®‰å…¨çš„ç•Œé™ï¼Œåœ¨äº<strong>æ˜¯å¦ä¿®æ”¹</strong>æœåŠ¡ç«¯çš„èµ„æºã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œ-ä¸ºä»€ä¹ˆå¹‚ç­‰æ“ä½œå¦‚æ­¤é‡è¦"><a href="#ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œ-ä¸ºä»€ä¹ˆå¹‚ç­‰æ“ä½œå¦‚æ­¤é‡è¦" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œ? ä¸ºä»€ä¹ˆå¹‚ç­‰æ“ä½œå¦‚æ­¤é‡è¦?"></a>ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œ? ä¸ºä»€ä¹ˆå¹‚ç­‰æ“ä½œå¦‚æ­¤é‡è¦?</h3><p>æœ‰ä¸€äº›HTTPæ–¹æ³•ï¼Œå¦‚ï¼šGETï¼Œä¸ç®¡ä½ ä½¿ç”¨å¤šå°‘æ¬¡å®ƒéƒ½èƒ½äº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œåœ¨æ²¡æœ‰ä»»ä½•ä¸€è¾¹å½±å“çš„æƒ…å†µä¸‹ï¼Œå‘é€å¤šä¸ª GET è¯·æ±‚åˆ°ç›¸åŒçš„<a target="_blank" rel="noopener" href="http://www.java67.com/2013/01/difference-between-url-uri-and-urn.html">URI</a> å°†ä¼šäº§ç”Ÿç›¸åŒçš„å“åº”ç»“æœã€‚å› æ­¤ï¼Œè¿™å°±æ˜¯æ‰€è°“<strong>å¹‚ç­‰</strong>æ“ä½œã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2016/05/what-are-idempotent-and-safe-methods-of-HTTP-and-REST.html">POSTæ–¹æ³•ä¸æ˜¯å¹‚ç­‰æ“ä½œ</a> ï¼Œå› ä¸ºå¦‚æœå‘é€å¤šä¸ª POST è¯·æ±‚ï¼Œå®ƒå°†åœ¨æœåŠ¡ç«¯åˆ›å»ºä¸åŒçš„èµ„æºã€‚ä½†æ˜¯ï¼Œå‡å¦‚ä½ ç”¨PUTæ›´æ–°èµ„æºï¼Œå®ƒå°†æ˜¯å¹‚ç­‰æ“ä½œã€‚</p>
<p>ç”šè‡³å¤šä¸ª PUT è¯·æ±‚è¢«ç”¨æ¥æ›´æ–°æœåŠ¡ç«¯èµ„æºï¼Œå°†å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚ä½ å¯ä»¥é€šè¿‡ Pluralsight å­¦ä¹  <a target="_blank" rel="noopener" href="http://pluralsight.pxf.io/c/1193463/424552/7490?u=https://www.pluralsight.com/courses/xhttp-fund">HTTP Fundamentals</a> è¯¾ç¨‹æ¥äº†è§£ HTTP åè®®å’Œä¸€èˆ¬çš„ HTTP çš„æ›´å¤šå¹‚ç­‰æ“ä½œã€‚</p>
<h3 id="REST-æ˜¯å¯æ‰©å±•çš„æˆ–è¯´æ˜¯ååŒçš„å—"><a href="#REST-æ˜¯å¯æ‰©å±•çš„æˆ–è¯´æ˜¯ååŒçš„å—" class="headerlink" title="REST æ˜¯å¯æ‰©å±•çš„æˆ–è¯´æ˜¯ååŒçš„å—?"></a>REST æ˜¯å¯æ‰©å±•çš„æˆ–è¯´æ˜¯ååŒçš„å—?</h3><p>æ˜¯çš„ï¼Œ<a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2015/08/difference-between-soap-and-restfull-webservice-java.html">REST</a> æ˜¯å¯æ‰©å±•çš„å’Œå¯åä½œçš„ã€‚å®ƒæ—¢ä¸æ‰˜ç®¡ä¸€ç§ç‰¹å®šçš„æŠ€æœ¯é€‰æ‹©ï¼Œä¹Ÿä¸å®šåœ¨å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯ã€‚ä½ å¯ä»¥ç”¨ <a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2017/11/top-5-free-java-courses-for-beginners.html">Java</a>, <a target="_blank" rel="noopener" href="http://www.java67.com/2018/02/5-free-cpp-courses-to-learn-programming.html">C++</a>, <a target="_blank" rel="noopener" href="http://www.java67.com/2018/02/5-free-python-online-courses-for-beginners.html">Python</a>, æˆ– <a target="_blank" rel="noopener" href="http://www.java67.com/2018/04/top-5-free-javascript-courses-to-learn.html">JavaScript</a> æ¥åˆ›å»º RESTful Web æœåŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>æˆ‘å»ºè®®ä½ è¯»ä¸€æœ¬å…³äºRESTæ¥å£çš„ä¹¦æ¥äº†è§£æ›´å¤šï¼Œå¦‚ï¼š<a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2017/02/top-5-books-to-learn-rest-and-restful-web-services-in-java.html">RESTful Web Services</a> ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šæ‰€ä»¥è¿™é‡Œçš„â€œå¯æ‹“å±•â€ã€â€œååŒâ€å¯¹åº”åˆ°æˆ‘ä»¬å¹³æ—¶å¸¸è¯´çš„ï¼Œâ€œè·¨è¯­è¨€â€ã€â€œè¯­è¨€æ— å…³â€ã€‚</p>
</blockquote>
<h3 id="REST-ç”¨å“ªç§-HTTP-æ–¹æ³•å‘¢"><a href="#REST-ç”¨å“ªç§-HTTP-æ–¹æ³•å‘¢" class="headerlink" title="REST ç”¨å“ªç§ HTTP æ–¹æ³•å‘¢?"></a>REST ç”¨å“ªç§ HTTP æ–¹æ³•å‘¢?</h3><p>REST èƒ½ç”¨ä»»ä½•çš„ HTTP æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œæœ€å—æ¬¢è¿çš„æ˜¯ï¼š</p>
<ul>
<li>ç”¨ GET æ¥æ£€ç´¢æœåŠ¡ç«¯èµ„æº</li>
<li>ç”¨ POST æ¥åˆ›å»ºæœåŠ¡ç«¯èµ„æº</li>
<li><a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2016/04/what-is-purpose-of-http-request-types-in-RESTful-web-service.html#axzz56WGunSwy">ç”¨ PUT æ¥æ›´æ–°æœåŠ¡ç«¯èµ„æº</a></li>
<li>ç”¨ DELETE æ¥åˆ é™¤æœåŠ¡ç«¯èµ„æºã€‚</li>
</ul>
<p>æ°å¥½ï¼Œè¿™å››ä¸ªæ“ä½œï¼Œå¯¹ä¸Šæˆ‘ä»¬æ—¥å¸¸é€»è¾‘çš„ CRUD æ“ä½œã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šç»å¸¸èƒ½å¬åˆ°èƒ–å‹æŠ±æ€¨è‡ªå·±åšçš„éƒ½æ˜¯ CRUD çš„åŠŸèƒ½ã€‚çœ‹äº†è¿™ä¸ªé¢è¯•é¢˜ï¼Œæœ‰æ²¡è§‰å¾—åŸæ¥ CRUD ä¹Ÿèƒ½ç©çš„ç¨å¾®é«˜çº§ä¸€ç‚¹ï¼Ÿï¼</p>
<p>å®é™…ä¸Šï¼Œæ¯ä¸ª CRUD ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ä¸æ–­çš„æ‰“ç£¨ï¼Œç©çš„å¾ˆé«˜çº§ã€‚ä¾‹å¦‚è¯´ DDD é¢†åŸŸé©±åŠ¨ï¼Œå®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œå¯æ‰©å±•çš„è®¾è®¡ã€‚</p>
</blockquote>
<h3 id="åˆ é™¤çš„-HTTP-çŠ¶æ€è¿”å›ç æ˜¯ä»€ä¹ˆ"><a href="#åˆ é™¤çš„-HTTP-çŠ¶æ€è¿”å›ç æ˜¯ä»€ä¹ˆ" class="headerlink" title="åˆ é™¤çš„ HTTP çŠ¶æ€è¿”å›ç æ˜¯ä»€ä¹ˆ ?"></a>åˆ é™¤çš„ HTTP çŠ¶æ€è¿”å›ç æ˜¯ä»€ä¹ˆ ?</h3><p>åœ¨åˆ é™¤æˆåŠŸä¹‹åï¼Œæ‚¨çš„ REST API åº”è¯¥è¿”å›ä»€ä¹ˆçŠ¶æ€ä»£ç ï¼Œå¹¶æ²¡æœ‰ä¸¥æ ¼çš„è§„åˆ™ã€‚å®ƒå¯ä»¥è¿”å› 200 æˆ– 204 æ²¡æœ‰å†…å®¹ã€‚</p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåˆ é™¤æ“ä½œæˆåŠŸï¼Œå“åº”ä¸»ä½“ä¸ºç©ºï¼Œè¿”å› <a target="_blank" rel="noopener" href="http://www.netingcn.com/http-status-204.html">204</a> ã€‚</li>
<li>å¦‚æœåˆ é™¤è¯·æ±‚æˆåŠŸä¸”å“åº”ä½“ä¸æ˜¯ç©ºçš„ï¼Œåˆ™è¿”å› 200 ã€‚</li>
</ul>
<h3 id="REST-API-æ˜¯æ— çŠ¶æ€çš„å—"><a href="#REST-API-æ˜¯æ— çŠ¶æ€çš„å—" class="headerlink" title="REST API æ˜¯æ— çŠ¶æ€çš„å—?"></a>REST API æ˜¯æ— çŠ¶æ€çš„å—?</h3><p><strong>æ˜¯çš„</strong>ï¼ŒREST API åº”è¯¥æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº HTTP çš„ï¼Œå®ƒä¹Ÿæ˜¯æ— çŠ¶æ€çš„ã€‚</p>
<p>REST API ä¸­çš„è¯·æ±‚åº”è¯¥åŒ…å«å¤„ç†å®ƒæ‰€éœ€çš„æ‰€æœ‰ç»†èŠ‚ã€‚å®ƒ<strong>ä¸åº”è¯¥</strong>ä¾èµ–äºä»¥å‰æˆ–ä¸‹ä¸€ä¸ªè¯·æ±‚æˆ–æœåŠ¡å™¨ç«¯ç»´æŠ¤çš„ä¸€äº›æ•°æ®ï¼Œä¾‹å¦‚ä¼šè¯ã€‚</p>
<p><strong>REST è§„èŒƒä¸ºä½¿å…¶æ— çŠ¶æ€è®¾ç½®äº†ä¸€ä¸ªçº¦æŸï¼Œåœ¨è®¾è®¡ REST API æ—¶ï¼Œæ‚¨åº”è¯¥è®°ä½è¿™ä¸€ç‚¹</strong>ã€‚</p>
<h3 id="RESTå®‰å…¨å—-ä½ èƒ½åšä»€ä¹ˆæ¥ä¿æŠ¤å®ƒ"><a href="#RESTå®‰å…¨å—-ä½ èƒ½åšä»€ä¹ˆæ¥ä¿æŠ¤å®ƒ" class="headerlink" title="RESTå®‰å…¨å—? ä½ èƒ½åšä»€ä¹ˆæ¥ä¿æŠ¤å®ƒ?"></a>RESTå®‰å…¨å—? ä½ èƒ½åšä»€ä¹ˆæ¥ä¿æŠ¤å®ƒ?</h3><p>å®‰å…¨æ˜¯ä¸€ä¸ªå®½æ³›çš„æœ¯è¯­ã€‚å®ƒå¯èƒ½æ„å‘³ç€æ¶ˆæ¯çš„å®‰å…¨æ€§ï¼Œè¿™æ˜¯é€šè¿‡è®¤è¯å’Œæˆæƒæä¾›çš„åŠ å¯†æˆ–è®¿é—®é™åˆ¶æä¾›çš„ã€‚</p>
<p>REST é€šå¸¸ä¸æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ Spring Security æ¥ä¿æŠ¤å®ƒã€‚</p>
<ul>
<li>è‡³å°‘ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ Spring Security é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ HTTP æ¥å¯ç”¨ HTTP Basic Auth åŸºæœ¬è®¤è¯ã€‚</li>
<li>ç±»ä¼¼åœ°ï¼Œå¦‚æœåº•å±‚æœåŠ¡å™¨æ”¯æŒ HTTPS ï¼Œä½ å¯ä»¥ä½¿ç”¨ HTTPS å…¬å¼€ REST API ã€‚</li>
</ul>
<h3 id="RestTemplate-çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ"><a href="#RestTemplate-çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ" class="headerlink" title="RestTemplate çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ?"></a>RestTemplate çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ?</h3><p>åœ¨ Spring Framework ä¸­ï¼ŒRestTemplate ç±»æ˜¯ <a target="_blank" rel="noopener" href="http://www.java67.com/2012/09/top-10-java-design-pattern-interview-question-answer.html">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a> çš„å®ç°ã€‚è·Ÿå…¶ä»–ä¸»æµçš„æ¨¡æ¿ç±»ç›¸ä¼¼ï¼Œå¦‚ JdbcTemplate æˆ– JmsTempalte ï¼Œå®ƒå°†åœ¨å®¢æˆ·ç«¯ç®€åŒ–è·Ÿ RESTful Web æœåŠ¡çš„é›†æˆã€‚æ­£å¦‚åœ¨ RestTemplate ä¾‹å­ä¸­æ˜¾ç¤ºçš„ä¸€æ ·ï¼Œä½ èƒ½éå¸¸å®¹æ˜“åœ°ç”¨å®ƒæ¥è°ƒç”¨ RESTful Web æœåŠ¡ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šå½“ç„¶ï¼Œå®é™…åœºæ™¯æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ä½¿ç”¨ <a target="_blank" rel="noopener" href="http://square.github.io/okhttp/">OkHttp</a> ä½œä¸º HTTP åº“ï¼Œå› ä¸ºæ›´å¥½çš„æ€§èƒ½ï¼Œä½¿ç”¨ä¹Ÿä¾¿æ·ï¼Œå¹¶ä¸”æ— éœ€ä¾èµ– Spring åº“ã€‚</p>
</blockquote>
<h3 id="HttpMessageConverter-åœ¨-Spring-REST-ä¸­ä»£è¡¨ä»€ä¹ˆ"><a href="#HttpMessageConverter-åœ¨-Spring-REST-ä¸­ä»£è¡¨ä»€ä¹ˆ" class="headerlink" title="HttpMessageConverter åœ¨ Spring REST ä¸­ä»£è¡¨ä»€ä¹ˆ?"></a>HttpMessageConverter åœ¨ Spring REST ä¸­ä»£è¡¨ä»€ä¹ˆ?</h3><p>HttpMessageConverter æ˜¯ä¸€ç§<a target="_blank" rel="noopener" href="http://www.java67.com/2014/12/strategy-pattern-in-java-with-example.html">ç­–ç•¥æ¥å£</a> ï¼Œå®ƒæŒ‡å®šäº†ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå®ƒå¯ä»¥è½¬æ¢ HTTP è¯·æ±‚å’Œå“åº”ã€‚Spring REST ç”¨è¿™ä¸ªæ¥å£è½¬æ¢ HTTP å“åº”åˆ°å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚ï¼šJSON æˆ– XML ã€‚</p>
<p>æ¯ä¸ª HttpMessageConverter å®ç°éƒ½æœ‰ä¸€ç§æˆ–å‡ ç§ç›¸å…³è”çš„MIMEåè®®ã€‚Spring ä½¿ç”¨ <code>&quot;Accept&quot;</code> çš„æ ‡å¤´æ¥ç¡®å®šå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å†…å®¹ç±»å‹ã€‚</p>
<p>ç„¶åï¼Œå®ƒå°†å°è¯•æ‰¾åˆ°ä¸€ä¸ªæ³¨å†Œçš„ HTTPMessageConverter ï¼Œå®ƒèƒ½å¤Ÿå¤„ç†ç‰¹å®šçš„å†…å®¹ç±»å‹ï¼Œå¹¶ä½¿ç”¨å®ƒå°†å“åº”è½¬æ¢æˆè¿™ç§æ ¼å¼ï¼Œç„¶åå†å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>å¦‚æœèƒ–å‹å¯¹ HttpMessageConverter ä¸äº†è§£ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://leokongwq.github.io/2017/06/14/spring-MessageConverter.html">ã€ŠSpring ä¸­ HttpMessageConverter è¯¦è§£ã€‹</a> ã€‚</p>
<h3 id="å¦‚ä½•åˆ›å»º-HttpMessageConverter-çš„è‡ªå®šä¹‰å®ç°æ¥æ”¯æŒä¸€ç§æ–°çš„è¯·æ±‚-å“åº”ï¼Ÿ"><a href="#å¦‚ä½•åˆ›å»º-HttpMessageConverter-çš„è‡ªå®šä¹‰å®ç°æ¥æ”¯æŒä¸€ç§æ–°çš„è¯·æ±‚-å“åº”ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ›å»º HttpMessageConverter çš„è‡ªå®šä¹‰å®ç°æ¥æ”¯æŒä¸€ç§æ–°çš„è¯·æ±‚/å“åº”ï¼Ÿ"></a>å¦‚ä½•åˆ›å»º HttpMessageConverter çš„è‡ªå®šä¹‰å®ç°æ¥æ”¯æŒä¸€ç§æ–°çš„è¯·æ±‚/å“åº”ï¼Ÿ</h3><p>æˆ‘ä»¬ä»…éœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„ AbstractHttpMessageConverter çš„å®ç°ï¼Œå¹¶ä½¿ç”¨ WebMvcConfigurerAdapter çš„ <code>#extendMessageConverters(List&gt; converters)</code> æ–¹æ³•æ³¨ä¸­å†Œå®ƒï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”Ÿæˆä¸€ç§æ–°çš„è¯·æ±‚ / å“åº”ç±»å‹ã€‚</p>
<p>å…·ä½“çš„ç¤ºä¾‹ï¼Œå¯ä»¥å­¦ä¹  <a target="_blank" rel="noopener" href="https://github.com/alibaba/fastjson/wiki/%E5%9C%A8-Spring-%E4%B8%AD%E9%9B%86%E6%88%90-Fastjson">ã€Šåœ¨ Spring ä¸­é›†æˆ Fastjsonã€‹</a> æ–‡ç« ã€‚</p>
<h3 id="PathVariable-æ³¨è§£ï¼Œåœ¨-Spring-MVC-åšäº†ä»€ä¹ˆ-ä¸ºä»€ä¹ˆ-REST-åœ¨-Spring-ä¸­å¦‚æ­¤æœ‰ç”¨ï¼Ÿ"><a href="#PathVariable-æ³¨è§£ï¼Œåœ¨-Spring-MVC-åšäº†ä»€ä¹ˆ-ä¸ºä»€ä¹ˆ-REST-åœ¨-Spring-ä¸­å¦‚æ­¤æœ‰ç”¨ï¼Ÿ" class="headerlink" title="@PathVariable æ³¨è§£ï¼Œåœ¨ Spring MVC åšäº†ä»€ä¹ˆ? ä¸ºä»€ä¹ˆ REST åœ¨ Spring ä¸­å¦‚æ­¤æœ‰ç”¨ï¼Ÿ"></a>@PathVariable æ³¨è§£ï¼Œåœ¨ Spring MVC åšäº†ä»€ä¹ˆ? ä¸ºä»€ä¹ˆ REST åœ¨ Spring ä¸­å¦‚æ­¤æœ‰ç”¨ï¼Ÿ</h3><p><code>@PathVariable</code> æ³¨è§£ï¼Œæ˜¯ Spring MVC ä¸­æœ‰ç”¨çš„æ³¨è§£ä¹‹ä¸€ï¼Œå®ƒå…è®¸æ‚¨ä» URI è¯»å–å€¼ï¼Œæ¯”å¦‚æŸ¥è¯¢å‚æ•°ã€‚å®ƒåœ¨ä½¿ç”¨ Spring åˆ›å»º RESTful Web æœåŠ¡æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºåœ¨ REST ä¸­ï¼Œèµ„æºæ ‡è¯†ç¬¦æ˜¯ URI çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å…·ä½“çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œèƒ–å‹å¦‚æœä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://blog.csdn.net/cx361006796/article/details/52829759">ã€ŠSpring MVC çš„ @RequestParam æ³¨è§£å’Œ @PathVariable æ³¨è§£çš„åŒºåˆ«ã€‹</a> ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://fatefrank.github.io/2020/08/06/%E7%BC%93%E5%AD%98%20%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Seif Zheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seif Zheng's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/%E7%BC%93%E5%AD%98%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">ç¼“å­˜ é¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š16:52:18" itemprop="dateCreated datePublished" datetime="2020-08-06T00:00:00+08:00">2020-08-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æœ¬æ–‡åªåˆ†äº«é€šç”¨çš„ã€ç¼“å­˜ã€‘çš„é¢è¯•é¢˜ï¼Œå…³äº Redisã€MemCache ä¼šå•ç‹¬åˆ†äº«ã€‚</p>
<p>å†å¦å¤–ï¼Œæœ¬æ–‡ã€ç¼“å­˜ã€‘æŒ‡çš„æ›´å¤šçš„æ˜¯åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡ï¼Œè€Œä¸æ˜¯ HTTP ç¼“å­˜ç­‰ç­‰ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ</h3><blockquote>
<p>è‰¿è‰¿ï¼šè¿™ä¸ªé—®é¢˜ï¼Œç†è§£å³å¯ã€‚</p>
</blockquote>
<p>ç¼“å­˜ï¼Œå°±æ˜¯æ•°æ®äº¤æ¢çš„ç¼“å†²åŒºï¼Œé’ˆå¯¹æœåŠ¡å¯¹è±¡çš„ä¸åŒï¼ˆæœ¬è´¨å°±æ˜¯ä¸åŒçš„ç¡¬ä»¶ï¼‰éƒ½å¯ä»¥æ„å»ºç¼“å­˜ã€‚</p>
<p>ç›®çš„æ˜¯ï¼Œ<strong>æŠŠè¯»å†™é€Ÿåº¦ã€æ…¢ã€‘çš„ä»‹è´¨çš„æ•°æ®ä¿å­˜åœ¨è¯»å†™é€Ÿåº¦ã€å¿«ã€‘çš„ä»‹è´¨ä¸­ï¼Œä»è€Œæé«˜è¯»å†™é€Ÿåº¦ï¼Œå‡å°‘æ—¶é—´æ¶ˆè€—</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>CPU é«˜é€Ÿç¼“å­˜ ï¼šé«˜é€Ÿç¼“å­˜çš„è¯»å†™é€Ÿåº¦è¿œé«˜äºå†…å­˜ã€‚<ul>
<li>CPU è¯»æ•°æ®æ—¶ï¼Œå¦‚æœåœ¨é«˜é€Ÿç¼“å­˜ä¸­æ‰¾åˆ°æ‰€éœ€æ•°æ®ï¼Œå°±ä¸éœ€è¦è¯»å†…å­˜</li>
<li>CPU å†™æ•°æ®æ—¶ï¼Œå…ˆå†™åˆ°é«˜é€Ÿç¼“å­˜ï¼Œå†å›å†™åˆ°å†…å­˜ã€‚</li>
</ul>
</li>
<li>ç£ç›˜ç¼“å­˜ï¼šç£ç›˜ç¼“å­˜å…¶å®å°±æŠŠå¸¸ç”¨çš„ç£ç›˜æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜è¯»å†™é€Ÿåº¦ä¹Ÿæ˜¯è¿œé«˜äºç£ç›˜çš„ã€‚<ul>
<li>è¯»æ•°æ®ï¼Œæ—¶ä»å†…å­˜è¯»å–ã€‚</li>
<li>å†™æ•°æ®æ—¶ï¼Œå¯å…ˆå†™åˆ°å†…å­˜ï¼Œå®šæ—¶æˆ–å®šé‡å›å†™åˆ°ç£ç›˜ï¼Œæˆ–è€…æ˜¯åŒæ­¥å›å†™ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨ <a target="_blank" rel="noopener" href="https://www.cnblogs.com/liqiu/p/3211746.html">ã€ŠCPU å†…å­˜è®¿é—®é€Ÿåº¦ï¼Œç£ç›˜å’Œç½‘ç»œé€Ÿåº¦ï¼Œæ‰€æœ‰äººéƒ½åº”è¯¥çŸ¥é“çš„æ•°å­—ã€‹</a> ä¸­ï¼Œèƒ–å‹å¯ä»¥æ›´å¥½çš„ç†è§£ä¸åŒä»‹è´¨çš„é€Ÿåº¦ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ</h3><p>æ­£å¦‚åœ¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿã€</a> é—®é¢˜ä¸­æ‰€çœ‹åˆ°çš„ï¼Œä½¿ç”¨ç¼“å­˜çš„ç›®çš„ï¼Œå°±æ˜¯æå‡è¯»å†™æ€§èƒ½ã€‚è€Œå®é™…ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ›´å¤šçš„æ˜¯ä¸ºäº†æå‡<strong>è¯»æ€§èƒ½</strong>ï¼Œå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼Œæ›´é«˜çš„å¹¶å‘é‡ã€‚</p>
<p>æ—¥å¸¸ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ•°æ®åº“æ˜¯ MySQL ï¼Œç¼“å­˜æ˜¯ Redis ã€‚ä¸€èµ·æ¥çœ‹çœ‹ï¼Œé˜¿é‡Œäº‘æä¾›çš„æ€§èƒ½è§„æ ¼ï¼š</p>
<ul>
<li>Redis æ€§èƒ½è§„æ ¼ï¼Œ<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/26350.html">https://help.aliyun.com/document_detail/26350.html</a> ã€‚æ‰“åº• 8W QPS ï¼Œæœ€é«˜å¯è¾¾åƒä¸‡ QPS ã€‚</li>
<li>MySQL æ€§èƒ½è§„æ ¼ <a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/53637.html">https://help.aliyun.com/document_detail/53637.html</a> ã€‚æ‰“åº• 1.4K QPS ï¼Œæœ€é«˜ 7W QPS ã€‚</li>
</ul>
<p>è‰¿è‰¿è‡ªå·±ï¼Œä¹Ÿåˆ†åˆ«è¿›è¡Œäº†ä¸‹ Redis å’Œ MySQL çš„åŸºå‡†æµ‹è¯•ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ï¼Œç”šè‡³è‡ªå·±ä¸Šæ‰‹ç©ç©ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Performance-Testing/Redis-benchmark/?vip">ã€Šæ€§èƒ½æµ‹è¯• â€”â€” Redis åŸºå‡†æµ‹è¯•ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Performance-Testing/MySQL-benchmark/?vip">ã€Šæ€§èƒ½æµ‹è¯• â€”â€” MySQL åŸºå‡†æµ‹è¯•ã€‹</a></li>
</ul>
<p>å¦‚æ­¤ä¸€æ¯”è¾ƒï¼ŒRedis æ¯” MySQL çš„è¯»å†™æ€§èƒ½å¥½å¾ˆå¤šã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°† MySQL çš„çƒ­ç‚¹æ•°æ®ï¼Œç¼“å­˜åˆ° Redis ä¸­ï¼Œæå‡è¯»å–æ€§èƒ½ï¼Œä¹Ÿå‡å° MySQL çš„è¯»å–å‹åŠ›ã€‚ä¾‹å¦‚è¯´ï¼š</p>
<ul>
<li>è®ºå›å¸–å­çš„è®¿é—®é¢‘ç‡æ¯”è¾ƒé«˜ï¼Œä¸”è¦å®æ—¶æ›´æ–°é˜…è¯»é‡ï¼Œä½¿ç”¨ Redis è®°å½•å¸–å­çš„é˜…è¯»é‡ï¼Œå¯ä»¥æå‡æ€§èƒ½å’Œå¹¶å‘ã€‚</li>
<li>å•†å“ä¿¡æ¯ï¼Œæ•°æ®æ›´æ–°çš„é¢‘ç‡ä¸é«˜ï¼Œä½†æ˜¯è¯»å–çš„é¢‘ç‡å¾ˆé«˜ï¼Œç‰¹åˆ«æ˜¯çƒ­é—¨å•†å“ã€‚</li>
</ul>
<h3 id="è¯·è¯´è¯´æœ‰å“ªäº›ç¼“å­˜ç®—æ³•ï¼Ÿæ˜¯å¦èƒ½æ‰‹å†™ä¸€ä¸‹-LRU-ä»£ç çš„å®ç°ï¼Ÿ"><a href="#è¯·è¯´è¯´æœ‰å“ªäº›ç¼“å­˜ç®—æ³•ï¼Ÿæ˜¯å¦èƒ½æ‰‹å†™ä¸€ä¸‹-LRU-ä»£ç çš„å®ç°ï¼Ÿ" class="headerlink" title="è¯·è¯´è¯´æœ‰å“ªäº›ç¼“å­˜ç®—æ³•ï¼Ÿæ˜¯å¦èƒ½æ‰‹å†™ä¸€ä¸‹ LRU ä»£ç çš„å®ç°ï¼Ÿ"></a>è¯·è¯´è¯´æœ‰å“ªäº›ç¼“å­˜ç®—æ³•ï¼Ÿæ˜¯å¦èƒ½æ‰‹å†™ä¸€ä¸‹ LRU ä»£ç çš„å®ç°ï¼Ÿ</h3><p><strong>ç¼“å­˜ç®—æ³•</strong></p>
<p>ç¼“å­˜ç®—æ³•ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯ä¸‰ç§ï¼š</p>
<ul>
<li>LRUï¼ˆleast recently used ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨)</li>
<li>LFUï¼ˆLeast Frequently used ï¼Œæœ€ä¸ç»å¸¸ä½¿ç”¨)</li>
<li>FIFOï¼ˆfirst in first out ï¼Œå…ˆè¿›å…ˆå‡º)</li>
</ul>
<p>å®Œæ•´çš„è¯ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://blog.jobbole.com/30940/">ã€Šç¼“å­˜ã€ç¼“å­˜ç®—æ³•å’Œç¼“å­˜æ¡†æ¶ç®€ä»‹ã€‹</a> çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œç¼“å­˜ç®—æ³•ã€</a> éƒ¨åˆ†ã€‚</p>
<p><strong>æ‰‹å†™ LRU ä»£ç çš„å®ç°</strong></p>
<p>æ‰‹å†™ LRU ä»£ç çš„å®ç°ï¼Œæœ‰å¤šç§æ–¹å¼ã€‚å…¶ä¸­ï¼Œæœ€ç®€å•çš„æ˜¯åŸºäº LinkedHashMap æ¥å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> CACHE_SIZE;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¼ é€’è¿›æ¥æœ€å¤šèƒ½ç¼“å­˜å¤šå°‘æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cacheSize ç¼“å­˜å¤§å°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> cacheSize)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// true è¡¨ç¤ºè®© LinkedHashMap æŒ‰ç…§è®¿é—®é¡ºåºæ¥è¿›è¡Œæ’åºï¼Œæœ€è¿‘è®¿é—®çš„æ”¾åœ¨å¤´éƒ¨ï¼Œæœ€è€è®¿é—®çš„æ”¾åœ¨å°¾éƒ¨ã€‚</span></span><br><span class="line">        <span class="keyword">super</span>((<span class="keyword">int</span>) Math.ceil(cacheSize / <span class="number">0.75</span>) + <span class="number">1</span>, <span class="number">0.75f</span>, <span class="keyword">true</span>);</span><br><span class="line">        CACHE_SIZE = cacheSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry&lt;K, V&gt; eldest)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“ map ä¸­çš„æ•°æ®é‡å¤§äºæŒ‡å®šçš„ç¼“å­˜ä¸ªæ•°çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨åˆ é™¤æœ€è€çš„æ•°æ®ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> size() &gt; CACHE_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®ƒæ›´å¤æ‚ï¼Œæ›´èƒ½ä½“ç°ä¸ªäººç¼–ç èƒ½åŠ›çš„ LRU å®ç°æ–¹å¼ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://crossoverjie.top/2018/04/07/algorithm/LRU-cache/">ã€ŠåŠ¨æ‰‹å®ç°ä¸€ä¸ª LRU Cacheã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.jobbole.com/30940/">ã€Šç¼“å­˜ã€ç¼“å­˜ç®—æ³•å’Œç¼“å­˜æ¡†æ¶ç®€ä»‹ã€‹</a> æ–‡æœ«ï¼Œå¹¶ä¸”è¿˜æä¾›äº† FIFOã€LFU çš„ä»£ç å®ç°ã€‚</li>
</ul>
<h3 id="å¸¸è§çš„å¸¸è§çš„ç¼“å­˜å·¥å…·å’Œæ¡†æ¶æœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸è§çš„å¸¸è§çš„ç¼“å­˜å·¥å…·å’Œæ¡†æ¶æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸è§çš„å¸¸è§çš„ç¼“å­˜å·¥å…·å’Œæ¡†æ¶æœ‰å“ªäº›ï¼Ÿ"></a>å¸¸è§çš„å¸¸è§çš„ç¼“å­˜å·¥å…·å’Œæ¡†æ¶æœ‰å“ªäº›ï¼Ÿ</h3><p>åœ¨ Java åç«¯å¼€å‘ä¸­ï¼Œå¸¸è§çš„ç¼“å­˜å·¥å…·å’Œæ¡†æ¶åˆ—ä¸¾å¦‚ä¸‹ï¼š</p>
<ul>
<li>æœ¬åœ°ç¼“å­˜ï¼šGuava LocalCacheã€Ehcacheã€Caffeine ã€‚<ul>
<li>Ehcache çš„åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼ŒCaffeine çš„æ€§èƒ½è¦æ¯” Guava LocalCache å¥½ã€‚</li>
</ul>
</li>
<li>åˆ†å¸ƒå¼ç¼“å­˜ï¼šRedisã€Memcachedã€Tair ã€‚<ul>
<li>Redis æœ€ä¸ºä¸»æµå’Œå¸¸ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ç”¨äº†ç¼“å­˜ä¹‹åï¼Œæœ‰å“ªäº›å¸¸è§é—®é¢˜ï¼Ÿ"><a href="#ç”¨äº†ç¼“å­˜ä¹‹åï¼Œæœ‰å“ªäº›å¸¸è§é—®é¢˜ï¼Ÿ" class="headerlink" title="ç”¨äº†ç¼“å­˜ä¹‹åï¼Œæœ‰å“ªäº›å¸¸è§é—®é¢˜ï¼Ÿ"></a>ç”¨äº†ç¼“å­˜ä¹‹åï¼Œæœ‰å“ªäº›å¸¸è§é—®é¢˜ï¼Ÿ</h3><p>å¸¸è§çš„é—®é¢˜ï¼Œå¯åˆ—ä¸¾å¦‚ä¸‹ï¼š</p>
<ul>
<li>å†™å…¥é—®é¢˜<ul>
<li>ç¼“å­˜ä½•æ—¶<strong>å†™å…¥</strong>ï¼Ÿå¹¶ä¸”å†™æ—¶å¦‚ä½•é¿å…å¹¶å‘é‡å¤å†™å…¥ï¼Ÿ</li>
<li>ç¼“å­˜å¦‚ä½•<strong>å¤±æ•ˆ</strong>ï¼Ÿ</li>
<li>ç¼“å­˜å’Œ DB çš„<strong>ä¸€è‡´æ€§</strong>å¦‚ä½•ä¿è¯ï¼Ÿ</li>
</ul>
</li>
<li>ç»å…¸ä¸‰è¿é—®<ul>
<li>å¦‚ä½•é¿å…ç¼“å­˜<strong>ç©¿é€</strong>çš„é—®é¢˜ï¼Ÿ</li>
<li>å¦‚ä½•é¿å…ç¼“å­˜<strong>å‡»ç©¿</strong>çš„é—®é¢˜ï¼Ÿ</li>
<li>å¦‚æœé¿å…ç¼“å­˜<strong>é›ªå´©</strong>çš„é—®é¢˜ï¼Ÿ</li>
</ul>
</li>
</ul>
<blockquote>
<p>è‰¿è‰¿ï¼šé‡ç‚¹å¯ä»¥å»â€œè®°â€åŠ ç²—çš„å…­ä¸ªè¯ã€‚</p>
</blockquote>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå¯¹æ¯ä¸ªé—®é¢˜ï¼Œé€æ­¥è§£æã€‚</p>
<h3 id="å½“æŸ¥è¯¢ç¼“å­˜æŠ¥é”™ï¼Œæ€ä¹ˆæé«˜å¯ç”¨æ€§ï¼Ÿ"><a href="#å½“æŸ¥è¯¢ç¼“å­˜æŠ¥é”™ï¼Œæ€ä¹ˆæé«˜å¯ç”¨æ€§ï¼Ÿ" class="headerlink" title="å½“æŸ¥è¯¢ç¼“å­˜æŠ¥é”™ï¼Œæ€ä¹ˆæé«˜å¯ç”¨æ€§ï¼Ÿ"></a>å½“æŸ¥è¯¢ç¼“å­˜æŠ¥é”™ï¼Œæ€ä¹ˆæé«˜å¯ç”¨æ€§ï¼Ÿ</h3><p>ç¼“å­˜å¯ä»¥æå¤§çš„æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½†æ˜¯ç¼“å­˜æ•°æ®ä¸¢å¤±å’Œç¼“å­˜ä¸å¯ç”¨ä¸èƒ½å½±å“åº”ç”¨çš„æ­£å¸¸å·¥ä½œã€‚</p>
<p>å› æ­¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœç¼“å­˜å‡ºç°å¼‚å¸¸ï¼Œéœ€è¦æ‰‹åŠ¨æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”è®°å½•æ—¥å¿—ï¼Œå¹¶ä¸”ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®è¿”å›ç»™ç”¨æˆ·ï¼Œè€Œä¸åº”è¯¥å¯¼è‡´ä¸šåŠ¡ä¸å¯ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™æ ·åšå¯èƒ½ä¼šå¸¦æ¥ç¼“å­˜é›ªå´©çš„é—®é¢˜ã€‚å…·ä½“æ€ä¹ˆè§£å†³ï¼Œå¯ä»¥çœ‹çœ‹æœ¬æ–‡ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œå¦‚ä½•é¿å…ç¼“å­˜â€é›ªå´©â€çš„é—®é¢˜ï¼Ÿã€</a> é—®é¢˜ã€‚</p>
<h3 id="å¦‚æœé¿å…ç¼“å­˜â€ç©¿é€â€çš„é—®é¢˜ï¼Ÿ"><a href="#å¦‚æœé¿å…ç¼“å­˜â€ç©¿é€â€çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚æœé¿å…ç¼“å­˜â€ç©¿é€â€çš„é—®é¢˜ï¼Ÿ"></a>å¦‚æœé¿å…ç¼“å­˜â€ç©¿é€â€çš„é—®é¢˜ï¼Ÿ</h3><p><strong>ç¼“å­˜ç©¿é€</strong></p>
<p>ç¼“å­˜ç©¿é€ï¼Œæ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®š<strong>ä¸å­˜åœ¨</strong>çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶è¢«åŠ¨å†™ï¼Œå¹¶ä¸”å¤„äºå®¹é”™è€ƒè™‘ï¼Œå¦‚æœä» DB æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ° DB å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰ã€‚</p>
<blockquote>
<p>è¢«åŠ¨å†™ï¼šå½“ä»ç¼“å­˜ä¸­æŸ¥ä¸åˆ°æ•°æ®æ—¶ï¼Œç„¶åä»æ•°æ®åº“æŸ¥è¯¢åˆ°è¯¥æ•°æ®ï¼Œå†™å…¥è¯¥æ•°æ®åˆ°ç¼“å­˜ä¸­ã€‚</p>
</blockquote>
<p>åœ¨æµé‡å¤§æ—¶ï¼Œå¯èƒ½ DB å°±æŒ‚æ‰äº†ï¼Œè¦æ˜¯æœ‰äººåˆ©ç”¨ä¸å­˜åœ¨çš„ key é¢‘ç¹æ”»å‡»æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™å°±æ˜¯æ¼æ´ã€‚å¦‚ä¸‹å›¾ï¼š<a target="_blank" rel="noopener" href="http://static2.iocoder.cn/images/Cache/2019-11-21/01.png"><img src="http://static2.iocoder.cn/images/Cache/2019-11-21/01.png" alt="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</p>
<ul>
<li>åœ¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿã€</a> ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼ŒMySQL çš„æ€§èƒ½æ˜¯è¿œä¸å¦‚ Redis çš„ï¼Œå¦‚æœå¤§é‡çš„è¯·æ±‚ç›´æ¥æ‰“åˆ° MySQL ï¼Œåˆ™ä¼šç›´æ¥æ‰“æŒ‚ MySQL ã€‚</li>
<li>å½“ç„¶ï¼Œç¼“å­˜ç©¿é€ä¸ä¸€å®šæ˜¯æ”»å‡»ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ä»¬è‡ªå·±ç¨‹åºå†™çš„é—®é¢˜ï¼Œç–¯ç‹‚è¯»å–ä¸å­˜åœ¨çš„æ•°æ®ï¼Œåˆæˆ–è€…â€œæ— è„‘â€çš„çˆ¬è™«ï¼Œé¡ºåºçˆ¬å–æ•°æ®ã€‚</li>
<li>å¦å¤–ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œ<strong>ç¼“å­˜ç©¿é€</strong>ï¼ŒæŒ‡çš„æ˜¯æŸ¥è¯¢ä¸€ä¸ª<strong>ä¸å­˜åœ¨</strong>çš„æ•°æ®ï¼Œå¾ˆå®¹å™¨å’Œæˆ‘ä»¬è¦è®²åˆ°çš„<strong>ç¼“å­˜å‡»ç©¿</strong>ææ··æ·†ã€‚</li>
</ul>
<p><strong>å¦‚ä½•è§£å†³</strong></p>
<p>æœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥è§£å†³ï¼š</p>
<p>1ï¼‰æ–¹æ¡ˆä¸€ï¼Œç¼“å­˜ç©ºå¯¹è±¡ã€‚</p>
<p>å½“ä» DB æŸ¥è¯¢æ•°æ®ä¸ºç©ºï¼Œæˆ‘ä»¬ä»ç„¶å°†è¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œå…·ä½“çš„å€¼éœ€è¦ä½¿ç”¨<strong>ç‰¹æ®Šçš„æ ‡è¯†</strong>ï¼Œèƒ½å’ŒçœŸæ­£ç¼“å­˜çš„æ•°æ®åŒºåˆ†å¼€ã€‚å¦å¤–ï¼Œéœ€è¦è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œä¸€èˆ¬å»ºè®®ä¸è¦è¶…è¿‡ 5 åˆ†é’Ÿã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Ÿå› ä¸ºç¼“å­˜ä¹…æ²¡æœ‰æ„ä¹‰ï¼Œä¹Ÿæµªè´¹ç¼“å­˜çš„å†…å­˜ã€‚</p>
</blockquote>
<p>2ï¼‰æ–¹æ¡ˆäºŒï¼ŒBloomFilter å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p>
<p>åœ¨ç¼“å­˜æœåŠ¡çš„åŸºç¡€ä¸Šï¼Œæ„å»º BloomFilter æ•°æ®ç»“æ„ï¼Œåœ¨ BloomFilter ä¸­å­˜å‚¨å¯¹åº”çš„ KEY æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¯´æ˜è¯¥ KEY å¯¹åº”çš„å€¼<strong>ä¸ä¸ºç©º</strong>ã€‚é‚£ä¹ˆæ•´ä¸ªé€»è¾‘çš„å¦‚ä¸‹ï¼š</p>
<ul>
<li>1ã€æ ¹æ® KEY æŸ¥è¯¢ã€BloomFilter ç¼“å­˜ã€‘ã€‚å¦‚æœä¸å­˜åœ¨å¯¹åº”çš„å€¼ï¼Œç›´æ¥è¿”å›ï¼›å¦‚æœå­˜åœ¨ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ã€åç»­çš„æµç¨‹ï¼Œå°±æ˜¯æ ‡å‡†çš„æµç¨‹ã€‘</li>
<li>2ã€æ ¹æ® KEY æŸ¥è¯¢åœ¨ã€æ•°æ®ç¼“å­˜ã€‘çš„å€¼ã€‚å¦‚æœå­˜åœ¨å€¼ï¼Œç›´æ¥è¿”å›ï¼›å¦‚æœä¸å­˜åœ¨å€¼ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</li>
<li>3ã€æŸ¥è¯¢ DB å¯¹åº”çš„å€¼ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™æ›´æ–°åˆ°ç¼“å­˜ï¼Œå¹¶è¿”å›è¯¥å€¼ã€‚</li>
</ul>
<p>å¯èƒ½æœ‰èƒ–å‹ä¸æ˜¯å¾ˆäº†è§£ BloomFilter å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¼šæœ‰ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆ BloomFilter ä¸å­˜å‚¨ KEY æ˜¯ä¸å­˜åœ¨çš„æƒ…å†µï¼ˆå°±æ˜¯æˆ‘ä»¬æ–¹æ¡ˆäºŒåè¿‡æ¥ï¼‰ï¼Ÿ</p>
<ul>
<li>BloomFilter å­˜åœ¨è¯¯åˆ¤ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>å­˜åœ¨çš„ä¸ä¸€å®šå­˜åœ¨ï¼Œä¸å­˜åœ¨çš„ä¸€å®šä¸å­˜åœ¨</strong>ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ï¼Œä¸€ä¸ªå­˜åœ¨çš„ KEY è¢«è¯¯åˆ¤æˆä¸å­˜åœ¨ã€‚</li>
<li>åŒæ—¶ï¼ŒBloomFilter ä¸å…è®¸åˆ é™¤ã€‚ä¾‹å¦‚è¯´ï¼Œä¸€ä¸ª KEY ä¸€å¼€å§‹æ˜¯ä¸å­˜åœ¨çš„ï¼Œåæ¥æ•°æ®æ–°å¢äº†ï¼Œä½†æ˜¯ BloomFilter ä¸å…è®¸åˆ é™¤çš„ç‰¹ç‚¹ï¼Œå°±ä¼šå¯¼è‡´ä¸€ç›´ä¼šè¢«åˆ¤æ–­æˆä¸å­˜åœ¨ã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œä½¿ç”¨ BloomFilter å¸ƒéš†è¿‡æ»¤å™¨çš„è¯ï¼Œéœ€è¦æå‰å°†å·²å­˜åœ¨çš„ KEY ï¼Œåˆå§‹åŒ–å­˜å‚¨åˆ°ã€BloomFilter ç¼“å­˜ã€‘ä¸­ã€‚</p>
<p><strong>é€‰æ‹©</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ¡ˆï¼Œå„æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">ç¼“å­˜ç©ºå¯¹è±¡</th>
<th align="left">BloomFilter å¸ƒéš†è¿‡æ»¤å™¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">é€‚ç”¨åœºæ™¯</td>
<td align="left">1ã€æ•°æ®å‘½ä¸­ä¸é«˜ 2ã€ä¿è¯ä¸€è‡´æ€§</td>
<td align="left">1ã€æ•°æ®å‘½ä¸­ä¸é«˜ 2ã€æ•°æ®ç›¸å¯¹å›ºå®šã€å®æ—¶æ€§ä½</td>
</tr>
<tr>
<td align="left">ç»´æŠ¤æˆæœ¬</td>
<td align="left">1ã€ä»£ç ç»´æŠ¤ç®€å• 2ã€éœ€è¦è¿‡å¤šçš„ç¼“å­˜ç©ºé—´ 3ã€æ•°æ®ä¸ä¸€è‡´</td>
<td align="left">1ã€ä»£ç ç»´æŠ¤å¤æ‚ 2ã€ç¼“å­˜ç©ºé—´å ç”¨å°</td>
</tr>
</tbody></table>
<p>å®é™…æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ–¹æ¡ˆäºŒæ¯”è¾ƒå¤šã€‚å› ä¸ºï¼Œç›¸æ¯”æ–¹æ¡ˆä¸€æ¥è¯´ï¼Œæ›´åŠ èŠ‚çœå†…å®¹ï¼Œå¯¹ç¼“å­˜çš„è´Ÿè·æ›´å°ã€‚</p>
<p>æ³¨æ„ï¼Œå¸¸ç”¨çš„ç¼“å­˜ Redis é»˜è®¤ä¸æ”¯æŒ BloomFilter æ•°æ®ç»“æ„ã€‚å…·ä½“æ€ä¹ˆè§£å†³ï¼Œå‚è€ƒå¦‚ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/RedisBloom/RedisBloom">RedisBloom</a></p>
<blockquote>
<p>Redis 4.0 å¼•å…¥ Module æœºåˆ¶ï¼Œæ”¯æŒ Server è‡ªå®šä¹‰æ‹“å±•ã€‚è€Œ RedisBloom ï¼Œå°±æ˜¯ Redis BloomFilter çš„æ‹“å±•ã€‚</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/erikdubbelboer/Redis-Lua-scaling-bloom-filter">Redis-Lua-scaling-bloom-filter</a></p>
<blockquote>
<p>Lua è„šæœ¬ï¼Œå®ç° BloomFilter çš„åŠŸèƒ½ã€‚</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/redisson/redisson/wiki/6.-%E5%88%86%E5%B8%83%E5%BC%8F%E5%AF%B9%E8%B1%A1#68-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8bloom-filter">Redisson BloomFilter</a></p>
<blockquote>
<p>Java Redis åº“ï¼Œå®ç° BloomFilter çš„åŠŸèƒ½ã€‚</p>
</blockquote>
</li>
<li><p>å…¶å®ƒæ–‡ç« </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000012620152">ã€ŠGoogle Guavaä¹‹BloomFilter æºç åˆ†æåŠåŸºäº Redis çš„é‡æ„ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017370384">ã€ŠåŸºäº Redis çš„ BloomFilter å®ç°ã€‹</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>è‰¿è‰¿çš„éæƒ³ï¼šå› ä¸º BloomFilter å¸ƒéš†è¿‡æ»¤å™¨å­˜åœ¨çš„è¯¯åˆ¤çš„æƒ…å†µï¼Œå¦‚æœæœ€åå» DB æŸ¥è¯¢ä¸åˆ°æ•°æ®çš„æƒ…å†µï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç»“åˆæ–¹æ¡ˆä¸€ï¼Œç¼“å­˜ç©ºå¯¹è±¡åˆ°ã€BloomFilter ç¼“å­˜ã€‘ä¸­ã€‚åæ¥æƒ³æƒ³ï¼Œå¿…è¦æ€§ä¸å¤§ï¼Œå› ä¸º BloomFilter å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡å¾ˆä½ï¼Œæ²¡å¿…è¦æŠŠæ–¹æ¡ˆå¤æ‚åŒ–ï¼Œå¤§é“è‡³ç®€ã€‚</p>
</blockquote>
<hr>
<p>å¦å¤–ï¼Œæ¨èçœ‹ä¸‹ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/TBCEwLVAXdsTszRVpXhVug">ã€ŠRedisæ¶æ„ä¹‹é˜²é›ªå´©è®¾è®¡ï¼šç½‘ç«™ä¸å®•æœºèƒŒåçš„å…µæ³•ã€‹</a> æ–‡ç« çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œä¸€ã€ç¼“å­˜ç©¿é€é¢„é˜²åŠä¼˜åŒ–ã€</a> ï¼Œå¤§ç¥è§£é‡Šçš„æ›´å¥½ï¼Œä¸”æä¾›ç›¸åº”çš„å›¾å’Œä¼ªä»£ç ã€‚</p>
<h3 id="å¦‚ä½•é¿å…ç¼“å­˜â€é›ªå´©â€çš„é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•é¿å…ç¼“å­˜â€é›ªå´©â€çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•é¿å…ç¼“å­˜â€é›ªå´©â€çš„é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•é¿å…ç¼“å­˜â€é›ªå´©â€çš„é—®é¢˜ï¼Ÿ</h3><p>ğŸ¦… <strong>ç¼“å­˜é›ªå´©</strong></p>
<p>ç¼“å­˜é›ªå´©ï¼Œæ˜¯æŒ‡ç¼“å­˜ç”±äºæŸäº›åŸå› æ— æ³•æä¾›æœåŠ¡( ä¾‹å¦‚ï¼Œç¼“å­˜æŒ‚æ‰äº† )ï¼Œæ‰€æœ‰è¯·æ±‚å…¨éƒ¨è¾¾åˆ° DB ä¸­ï¼Œå¯¼è‡´ DB è´Ÿè·å¤§å¢ï¼Œæœ€ç»ˆæŒ‚æ‰çš„æƒ…å†µã€‚</p>
<p>ğŸ¦… <strong>å¦‚ä½•è§£å†³</strong></p>
<p>é¢„é˜²å’Œè§£å†³ç¼“å­˜é›ªå´©çš„é—®é¢˜ï¼Œå¯ä»¥ä»ä»¥ä¸‹<strong>å¤šä¸ªæ–¹é¢è¿›è¡Œå…±åŒç€æ‰‹</strong>ã€‚</p>
<p>1ï¼‰ç¼“å­˜é«˜å¯ç”¨</p>
<p>é€šè¿‡æ­å»ºç¼“å­˜çš„é«˜å¯ç”¨ï¼Œé¿å…ç¼“å­˜æŒ‚æ‰å¯¼è‡´æ— æ³•æä¾›æœåŠ¡çš„æƒ…å†µï¼Œä»è€Œé™ä½å‡ºç°ç¼“å­˜é›ªå´©çš„æƒ…å†µã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨ Redis ä½œä¸ºç¼“å­˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Redis Sentinel æˆ– Redis Cluster å®ç°é«˜å¯ç”¨ã€‚</p>
<p>2ï¼‰æœ¬åœ°ç¼“å­˜</p>
<p>å¦‚æœä½¿ç”¨æœ¬åœ°ç¼“å­˜æ—¶ï¼Œå³ä½¿åˆ†å¸ƒå¼ç¼“å­˜æŒ‚äº†ï¼Œä¹Ÿå¯ä»¥å°† DB æŸ¥è¯¢åˆ°çš„ç»“æœç¼“å­˜åˆ°æœ¬åœ°ï¼Œé¿å…åç»­è¯·æ±‚å…¨éƒ¨åˆ°è¾¾ DB ä¸­ã€‚</p>
<p>å½“ç„¶ï¼Œå¼•å…¥æœ¬åœ°ç¼“å­˜ä¹Ÿä¼šæœ‰ç›¸åº”çš„é—®é¢˜ï¼Œä¾‹å¦‚è¯´ï¼š</p>
<ul>
<li>æœ¬åœ°ç¼“å­˜çš„å®æ—¶æ€§æ€ä¹ˆä¿è¯ï¼Ÿ<ul>
<li>æ–¹æ¡ˆä¸€ï¼Œå¯ä»¥å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚åœ¨æ•°æ®æ›´æ–°æ—¶ï¼Œå‘å¸ƒæ•°æ®æ›´æ–°çš„æ¶ˆæ¯ï¼›è€Œè¿›ç¨‹ä¸­æœ‰ç›¸åº”çš„æ¶ˆè´¹è€…æ¶ˆè´¹è¯¥æ¶ˆæ¯ï¼Œä»è€Œæ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚</li>
<li>æ–¹æ¡ˆäºŒï¼Œè®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œè¯·æ±‚æ—¶ä» DB é‡æ–°æ‹‰å–ã€‚</li>
<li>æ–¹æ¡ˆä¸‰ï¼Œä½¿ç”¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œå¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿã€</a> é—®é¢˜çš„ã€æ–¹æ¡ˆäºŒã€‘ï¼Œæ‰‹åŠ¨è¿‡æœŸã€‚</li>
</ul>
</li>
<li>æ¯ä¸ªè¿›ç¨‹å¯èƒ½ä¼šæœ¬åœ°ç¼“å­˜ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®æµªè´¹ï¼Ÿ<ul>
<li>æ–¹æ¡ˆä¸€ï¼Œéœ€è¦é…ç½®æœ¬åœ°ç¼“å­˜çš„è¿‡æœŸç­–ç•¥å’Œç¼“å­˜æ•°é‡ä¸Šé™ã€‚</li>
</ul>
</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ JVM ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Ehcacheã€Guava Cache å®ç°æœ¬åœ°ç¼“å­˜çš„åŠŸèƒ½ã€‚</p>
<p>3ï¼‰è¯·æ±‚ DB é™æµ</p>
<p>é€šè¿‡é™åˆ¶ DB çš„æ¯ç§’è¯·æ±‚æ•°ï¼Œé¿å…æŠŠ DB ä¹Ÿæ‰“æŒ‚äº†ã€‚è¿™æ ·è‡³å°‘èƒ½æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ol>
<li>å¯èƒ½æœ‰ä¸€éƒ¨åˆ†ç”¨æˆ·ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ï¼Œç³»ç»Ÿè¿˜æ²¡æ­»é€ã€‚</li>
<li>æœªæ¥ç¼“å­˜æœåŠ¡æ¢å¤åï¼Œç³»ç»Ÿç«‹å³å°±å·²ç»æ¢å¤ï¼Œæ— éœ€å†å¤„ç† DB ä¹ŸæŒ‚æ‰çš„æƒ…å†µã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œè¢«é™æµçš„è¯·æ±‚ï¼Œæˆ‘ä»¬æœ€å¥½ä¹Ÿè¦æœ‰ç›¸åº”çš„å¤„ç†ï¼Œèµ°ã€æœåŠ¡é™çº§ã€‘ï¼Œæä¾›ä¸€äº›é»˜è®¤çš„å€¼ï¼Œæˆ–è€…å‹æƒ…æç¤ºï¼Œç”šè‡³ç©ºç™½çš„å€¼ä¹Ÿè¡Œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ Java ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Guava RateLimiterã€Sentinelã€Hystrix å®ç°é™æµçš„åŠŸèƒ½ã€‚</p>
<p>4ï¼‰æå‰æ¼”ç»ƒ</p>
<p>åœ¨é¡¹ç›®ä¸Šçº¿å‰ï¼Œæ¼”ç»ƒç¼“å­˜å®•æ‰åï¼Œåº”ç”¨ä»¥åŠåç«¯çš„è´Ÿè½½æƒ…å†µä»¥åŠå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šåšä¸€äº›é¢„æ¡ˆè®¾å®šã€‚</p>
<hr>
<p>å¦å¤–ï¼Œæ¨èçœ‹ä¸‹ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/TBCEwLVAXdsTszRVpXhVug">ã€ŠRedisæ¶æ„ä¹‹é˜²é›ªå´©è®¾è®¡ï¼šç½‘ç«™ä¸å®•æœºèƒŒåçš„å…µæ³•ã€‹</a> æ–‡ç« çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€ŒäºŒã€ç¼“å­˜é›ªå´©é—®é¢˜ä¼˜åŒ–ã€</a> ï¼Œå¤§ç¥è§£é‡Šçš„æ›´å¥½ï¼Œä¸”æä¾›ç›¸åº”çš„å›¾å’Œä¼ªä»£ç ã€‚</p>
<h3 id="å¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿ"><a href="#å¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿ"></a>å¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿ</h3><p><strong>ç¼“å­˜å‡»ç©¿</strong></p>
<p>ç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡æŸä¸ª<strong>æåº¦â€œçƒ­ç‚¹â€</strong>æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿‡æœŸæ—¶ï¼Œæ°å¥½åœ¨è¿™ä¸ªæ—¶é—´ç‚¹å¯¹è¿™ä¸ª KEY æœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚è¿‡æ¥ï¼Œè¿™äº›è¯·æ±‚å‘ç°ç¼“å­˜è¿‡æœŸä¸€èˆ¬éƒ½ä¼šä» DB åŠ è½½æ•°æ®å¹¶å›è®¾åˆ°ç¼“å­˜ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å¤§å¹¶å‘çš„è¯·æ±‚å¯èƒ½ä¼šç¬é—´ DB å‹å®ã€‚</p>
<ul>
<li>å¯¹äºä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„ KEY ï¼Œå¦‚æœè¿™äº› KEY å¯èƒ½ä¼šåœ¨æŸäº›æ—¶é—´ç‚¹è¢«è¶…é«˜å¹¶å‘åœ°è®¿é—®ï¼Œæ˜¯ä¸€ç§éå¸¸â€œçƒ­ç‚¹â€çš„æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚</li>
<li>åŒºåˆ«ï¼š<ul>
<li>å’Œç¼“å­˜â€œé›ªå´©â€œâ€çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…é’ˆå¯¹æŸä¸€ KEY ç¼“å­˜ï¼Œåè€…åˆ™æ˜¯å¾ˆå¤š KEY ã€‚</li>
<li>å’Œç¼“å­˜â€œç©¿é€â€œâ€çš„åŒºåˆ«åœ¨äºï¼Œè¿™ä¸ª KEY æ˜¯çœŸå®å­˜åœ¨å¯¹åº”çš„å€¼çš„ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å¦‚ä½•è§£å†³</strong></p>
<p>æœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥è§£å†³ï¼š</p>
<p>1ï¼‰æ–¹æ¡ˆä¸€ï¼Œä½¿ç”¨äº’æ–¥é”ã€‚</p>
<p>è¯·æ±‚å‘ç°ç¼“å­˜ä¸å­˜åœ¨åï¼Œå»æŸ¥è¯¢ DB å‰ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯æœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢ DB ï¼Œå¹¶æ›´æ–°åˆ°ç¼“å­˜ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1ã€è·å–åˆ†å¸ƒå¼é”ï¼Œç›´åˆ°æˆåŠŸæˆ–è¶…æ—¶ã€‚å¦‚æœè¶…æ—¶ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œè¿”å›ã€‚å¦‚æœæˆåŠŸï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</li>
<li>2ã€è·å–ç¼“å­˜ã€‚å¦‚æœå­˜åœ¨å€¼ï¼Œåˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ğŸ˜ˆ å› ä¸ºï¼Œè·å¾—åˆ°é”ï¼Œå¯èƒ½å·²ç»è¢«â€œé‚£ä¸ªâ€çº¿ç¨‹å»æŸ¥è¯¢è¿‡ DB ï¼Œå¹¶æ›´æ–°åˆ°ç¼“å­˜ä¸­äº†ã€‚</li>
<li>3ã€æŸ¥è¯¢ DB ï¼Œå¹¶æ›´æ–°åˆ°ç¼“å­˜ä¸­ï¼Œè¿”å›å€¼ã€‚</li>
</ul>
<p>2ï¼‰æ–¹æ¡ˆäºŒï¼Œæ‰‹åŠ¨è¿‡æœŸã€‚</p>
<p>ç¼“å­˜ä¸Šä»ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ŒåŠŸèƒ½ä¸Šå°†è¿‡æœŸæ—¶é—´å­˜åœ¨ KEY å¯¹åº”çš„ VALUE é‡Œã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1ã€è·å–ç¼“å­˜ã€‚é€šè¿‡ VALUE çš„è¿‡æœŸæ—¶é—´ï¼Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸã€‚å¦‚æœæœªè¿‡æœŸï¼Œåˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœå·²è¿‡æœŸï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</li>
<li>2ã€é€šè¿‡ä¸€ä¸ªåå°çš„å¼‚æ­¥çº¿ç¨‹è¿›è¡Œç¼“å­˜çš„æ„å»ºï¼Œä¹Ÿå°±æ˜¯â€œæ‰‹åŠ¨â€è¿‡æœŸã€‚é€šè¿‡åå°çš„å¼‚æ­¥çº¿ç¨‹ï¼Œä¿è¯æœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢ DBã€‚</li>
<li>3ã€åŒæ—¶ï¼Œè™½ç„¶ VALUE å·²ç»è¿‡æœŸï¼Œè¿˜æ˜¯ç›´æ¥è¿”å›ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œè™½ç„¶æŸå¤±äº†ä¸€å®šçš„æ—¶æ•ˆæ€§ã€‚</li>
</ul>
<p>ğŸ¦… <strong>é€‰æ‹©</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ¡ˆï¼Œå„æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">ä½¿ç”¨äº’æ–¥é”</th>
<th align="left">æ‰‹åŠ¨è¿‡æœŸ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ä¼˜ç‚¹</td>
<td align="left">1ã€æ€è·¯ç®€å• 2ã€ä¿è¯ä¸€è‡´æ€§</td>
<td align="left">1ã€æ€§ä»·æœ€ä½³ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…</td>
</tr>
<tr>
<td align="left">ç¼ºç‚¹</td>
<td align="left">1ã€ä»£ç å¤æ‚åº¦å¢å¤§ 2ã€å­˜åœ¨æ­»é”çš„é£é™©</td>
<td align="left">1ã€æ— æ³•ä¿è¯ç¼“å­˜ä¸€è‡´æ€§</td>
</tr>
</tbody></table>
<p>å…·ä½“ä½¿ç”¨å“ªä¸€ç§æ–¹æ¡ˆï¼Œèƒ–å‹å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯å»åšé€‰æ‹©ã€‚</p>
<ul>
<li>æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œä¸Šè¿°çš„ä¸¤ä¸ªæ–¹æ¡ˆï¼Œéƒ½æ˜¯å»ºç«‹åœ¨<strong>æåº¦â€œçƒ­ç‚¹â€</strong>æ•°æ®å­˜åœ¨çš„æƒ…å†µï¼Œæ‰€ä»¥å®é™…åœºæ™¯ä¸‹ï¼Œéœ€è¦ç»“åˆ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œå¦‚æœé¿å…ç¼“å­˜â€ç©¿é€â€çš„é—®é¢˜ï¼Ÿã€</a> çš„æ–¹æ¡ˆï¼Œä¸€èµ·ä½¿ç”¨ã€‚</li>
</ul>
<hr>
<p>å¦å¤–ï¼Œæ¨èçœ‹ä¸‹ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/TBCEwLVAXdsTszRVpXhVug">ã€ŠRedis æ¶æ„ä¹‹é˜²é›ªå´©è®¾è®¡ï¼šç½‘ç«™ä¸å®•æœºèƒŒåçš„å…µæ³•ã€‹</a> æ–‡ç« çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œä¸‰ã€ç¼“å­˜çƒ­ç‚¹ key é‡å»ºä¼˜åŒ–ã€</a> ï¼Œå¤§ç¥è§£é‡Šçš„æ›´å¥½ï¼Œä¸”æä¾›ç›¸åº”çš„å›¾å’Œä¼ªä»£ç ã€‚</p>
<h3 id="ç¼“å­˜å’Œ-DB-çš„ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ"><a href="#ç¼“å­˜å’Œ-DB-çš„ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ" class="headerlink" title="ç¼“å­˜å’Œ DB çš„ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ"></a>ç¼“å­˜å’Œ DB çš„ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ</h3><p><strong>äº§ç”ŸåŸå› </strong></p>
<p>ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µï¼Œä¼šå¯¼è‡´ç¼“å­˜å’Œ DB çš„ä¸€è‡´æ€§é—®é¢˜ï¼š</p>
<ol>
<li><p>å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå¯¼è‡´è¯»å–è€çš„ DB æ•°æ®ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</p>
<blockquote>
<p>è¿™é‡Œï¼Œä¸»è¦æŒ‡çš„æ˜¯ï¼Œæ›´æ–° DB æ•°æ®ä¹‹å‰ï¼Œå…ˆåˆ é™¤ Cache çš„æ•°æ®ã€‚åœ¨ä½å¹¶å‘é‡ä¸‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå°±ä¼šå­˜åœ¨é—®é¢˜ã€‚åœ¨(åˆ é™¤ Cache çš„æ•°æ®, å’Œæ›´æ–° DB æ•°æ®)æ—¶é—´ä¹‹é—´ï¼Œæ°å¥½æœ‰ä¸€ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬å¦‚æœä½¿ç”¨<strong>è¢«åŠ¨è¯»</strong>ï¼Œå› ä¸ºæ­¤æ—¶ DB æ•°æ®è¿˜æ˜¯è€çš„ï¼Œåˆä¼šå°†è€çš„æ•°æ®å†™å…¥åˆ° Cache ä¸­ã€‚</p>
</blockquote>
</li>
<li><p>ç¼“å­˜å’Œ DB çš„æ“ä½œï¼Œä¸åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¯èƒ½åªæœ‰ä¸€ä¸ª DB æ“ä½œæˆåŠŸï¼Œè€Œå¦ä¸€ä¸ª Cache æ“ä½œå¤±è´¥ï¼Œå¯¼è‡´ä¸ä¸€è‡´ã€‚</p>
</li>
</ol>
<p>å½“ç„¶ï¼Œæœ‰ä¸€ç‚¹æˆ‘ä»¬è¦æ³¨æ„ï¼Œç¼“å­˜å’Œ DB çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬æŒ‡çš„æ›´å¤šçš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚æˆ‘ä»¬ä½¿ç”¨ç¼“å­˜åªè¦æ˜¯æé«˜è¯»æ“ä½œçš„æ€§èƒ½ï¼ŒçœŸæ­£åœ¨å†™æ“ä½œçš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜æ˜¯ä»¥æ•°æ®åº“ä¸ºå‡†ã€‚ä¾‹å¦‚è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ç¼“å­˜ç”¨æˆ·é’±åŒ…çš„ä½™é¢åœ¨ç¼“å­˜ä¸­ï¼Œåœ¨å‰ç«¯æŸ¥è¯¢é’±åŒ…ä½™é¢æ—¶ï¼Œè¯»å–ç¼“å­˜ï¼Œåœ¨ä½¿ç”¨é’±åŒ…ä½™é¢æ—¶ï¼Œè¯»å–æ•°æ®åº“ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>åœ¨å¼€å§‹è¯´è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œèƒ–å‹å…ˆçœ‹çœ‹å¦‚ä¸‹å‡ ç¯‡æ–‡ç« ï¼Œå¯èƒ½æœ‰ä¸€ä¸¢ä¸¢å¤šï¼Œä¿æŒè€å¿ƒã€‚</p>
<ul>
<li>å·¦è€³æœµè€—å­<ul>
<li><a target="_blank" rel="noopener" href="https://coolshell.cn/articles/17416.html">ã€Šç¼“å­˜æ›´æ–°çš„å¥—è·¯ã€‹</a></li>
</ul>
</li>
<li>æ²ˆå‰‘<ul>
<li><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/architectroad/architectroad-cache-architecture-design.html">ã€Šç¼“å­˜æ¶æ„è®¾è®¡ç»†èŠ‚äºŒä¸‰äº‹ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/architectroad/architectroad-consistency-of-cache-with-database.html">ã€Šç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§ä¼˜åŒ–ã€‹</a> è¿™ç¯‡ï¼Œæˆ‘è§‰å¾—å†™çš„æ–¹æ¡ˆä¸å¤ªå¯è¡Œã€‚</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å‡ ç§æ–¹æ¡ˆã€‚å½“ç„¶æ— è®ºå“ªç§æ–¹æ¡ˆï¼Œæ¯”è¾ƒé‡è¦çš„å°±æ˜¯è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><p>1ã€å°†ç¼“å­˜å¯èƒ½å­˜åœ¨çš„å¹¶è¡Œå†™ï¼Œå®ç°ä¸²è¡Œå†™ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ç¼“å­˜çš„å¹¶è¡Œå†™ã€‚åœ¨è¢«åŠ¨è¯»ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œä¹Ÿå­˜åœ¨å†™ã€‚</p>
</blockquote>
</li>
<li><p>2ã€å®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
</li>
</ul>
<p>1ï¼‰å…ˆæ·˜æ±°ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</p>
<p>å› ä¸ºå…ˆæ·˜æ±°ç¼“å­˜ï¼Œæ‰€ä»¥æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§æ˜¯å¯ä»¥å¾—åˆ°æœ‰æ•ˆçš„ä¿è¯çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…ˆæ·˜æ±°ç¼“å­˜ï¼Œå³ä½¿å†™æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ¬¡ç¼“å­˜è¯»å–æ—¶ï¼Œå¤šè¯»å–ä¸€æ¬¡æ•°æ®åº“ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ¡ˆä¼šå­˜åœ¨ç¼“å­˜å’Œ DB çš„æ•°æ®ä¼šä¸ä¸€è‡´çš„æƒ…å†µï¼Œ<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/architectroad/architectroad-consistency-of-cache-with-database.html">ã€Šç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§ä¼˜åŒ–ã€‹</a> å·²ç»è¯´äº†ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ç¼“å­˜å¹¶è¡Œå†™ï¼Œå®ç°ä¸²è¡Œå†™ã€‚æ¯”è¾ƒç®€å•çš„æ–¹å¼ï¼Œå¼•å…¥åˆ†å¸ƒå¼é”ã€‚</p>
<ul>
<li>åœ¨å†™è¯·æ±‚æ—¶ï¼Œå…ˆæ·˜æ±°ç¼“å­˜ä¹‹å‰ï¼Œå…ˆè·å–è¯¥åˆ†å¸ƒå¼é”ã€‚</li>
<li>åœ¨è¯»è¯·æ±‚æ—¶ï¼Œå‘ç°ç¼“å­˜ä¸å­˜åœ¨æ—¶ï¼Œå…ˆè·å–åˆ†å¸ƒå¼é”ã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œç¼“å­˜çš„å¹¶è¡Œå†™å°±æˆåŠŸçš„å˜æˆä¸²è¡Œå†™è½ã€‚å®é™…ä¸Šï¼Œå°±æ˜¯ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œå¦‚æœé¿å…ç¼“å­˜â€å‡»ç©¿â€çš„é—®é¢˜ï¼Ÿã€</a> çš„ã€æ–¹æ¡ˆä¸€ã€‘äº’æ–¥é”çš„åŠ å¼ºç‰ˆã€‚</p>
<p>æ•´ä½“æ‰§è¡Œï¼Œå¦‚ä¸‹è‰å›¾ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://static2.iocoder.cn/images/Cache/2019-11-21/02.png"><img src="http://static2.iocoder.cn/images/Cache/2019-11-21/02.png" alt="è‰å›¾"></a>è‰å›¾</p>
<ul>
<li>å†™è¯·æ±‚æ—¶ï¼Œæ˜¯å¦ä¸»åŠ¨æ›´æ–°ç¼“å­˜ï¼Œæ ¹æ®è‡ªå·±ä¸šåŠ¡çš„éœ€è¦ï¼Œæ˜¯å¦æœ‰ï¼Œéƒ½æ²¡é—®é¢˜ã€‚</li>
</ul>
<p>2ï¼‰å…ˆå†™æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜</p>
<p>æŒ‰ç…§â€œå…ˆå†™æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜â€ï¼Œæˆ‘ä»¬è¦ä¿è¯ DB å’Œç¼“å­˜çš„æ“ä½œï¼Œèƒ½å¤Ÿåœ¨â€œåŒä¸€ä¸ªäº‹åŠ¡â€ä¸­ï¼Œä»è€Œå®ç°æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<p><strong>åŸºäºå®šæ—¶ä»»åŠ¡æ¥å®ç°</strong></p>
<ul>
<li>é¦–å…ˆï¼Œå†™å…¥æ•°æ®åº“ã€‚</li>
<li>ç„¶åï¼Œåœ¨å†™å…¥æ•°æ®åº“æ‰€åœ¨çš„äº‹åŠ¡ä¸­ï¼Œæ’å…¥ä¸€æ¡è®°å½•åˆ°ä»»åŠ¡è¡¨ã€‚è¯¥è®°å½•ä¼šå­˜å‚¨éœ€è¦æ›´æ–°çš„ç¼“å­˜ KEY å’Œ VALUE ã€‚</li>
<li>ã€å¼‚æ­¥ã€‘æœ€åï¼Œå®šæ—¶ä»»åŠ¡æ¯ç§’æ‰«æä»»åŠ¡è¡¨ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ï¼Œä¹‹ååˆ é™¤è¯¥è®°å½•ã€‚</li>
</ul>
<p><strong>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°</strong></p>
<ul>
<li>é¦–å…ˆï¼Œå†™å…¥æ•°æ®åº“ã€‚</li>
<li>ç„¶åï¼Œå‘é€å¸¦æœ‰ç¼“å­˜ KEY å’Œ VALUE çš„äº‹åŠ¡æ¶ˆæ¯ã€‚æ­¤æ—¶ï¼Œéœ€è¦æœ‰æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ç‰¹æ€§çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…æˆ‘ä»¬è‡ªå·±å°è£…æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€‚</li>
<li>ã€å¼‚æ­¥ã€‘æœ€åï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹è¯¥æ¶ˆæ¯ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¯ä»¥å…ˆå°è¯•æ›´æ–°ç¼“å­˜ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™æ’å…¥ä»»åŠ¡è¡¨ï¼Œæˆ–è€…äº‹åŠ¡æ¶ˆæ¯ã€‚</p>
<p>å¦å¤–ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœå¹¶å‘å†™æ‰§è¡Œæ—¶ï¼Œå…ˆæ›´æ–°æˆåŠŸ DB çš„ï¼Œç»“æœåæ›´æ–°ç¼“å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="http://static2.iocoder.cn/images/Cache/2019-11-21/03.png" alt="è‰å›¾"></p>
<ul>
<li>ç†è®ºæ¥è¯´ï¼Œå¸Œæœ›çš„æ›´æ–°ç¼“å­˜é¡ºåºæ˜¯ï¼Œçº¿ç¨‹ 1 å¿«äºçº¿ç¨‹ 2 ï¼Œä½†æ˜¯å®é™…çº¿ç¨‹1 æ™šäºçº¿ç¨‹ 2 ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li>
<li>å¯èƒ½èƒ–å‹ä¼šè¯´ï¼Œå›¾ä¸­ä¸æ˜¯åŸºäºå®šæ—¶ä»»åŠ¡æˆ–æ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°å¼‚æ­¥æ›´æ–°ç¼“å­˜å•Šï¼Ÿç­”æ¡ˆæ˜¯ä¸€ç›´çš„ï¼Œå¦‚æœç½‘ç»œæŠ–åŠ¨ï¼Œå¯¼è‡´ã€æ’å…¥ä»»åŠ¡è¡¨ï¼Œæˆ–è€…äº‹åŠ¡æ¶ˆæ¯ã€‘çš„é¡ºåºä¸ä¸€è‡´ã€‚</li>
<li>é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿéœ€è¦åšå¦‚ä¸‹ä¸‰ä»¶äº‹æƒ…ï¼š<ul>
<li>1ã€åœ¨ç¼“å­˜å€¼ä¸­ï¼Œæ‹¼æ¥ä¸Šæ•°æ®ç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³ã€‚ä¾‹å¦‚è¯´ï¼š<code>value = &#123;value: åŸå€¼, version: xxx&#125;</code> ã€‚</li>
<li>2ã€åœ¨ä»»åŠ¡è¡¨çš„è®°å½•ï¼Œæˆ–è€…äº‹åŠ¡æ¶ˆæ¯ä¸­ï¼Œå¢åŠ ä¸Šæ•°æ®ç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³çš„å­—æ®µã€‚</li>
<li>3ã€åœ¨å®šæ—¶ä»»åŠ¡æˆ–æ¶ˆæ¯é˜Ÿåˆ—æ‰§è¡Œæ›´æ–°ç¼“å­˜æ—¶ï¼Œå…ˆè¯»å–ç¼“å­˜ï¼Œå¯¹æ¯”ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³ï¼Œå¤§äºæ‰è¿›è¡Œæ›´æ–°ã€‚ğŸ˜ˆ å½“ç„¶ï¼Œæ­¤å¤„ä¹Ÿä¼šæœ‰å¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾—å¼•å…¥åˆ†å¸ƒå¼é”æˆ– CAS æ“ä½œã€‚<ul>
<li>å…³äº Redis åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Redis/Interview">ã€Šç²¾å°½ Redis é¢è¯•é¢˜ã€‹</a> çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œå¦‚ä½•ä½¿ç”¨ Redis å®ç°åˆ†å¸ƒå¼é”ï¼Ÿã€</a> é—®é¢˜ã€‚</li>
<li>å…³äº Redis CAS æ“ä½œï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Redis/Interview">ã€Šç²¾å°½ Redis é¢è¯•é¢˜ã€‹</a> çš„ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Cache/Interview/#">ã€Œä»€ä¹ˆæ˜¯ Redis äº‹åŠ¡ï¼Ÿã€</a> é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>3ï¼‰åŸºäºæ•°æ®åº“çš„ binlog æ—¥å¿—</p>
<blockquote>
<p>è‰¿è‰¿ï¼šå¦‚ä¸‹å†…å®¹ï¼Œå¼•ç”¨è‡ª <a target="_blank" rel="noopener" href="http://www.spring4all.com/question/177">ã€ŠæŠ€æœ¯ä¸“é¢˜è®¨è®ºç¬¬äº”æœŸï¼šè®ºç³»ç»Ÿæ¶æ„è®¾è®¡ä¸­ç¼“å­˜çš„é‡è¦æ€§ã€‹</a> æ–‡ç« ï¼Œè¶…å“¥å¯¹è¿™ä¸ªé—®é¢˜çš„å›ç­”ã€‚</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://static.iocoder.cn/f434927790ae53b4fa955ecd9952f787"><img src="http://static.iocoder.cn/f434927790ae53b4fa955ecd9952f787" alt="binlog æ–¹æ¡ˆ"></a>binlog æ–¹æ¡ˆ</p>
<ul>
<li>åº”ç”¨ç›´æ¥å†™æ•°æ®åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li>æ•°æ®åº“æ›´æ–°binlogæ—¥å¿—ã€‚</li>
<li>åˆ©ç”¨Canalä¸­é—´ä»¶è¯»å–binlogæ—¥å¿—ã€‚</li>
<li>Canalå€ŸåŠ©äºé™æµç»„ä»¶æŒ‰é¢‘ç‡å°†æ•°æ®å‘åˆ°MQä¸­ã€‚</li>
<li>åº”ç”¨ç›‘æ§MQé€šé“ï¼Œå°†MQçš„æ•°æ®æ›´æ–°åˆ°Redisç¼“å­˜ä¸­ã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°è¿™ç§æ–¹æ¡ˆå¯¹ç ”å‘äººå‘˜æ¥è¯´æ¯”è¾ƒè½»é‡ï¼Œä¸ç”¨å…³å¿ƒç¼“å­˜å±‚é¢ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ¡ˆè™½ç„¶æ¯”è¾ƒé‡ï¼Œä½†æ˜¯å´å®¹æ˜“å½¢æˆç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<hr>
<p>å½“ç„¶ï¼Œä»¥ä¸Šç§ç§æ–¹æ¡ˆï¼Œå„æœ‰å…¶å¤æ‚æ€§ï¼Œå¦‚æœèƒ–å‹å¿ƒé‡Œæ²¡åº•ï¼Œè¿˜æ˜¯ä»…ä»…ä½¿ç”¨å¦‚ä¸‹ä»»ä¸€æ–¹æ¡ˆï¼š</p>
<ul>
<li><p>â€œ<strong>å…ˆæ·˜æ±°ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</strong>â€çš„æ–¹æ¡ˆï¼Œå¹¶ä¸”æ— éœ€å¼•å…¥åˆ†å¸ƒå¼é”ã€‚</p>
<blockquote>
<p>æ²ˆå‰‘å¤§ä½¬ï¼Œæ¯”è¾ƒæ”¯æŒè¿™ç§æ–¹æ¡ˆï¼Œè§ <a target="_blank" rel="noopener" href="https://www.w3cschool.cn/architectroad/architectroad-cache-architecture-design.html">ã€Šç¼“å­˜æ¶æ„è®¾è®¡ç»†èŠ‚äºŒä¸‰äº‹ã€‹</a> ã€‚</p>
</blockquote>
</li>
<li><p>â€œ<strong>å…ˆå†™æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜</strong>â€çš„æ–¹æ¡ˆï¼Œå¹¶ä¸”æ— éœ€å¼•å…¥å®šæ—¶ä»»åŠ¡æˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<blockquote>
<p>å·¦è€³æœµè€—å­ï¼Œæ¯”è¾ƒæ”¯æŒè¿™ç§æ–¹æ¡ˆï¼Œ<a target="_blank" rel="noopener" href="https://coolshell.cn/articles/17416.html">ã€Šç¼“å­˜æ›´æ–°çš„å¥—è·¯ã€‹</a>ã€‚</p>
</blockquote>
</li>
</ul>
<p>åŸå› å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>FROM åŸºå‹è€æ¢çš„æ€»ç»“</p>
<p>ä½¿ç”¨ç¼“å­˜è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ç¼“å­˜æ•°æ®çš„ä¸ä¸€è‡´æ€§å’Œè„è¯»ç°è±¡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé‡‡å–ç¼“å­˜åŒæ·˜æ±°æœºåˆ¶ï¼Œåœ¨æ›´æ–°æ•°æ®åº“çš„<strong>å‰</strong>æ·˜æ±°ç¼“å­˜ã€‚æ­¤å¤–ï¼Œè®¾å®šè¶…æ—¶æ—¶é—´ï¼Œä¾‹å¦‚ä¸‰ååˆ†é’Ÿã€‚</p>
<p><strong>æç«¯åœºæ™¯ä¸‹ï¼Œå³ä½¿æœ‰è„æ•°æ®è¿›å…¥ç¼“å­˜ï¼Œè¿™ä¸ªè„æ•°æ®ä¹Ÿæœ€å­˜åœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨é”€æ¯ã€‚</strong></p>
</blockquote>
<ul>
<li>é‡ç‚¹ï¼Œæ˜¯æœ€åä¸€å¥è¯å“Ÿã€‚</li>
<li>çœŸçš„ï¼Œå’Œå‡ ä¸ªæœ‹å‹æ²Ÿé€šäº†ä¸‹ï¼ŒçœŸçš„å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé ç¼“å­˜è¿‡æœŸåï¼Œé‡æ–°ä» DB ä¸­è¯»å–å³å¯ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œåœ¨ DB ä¸»ä»æ¶æ„ä¸‹ï¼Œæ–¹æ¡ˆä¼šæ›´åŠ å¤æ‚ã€‚è¯¦ç»†å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.w3cschool.cn/architectroad/architectroad-consistency-of-cache-with-master-and-slave-database.html">ã€Šä¸»ä» DB ä¸ cache ä¸€è‡´æ€§ä¼˜åŒ–ã€‹</a> ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šè¿™æ˜¯ä¸€é“ç›¸å¯¹å¤æ‚çš„é—®é¢˜ï¼Œé‡ç‚¹åœ¨äºç†è§£ä¸ºä»€ä¹ˆäº§ç”Ÿä¸ä¸€è‡´çš„åŸå› ï¼Œç„¶åé’ˆå¯¹è¿™ä¸ªåŸå› å»è§£å†³ã€‚</p>
</blockquote>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­ï¼Ÿå¦‚ä½•å®ç°ç¼“å­˜é¢„çƒ­ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­ï¼Ÿå¦‚ä½•å®ç°ç¼“å­˜é¢„çƒ­ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­ï¼Ÿå¦‚ä½•å®ç°ç¼“å­˜é¢„çƒ­ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­ï¼Ÿå¦‚ä½•å®ç°ç¼“å­˜é¢„çƒ­ï¼Ÿ</h3><p>ğŸ¦… <strong>ç¼“å­˜é¢„çƒ­</strong></p>
<p>åœ¨åˆšå¯åŠ¨çš„ç¼“å­˜ç³»ç»Ÿä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œå¦‚æœä¾é ç”¨æˆ·è¯·æ±‚çš„æ–¹å¼é‡å»ºç¼“å­˜æ•°æ®ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“çš„å‹åŠ›éå¸¸å¤§ï¼Œè€Œä¸”ç³»ç»Ÿçš„æ€§èƒ½å¼€é”€ä¹Ÿæ˜¯å·¨å¤§çš„ã€‚</p>
<p>æ­¤æ—¶ï¼Œæœ€å¥½çš„ç­–ç•¥æ˜¯å¯åŠ¨æ—¶å°±æŠŠçƒ­ç‚¹æ•°æ®åŠ è½½å¥½ã€‚è¿™æ ·ï¼Œç”¨æˆ·è¯·æ±‚æ—¶ï¼Œç›´æ¥è¯»å–çš„å°±æ˜¯ç¼“å­˜çš„æ•°æ®ï¼Œè€Œæ— éœ€å»è¯»å– DB é‡å»ºç¼“å­˜æ•°æ®ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œçƒ­é—¨çš„æˆ–è€…æ¨èçš„å•†å“ï¼Œéœ€è¦æå‰é¢„çƒ­åˆ°ç¼“å­˜ä¸­ã€‚</p>
<p>ğŸ¦… <strong>å¦‚ä½•å®ç°</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æ–¹å¼æ¥å®ç°ï¼š</p>
<ol>
<li>æ•°æ®é‡ä¸å¤§æ—¶ï¼Œé¡¹ç›®å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>å†™ä¸ªä¿®å¤æ•°æ®è„šæœ¬ï¼Œæ‰‹åŠ¨æ‰§è¡Œè¯¥è„šæœ¬ã€‚</li>
<li>å†™ä¸ªç®¡ç†ç•Œé¢ï¼Œå¯ä»¥æ‰‹åŠ¨ç‚¹å‡»ï¼Œé¢„çƒ­å¯¹åº”çš„æ•°æ®åˆ°ç¼“å­˜ä¸­ã€‚</li>
</ol>
<h3 id="ç¼“å­˜æ•°æ®çš„æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"><a href="#ç¼“å­˜æ•°æ®çš„æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ç¼“å­˜æ•°æ®çš„æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"></a>ç¼“å­˜æ•°æ®çš„æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h3><p>é™¤äº†ç¼“å­˜æœåŠ¡å™¨è‡ªå¸¦çš„ç¼“å­˜<strong>è‡ªåŠ¨</strong>å¤±æ•ˆç­–ç•¥ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰çš„<strong>â€œæ‰‹åŠ¨â€</strong>ç¼“å­˜æ·˜æ±°ï¼Œå¸¸è§çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>1ã€å®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ã€‚</li>
<li>2ã€å½“æœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ‰€ç”¨åˆ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±å»åº•å±‚ç³»ç»Ÿå¾—åˆ°æ–°æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚</li>
</ul>
<p>ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„ key æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼<br>å…·ä½“ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨åœºæ™¯æ¥æƒè¡¡ã€‚</p>
<h3 id="ç¼“å­˜å¦‚ä½•å­˜å‚¨-POJO-å¯¹è±¡ï¼Ÿ"><a href="#ç¼“å­˜å¦‚ä½•å­˜å‚¨-POJO-å¯¹è±¡ï¼Ÿ" class="headerlink" title="ç¼“å­˜å¦‚ä½•å­˜å‚¨ POJO å¯¹è±¡ï¼Ÿ"></a>ç¼“å­˜å¦‚ä½•å­˜å‚¨ POJO å¯¹è±¡ï¼Ÿ</h3><p>å®é™…åœºæ™¯ä¸‹ï¼Œç¼“å­˜å€¼å¯èƒ½æ˜¯ä¸€ä¸ª POJO å¯¹è±¡ï¼Œå°±éœ€è¦è€ƒè™‘å¦‚ä½• POJO å¯¹è±¡å­˜å‚¨çš„é—®é¢˜ã€‚ç›®å‰æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>æ–¹æ¡ˆä¸€ï¼Œå°† POJO å¯¹è±¡</p>
<p>åºåˆ—åŒ–</p>
<p>è¿›è¡Œå­˜å‚¨ï¼Œé€‚åˆ Redis å’Œ Memcached ã€‚</p>
<ul>
<li>å¯å‚è€ƒ <a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaolyuh123/article/details/78682200">ã€ŠRedis åºåˆ—åŒ–æ–¹å¼StringRedisSerializerã€FastJsonRedisSerializer å’Œ KryoRedisSerializerã€‹</a> æ–‡ç« ã€‚</li>
<li>å¯¹äº POJO å¯¹è±¡æ¯”è¾ƒå¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å‹ç¼©ç®—æ³•ï¼Œä¾‹å¦‚è¯´ Snappyã€zlibã€GZip ç­‰ç­‰ã€‚</li>
</ul>
</li>
<li><p>æ–¹æ¡ˆäºŒï¼Œä½¿ç”¨ Hash æ•°æ®ç»“æ„ï¼Œé€‚åˆ Redis ã€‚</p>
<ul>
<li>å¯å‚è€ƒ <a target="_blank" rel="noopener" href="https://my.oschina.net/yuyidi/blog/499951">ã€ŠRedis ä¹‹åºåˆ—åŒ– POJOã€‹</a> æ–‡ç« ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸è¿‡å¯¹äº Redis æ¥è¯´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¼šè€ƒè™‘ä½¿ç”¨ JSON åºåˆ—åŒ–çš„æ–¹æ¡ˆã€‚æƒ³è¦æ·±å…¥çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼Œå¾ˆæœ‰è¶£ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Fight/Redis-memory-compression-combat/?self">ã€ŠRedis å†…å­˜å‹ç¼©å®æˆ˜ã€‹</a> ï¼ŒRedis HASH æ•°æ®ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ ziplist çš„ç¼–ç æ–¹å¼ï¼Œå‹ç¼©æ•°æ®ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16375188/redis-strings-vs-redis-hashes-to-represent-json-efficiency">ã€Šredis-strings-vs-redis-hashes-to-represent-json-efficiencyã€‹</a> ï¼Œé‡ç‚¹çœ‹ BMiner çš„å›ç­”ï¼Œæä¾›äº†å››ç§æ–¹æ¡ˆï¼Œéå¸¸æœ‰è¶£ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://fatefrank.github.io/2020/08/06/Spring%20Boot%20%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Seif Zheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seif Zheng's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/Spring%20Boot%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Spring Boot é¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š15:47:25" itemprop="dateCreated datePublished" datetime="2020-08-06T00:00:00+08:00">2020-08-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ ¸å¿ƒæŠ€æœ¯ç¯‡"><a href="#æ ¸å¿ƒæŠ€æœ¯ç¯‡" class="headerlink" title="æ ¸å¿ƒæŠ€æœ¯ç¯‡"></a>æ ¸å¿ƒæŠ€æœ¯ç¯‡</h2><h3 id="Spring-Boot-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-Boot-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring Boot æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring Boot æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot">Spring Boot</a> æ˜¯ Spring çš„<strong>å­é¡¹ç›®</strong>ï¼Œæ­£å¦‚å…¶åå­—ï¼Œæä¾› Spring çš„å¼•å¯¼( <strong>Boot</strong> )çš„åŠŸèƒ½ã€‚</p>
<p>é€šè¿‡ Spring Boot ï¼Œæˆ‘ä»¬å¼€å‘è€…å¯ä»¥å¿«é€Ÿé…ç½® Spring é¡¹ç›®ï¼Œå¼•å…¥å„ç§ Spring MVCã€Spring Transactionã€Spring AOPã€MyBatis ç­‰ç­‰æ¡†æ¶ï¼Œè€Œæ— éœ€ä¸æ–­é‡å¤ç¼–å†™ç¹é‡çš„ Spring é…ç½®ï¼Œé™ä½äº† Spring çš„ä½¿ç”¨æˆæœ¬ã€‚</p>
<p>Spring Boot æä¾›äº†å„ç§ Starter å¯åŠ¨å™¨ï¼Œæä¾›æ ‡å‡†åŒ–çš„é»˜è®¤é…ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web/2.1.1.RELEASE"><code>spring-boot-starter-web</code></a> å¯åŠ¨å™¨ï¼Œå¯ä»¥å¿«é€Ÿé…ç½® Spring MVC ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/1.3.2"><code>mybatis-spring-boot-starter</code></a> å¯åŠ¨å™¨ï¼Œå¯ä»¥å¿«é€Ÿé…ç½® MyBatis ã€‚</li>
</ul>
<p>å¹¶ä¸”ï¼ŒSpring Boot åŸºæœ¬å·²ç»ä¸€ç»Ÿ Java é¡¹ç›®çš„å¼€å‘ï¼Œå¤§é‡çš„å¼€æºé¡¹ç›®éƒ½å®ç°äº†å…¶çš„ Starter å¯åŠ¨å™¨ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-dubbo-spring-boot-project"><code>incubator-dubbo-spring-boot-project</code></a> å¯åŠ¨å™¨ï¼Œå¯ä»¥å¿«é€Ÿé…ç½® Dubbo ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.com/maihaoche/rocketmq-spring-boot-starter"><code>rocketmq-spring-boot-starter</code></a> å¯åŠ¨å™¨ï¼Œå¯ä»¥å¿«é€Ÿé…ç½® RocketMQ ã€‚</li>
</ul>
<h3 id="Spring-Boot-æä¾›äº†å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ"><a href="#Spring-Boot-æä¾›äº†å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ" class="headerlink" title="Spring Boot æä¾›äº†å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ"></a>Spring Boot æä¾›äº†å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ</h3><ul>
<li><p>1ã€ç‹¬ç«‹è¿è¡Œ Spring é¡¹ç›®</p>
<p>Spring Boot å¯ä»¥ä»¥ jar åŒ…å½¢å¼ç‹¬ç«‹è¿è¡Œï¼Œè¿è¡Œä¸€ä¸ª Spring Boot é¡¹ç›®åªéœ€è¦é€šè¿‡ <code>java -jar xx.jar</code> æ¥è¿è¡Œã€‚</p>
</li>
<li><p>2ã€å†…åµŒ Servlet å®¹å™¨</p>
<p>Spring Boot å¯ä»¥é€‰æ‹©å†…åµŒ Tomcatã€Jetty æˆ–è€… Undertowï¼Œè¿™æ ·æˆ‘ä»¬æ— é¡»ä»¥ war åŒ…å½¢å¼éƒ¨ç½²é¡¹ç›®ã€‚</p>
<blockquote>
<p>ç¬¬ 2 ç‚¹æ˜¯å¯¹ç¬¬ 1 ç‚¹çš„è¡¥å……ï¼Œåœ¨ Spring Boot æœªå‡ºæ¥çš„æ—¶å€™ï¼Œå¤§å¤šæ•° Web é¡¹ç›®ï¼Œæ˜¯æ‰“åŒ…æˆ war åŒ…ï¼Œéƒ¨ç½²åˆ° Tomcatã€Jetty ç­‰å®¹å™¨ã€‚</p>
</blockquote>
</li>
<li><p>3ã€æä¾› Starter ç®€åŒ– Maven é…ç½®</p>
<p>Spring æä¾›äº†ä¸€ç³»åˆ—çš„ starter pom æ¥ç®€åŒ– Maven çš„ä¾èµ–åŠ è½½ã€‚ä¾‹å¦‚ï¼Œå½“ä½ ä½¿ç”¨äº† <code>spring-boot-starter-web</code> ï¼Œä¼šè‡ªåŠ¨åŠ å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-26/01.png" alt="`spring-boot-starter-web` çš„ pom æ–‡ä»¶"></p>
</li>
<li><p>4ã€<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ddb6e32e3faf">è‡ªåŠ¨é…ç½® Spring Bean</a></p>
<p>Spring Boot æ£€æµ‹åˆ°ç‰¹å®šç±»çš„å­˜åœ¨ï¼Œå°±ä¼šé’ˆå¯¹è¿™ä¸ªåº”ç”¨åšä¸€å®šçš„é…ç½®ï¼Œè¿›è¡Œè‡ªåŠ¨é…ç½® Bean ï¼Œè¿™æ ·ä¼šæå¤§åœ°å‡å°‘æˆ‘ä»¬è¦ä½¿ç”¨çš„é…ç½®ã€‚</p>
<p>å½“ç„¶ï¼ŒSpring Boot åªè€ƒè™‘å¤§å¤šæ•°çš„å¼€å‘åœºæ™¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åœºæ™¯ï¼Œè‹¥åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬éœ€è¦é…ç½®Bean ï¼Œè€Œ Spring Boot æ²¡æœ‰æä¾›æ”¯æŒï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®è¿›è¡Œè§£å†³ã€‚</p>
</li>
<li><p>5ã€<a target="_blank" rel="noopener" href="https://blog.csdn.net/wangshuang1631/article/details/72810412">å‡†ç”Ÿäº§çš„åº”ç”¨ç›‘æ§</a></p>
<p>Spring Boot æä¾›åŸºäº HTTPã€JMXã€SSH å¯¹è¿è¡Œæ—¶çš„é¡¹ç›®è¿›è¡Œç›‘æ§ã€‚</p>
</li>
<li><p>6ã€æ— ä»£ç ç”Ÿæˆå’Œ XML é…ç½®</p>
<p>Spring Boot æ²¡æœ‰å¼•å…¥ä»»ä½•å½¢å¼çš„ä»£ç ç”Ÿæˆï¼Œå®ƒæ˜¯ä½¿ç”¨çš„ Spring 4.0 çš„æ¡ä»¶ <code>@Condition</code> æ³¨è§£ä»¥å®ç°æ ¹æ®æ¡ä»¶è¿›è¡Œé…ç½®ã€‚åŒæ—¶ä½¿ç”¨äº† Maven /Gradle çš„<strong>ä¾èµ–ä¼ é€’è§£ææœºåˆ¶</strong>æ¥å®ç° Spring åº”ç”¨é‡Œé¢çš„è‡ªåŠ¨é…ç½®ã€‚</p>
</li>
</ul>
<h3 id="Spring-Boot-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#Spring-Boot-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="Spring Boot æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"></a>Spring Boot æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p><strong>Spring Boot çš„ä¼˜ç‚¹</strong></p>
<blockquote>
<p>ä¼˜ç‚¹å’Œ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-Boot/Interview/#">ã€ŒSpring Boot æä¾›äº†å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿã€</a> é—®é¢˜çš„ç­”æ¡ˆï¼Œæ˜¯æ¯”è¾ƒé‡å çš„ã€‚</p>
</blockquote>
<ul>
<li>1ã€ä½¿ã€ç¼–ç ã€‘å˜ç®€å•ã€‚</li>
<li>2ã€ä½¿ã€é…ç½®ã€‘å˜ç®€å•ã€‚</li>
<li>3ã€ä½¿ã€éƒ¨ç½²ã€‘å˜ç®€å•ã€‚</li>
<li>4ã€ä½¿ã€ç›‘æ§ã€‘å˜ç®€å•ã€‚</li>
</ul>
<p><strong>Spring Boot çš„ç¼ºç‚¹</strong></p>
<blockquote>
<p>å¦‚ä¸‹çš„ç¼ºç‚¹ï¼ŒåŸºäº <a target="_blank" rel="noopener" href="https://blog.csdn.net/fly_zhyu/article/details/76407830">ã€ŠSpring Bootæµ…è°ˆ(æ˜¯ä»€ä¹ˆ/èƒ½å¹²ä»€ä¹ˆ/ä¼˜ç‚¹å’Œä¸è¶³)ã€‹</a>ï¼Œè€ƒè™‘çš„å‡ºå‘ç‚¹æ˜¯æŠŠ Spring Boot ä½œä¸ºå¾®æœåŠ¡çš„æ¡†æ¶çš„é€‰å‹çš„è§’åº¦è¿›è¡Œè€ƒè™‘ã€‚</p>
</blockquote>
<ul>
<li><p>1ã€æ²¡æœ‰æä¾›ç›¸åº”çš„ã€æœåŠ¡å‘ç°å’Œæ³¨å†Œã€‘çš„é…å¥—åŠŸèƒ½ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šå½“ç„¶ï¼Œå®é™…ä¸Š Spring Boot æœ¬èº«æ˜¯ä¸éœ€è¦æä¾›è¿™æ ·çš„åŠŸèƒ½ã€‚æœåŠ¡å‘ç°å’Œæ³¨å†Œçš„åŠŸèƒ½ï¼Œæ˜¯åœ¨ Spring Cloud ä¸­è¿›è¡Œæä¾›ã€‚</p>
</blockquote>
</li>
<li><p>2ã€è‡ªèº«çš„ acturator æ‰€æä¾›çš„ã€ç›‘æ§åŠŸèƒ½ã€‘ï¼Œä¹Ÿéœ€è¦ä¸ç°æœ‰çš„ç›‘æ§å¯¹æ¥ã€‚</p>
</li>
<li><p>3ã€æ²¡æœ‰é…å¥—çš„ã€å®‰å…¨ç®¡æ§ã€‘æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šå…³äºè¿™ä¸€ç‚¹ï¼Œè‰¿è‰¿ä¹Ÿæœ‰ç‚¹è¿·ç³Šï¼ŒSpring Security æ˜¯å¯ä»¥æ¯”è¾ƒæ–¹ä¾¿çš„é›†æˆåˆ° Spring Boot ä¸­ï¼Œæ‰€ä»¥ä¸æ™“å¾—è¿™é‡Œçš„ã€å®‰å…¨ç®¡æ§ã€‘çš„å®šä¹‰æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥è¿™ä¸€ç‚¹ï¼Œé¢è¯•çš„æ—¶å€™å›ç­”ï¼Œå¯ä»¥æš‚æ—¶å…ˆçœç•¥ã€‚</p>
</blockquote>
</li>
<li><p>4ã€å¯¹äº REST çš„è½åœ°ï¼Œè¿˜éœ€è¦è‡ªè¡Œç»“åˆå®é™…è¿›è¡Œ URI çš„è§„èŒƒåŒ–å·¥ä½œ</p>
<blockquote>
<p>è‰¿è‰¿ï¼šè¿™ä¸ªä¸¥æ ¼æ¥è¯´ï¼Œä¸ç®—ç¼ºç‚¹ã€‚æœ¬èº«ï¼Œæ˜¯è§„èŒƒçš„èŒƒç•´ã€‚</p>
</blockquote>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œä¸Šé¢çš„ç¼ºç‚¹ï¼Œä¸¥æ ¼æ¥è¯´å¯èƒ½ä¸å¤ªé€‚åˆåœ¨é¢è¯•ä¸­å›ç­”ã€‚è‰¿è‰¿è®¤ä¸ºï¼ŒSpring Boot çš„ç¼ºç‚¹ä¸»è¦æ˜¯ï¼Œå› ä¸ºè‡ªåŠ¨é…ç½® Spring Bean çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•çŸ¥é“ï¼Œå“ªäº› Bean è¢«è¿›è¡Œåˆ›å»ºäº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è‡ªå®šä¹‰ä¸€äº› Bean ï¼Œå¯èƒ½å­˜åœ¨å†²çªï¼Œæˆ–è€…ä¸çŸ¥é“å®é™…æ³¨å…¥çš„æƒ…å†µã€‚</p>
<h3 id="Spring-Bootã€Spring-MVC-å’Œ-Spring-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Spring-Bootã€Spring-MVC-å’Œ-Spring-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Spring Bootã€Spring MVC å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Spring Bootã€Spring MVC å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Spring çš„å®Œæ•´åå­—ï¼Œåº”è¯¥æ˜¯ Spring Framework ã€‚å®ƒæä¾›äº†å¤šä¸ªæ¨¡å—ï¼ŒSpring IoCã€Spring AOPã€Spring MVC ç­‰ç­‰ã€‚æ‰€ä»¥ï¼ŒSpring MVC æ˜¯ Spring Framework ä¼—å¤šæ¨¡å—ä¸­çš„ä¸€ä¸ªã€‚</p>
<p>è€Œ Spring Boot æ˜¯æ„é€ åœ¨ Spring Framework ä¹‹ä¸Šçš„ Boot å¯åŠ¨å™¨ï¼Œæ—¨åœ¨æ›´å®¹æ˜“çš„é…ç½®ä¸€ä¸ª Spring é¡¹ç›®ã€‚</p>
<p>æ€»ç»“è¯´æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-26/02.png" alt="Spring Boot å¯¹æ¯” Spring MVC å¯¹æ¯” Spring ï¼Ÿ"></p>
<h3 id="Spring-Boot-ä¸­çš„-Starter-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-Boot-ä¸­çš„-Starter-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring Boot ä¸­çš„ Starter æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring Boot ä¸­çš„ Starter æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ¯”è¾ƒ<strong>é€šä¿—</strong>çš„è¯´æ³•ï¼š</p>
<blockquote>
<p>FROM <a target="_blank" rel="noopener" href="https://www.cnblogs.com/EasonJim/p/7615801.html">ã€ŠSpring Boot ä¸­ Starter æ˜¯ä»€ä¹ˆã€‹</a></p>
<p>æ¯”å¦‚æˆ‘ä»¬è¦åœ¨ Spring Boot ä¸­å¼•å…¥ Web MVC çš„æ”¯æŒæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥è¿™ä¸ªæ¨¡å— <code>spring-boot-starter-web</code> ï¼Œè€Œè¿™ä¸ªæ¨¡å—å¦‚æœè§£å‹åŒ…å‡ºæ¥ä¼šå‘ç°é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåªå®šä¹‰äº†ä¸€äº› <strong>POM</strong> ä¾èµ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<a target="_blank" rel="noopener" href="http://static2.iocoder.cn/images/Spring/2018-12-26/03.png"><img src="http://static2.iocoder.cn/images/Spring/2018-12-26/03.png" alt="`spring-boot-starter-web`"></a><code>spring-boot-starter-web</code></p>
<p>ç»è¿‡ç ”ç©¶ï¼ŒStarter ä¸»è¦ç”¨æ¥ç®€åŒ–ä¾èµ–ç”¨çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰åšMVCæ—¶è¦å¼•å…¥æ—¥å¿—ç»„ä»¶ï¼Œé‚£ä¹ˆéœ€è¦å»æ‰¾åˆ°log4jçš„ç‰ˆæœ¬ï¼Œç„¶åå¼•å…¥ï¼Œç°åœ¨æœ‰äº†Starterä¹‹åï¼Œç›´æ¥ç”¨è¿™ä¸ªä¹‹åï¼Œlog4jå°±è‡ªåŠ¨å¼•å…¥äº†ï¼Œä¹Ÿä¸ç”¨å…³å¿ƒç‰ˆæœ¬è¿™äº›é—®é¢˜ã€‚</p>
</blockquote>
<p>æ¯”è¾ƒ<strong>ä¹¦å</strong>çš„è¯´æ³•ï¼š</p>
<blockquote>
<p>FROM <a target="_blank" rel="noopener" href="http://www.importnew.com/27101.html">ã€ŠSpring Boot Starter ä»‹ç»ã€‹</a></p>
<p>ä¾èµ–ç®¡ç†æ˜¯ä»»ä½•å¤æ‚é¡¹ç›®çš„å…³é”®éƒ¨åˆ†ã€‚ä»¥æ‰‹åŠ¨çš„æ–¹å¼æ¥å®ç°ä¾èµ–ç®¡ç†ä¸å¤ªç°å®ï¼Œä½ å¾—èŠ±æ›´å¤šæ—¶é—´ï¼ŒåŒæ—¶ä½ åœ¨é¡¹ç›®çš„å…¶ä»–é‡è¦æ–¹é¢èƒ½ä»˜å‡ºçš„æ—¶é—´å°±ä¼šå˜å¾—è¶Šå°‘ã€‚</p>
<p>Spring Boot Starter å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè¯ç”Ÿçš„ã€‚Starter <strong>POM</strong> æ˜¯ä¸€ç»„æ–¹ä¾¿çš„ä¾èµ–æè¿°ç¬¦ï¼Œæ‚¨å¯ä»¥å°†å…¶åŒ…å«åœ¨åº”ç”¨ç¨‹åºä¸­ã€‚æ‚¨å¯ä»¥è·å¾—æ‰€éœ€çš„æ‰€æœ‰ Spring å’Œç›¸å…³æŠ€æœ¯çš„ä¸€ç«™å¼æœåŠ¡ï¼Œæ— éœ€é€šè¿‡ç¤ºä¾‹ä»£ç æœç´¢å’Œå¤åˆ¶ç²˜è´´ä¾èµ–ã€‚</p>
</blockquote>
<h3 id="Spring-Boot-å¸¸ç”¨çš„-Starter-æœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-Boot-å¸¸ç”¨çš„-Starter-æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring Boot å¸¸ç”¨çš„ Starter æœ‰å“ªäº›ï¼Ÿ"></a>Spring Boot å¸¸ç”¨çš„ Starter æœ‰å“ªäº›ï¼Ÿ</h3><ul>
<li><code>spring-boot-starter-web</code> ï¼šæä¾› Spring MVC + å†…åµŒçš„ Tomcat ã€‚</li>
<li><code>spring-boot-starter-data-jpa</code> ï¼šæä¾› Spring JPA + Hibernate ã€‚</li>
<li><code>spring-boot-starter-data-redis</code> ï¼šæä¾› Redis ã€‚</li>
<li><code>mybatis-spring-boot-starter</code> ï¼šæä¾› MyBatis ã€‚</li>
</ul>
<h3 id="å¦‚ä½•ç»Ÿä¸€å¼•å…¥-Spring-Boot-ç‰ˆæœ¬ï¼Ÿ"><a href="#å¦‚ä½•ç»Ÿä¸€å¼•å…¥-Spring-Boot-ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç»Ÿä¸€å¼•å…¥ Spring Boot ç‰ˆæœ¬ï¼Ÿ"></a>å¦‚ä½•ç»Ÿä¸€å¼•å…¥ Spring Boot ç‰ˆæœ¬ï¼Ÿ</h3><p><strong>ç›®å‰æœ‰ä¸¤ç§æ–¹å¼</strong>ã€‚</p>
<p>â‘  æ–¹å¼ä¸€ï¼šç»§æ‰¿ <code>spring-boot-starter-parent</code> é¡¹ç›®ã€‚é…ç½®ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.0.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure>

<p>â‘¡ æ–¹å¼äºŒï¼šå¯¼å…¥ spring-boot-dependencies é¡¹ç›®ä¾èµ–ã€‚é…ç½®ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.0.0.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">            &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">            &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line">&lt;&#x2F;dependencyManagement&gt;</span><br></pre></td></tr></table></figure>

<p><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<p>å› ä¸ºä¸€èˆ¬æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œéƒ½æœ‰é¡¹ç›®è‡ªå·±çš„ Maven parent é¡¹ç›®ï¼Œæ‰€ä»¥ã€æ–¹å¼ä¸€ã€‘æ˜¾ç„¶ä¼šå­˜åœ¨å†²çªã€‚</p>
<p>æ‰€ä»¥å®é™…åœºæ™¯ä¸‹ï¼Œæ¨èä½¿ç”¨ã€æ–¹å¼äºŒã€‘ã€‚</p>
<p>è¯¦ç»†çš„ï¼Œæ¨èé˜…è¯» <a target="_blank" rel="noopener" href="https://blog.csdn.net/rainbow702/article/details/55046298">ã€ŠSpring Boot ä¸ä½¿ç”¨é»˜è®¤çš„ parentï¼Œæ”¹ç”¨è‡ªå·±çš„é¡¹ç›®çš„ parentã€‹</a> æ–‡ç« ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨ä½¿ç”¨ Spring Cloud çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼ã€‚</p>
<h3 id="è¿è¡Œ-Spring-Boot-æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"><a href="#è¿è¡Œ-Spring-Boot-æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="è¿è¡Œ Spring Boot æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"></a>è¿è¡Œ Spring Boot æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h3><ul>
<li>1ã€æ‰“åŒ…æˆ Fat Jar ï¼Œç›´æ¥ä½¿ç”¨ <code>java -jar</code> è¿è¡Œã€‚ç›®å‰ä¸»æµçš„åšæ³•ï¼Œæ¨èã€‚</li>
<li>2ã€åœ¨ IDEA æˆ– Eclipse ä¸­ï¼Œç›´æ¥è¿è¡Œåº”ç”¨çš„ Spring Boot å¯åŠ¨ç±»çš„ <code>#main(String[] args)</code> å¯åŠ¨ã€‚é€‚ç”¨äºå¼€å‘è°ƒè¯•åœºæ™¯ã€‚</li>
<li>3ã€å¦‚æœæ˜¯ Web é¡¹ç›®ï¼Œå¯ä»¥æ‰“åŒ…æˆ War åŒ…ï¼Œä½¿ç”¨å¤–éƒ¨ Tomcat æˆ– Jetty ç­‰å®¹å™¨ã€‚</li>
</ul>
<h3 id="å¦‚ä½•æ‰“åŒ…-Spring-Boot-é¡¹ç›®ï¼Ÿ"><a href="#å¦‚ä½•æ‰“åŒ…-Spring-Boot-é¡¹ç›®ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ‰“åŒ… Spring Boot é¡¹ç›®ï¼Ÿ"></a>å¦‚ä½•æ‰“åŒ… Spring Boot é¡¹ç›®ï¼Ÿ</h3><p>é€šè¿‡å¼•å…¥ <code>spring-boot-maven-plugin</code> æ’ä»¶ï¼Œæ‰§è¡Œ <code>mvn clean package</code> å‘½ä»¤ï¼Œå°† Spring Boot é¡¹ç›®æ‰“æˆä¸€ä¸ª Fat Jar ã€‚åç»­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>java -jar</code> è¿è¡Œã€‚</p>
<p>å…³äº <code>spring-boot-maven-plugin</code> æ’ä»¶ï¼Œæ›´å¤šè¯¦ç»†çš„å¯ä»¥çœ‹çœ‹ [ã€Šåˆ›å»ºå¯æ‰§è¡Œ jarã€‹](<a target="_blank" rel="noopener" href="https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/II">https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/II</a>. Getting started/11.5. Creating an executable jar.html) ã€‚</p>
<h3 id="å¦‚æœæ›´æ”¹å†…åµŒ-Tomcat-çš„ç«¯å£ï¼Ÿ"><a href="#å¦‚æœæ›´æ”¹å†…åµŒ-Tomcat-çš„ç«¯å£ï¼Ÿ" class="headerlink" title="å¦‚æœæ›´æ”¹å†…åµŒ Tomcat çš„ç«¯å£ï¼Ÿ"></a>å¦‚æœæ›´æ”¹å†…åµŒ Tomcat çš„ç«¯å£ï¼Ÿ</h3><ul>
<li><p>æ–¹å¼ä¸€ï¼Œä¿®æ”¹ <code>application.properties</code> é…ç½®æ–‡ä»¶çš„ <code>server.port</code> å±æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port&#x3D;9090</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–¹å¼äºŒï¼Œé€šè¿‡å¯åŠ¨å‘½ä»¤å¢åŠ  <code>server.port</code> å‚æ•°è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar --server.port&#x3D;9090</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>å½“ç„¶ï¼Œä»¥ä¸Šçš„æ–¹å¼ï¼Œä¸ä»…ä»…é€‚ç”¨äº Tomcat ï¼Œä¹Ÿé€‚ç”¨äº Jettyã€Undertow ç­‰æœåŠ¡å™¨ã€‚</p>
<h3 id="å¦‚ä½•é‡æ–°åŠ è½½-Spring-Boot-ä¸Šçš„æ›´æ”¹ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Ÿ"><a href="#å¦‚ä½•é‡æ–°åŠ è½½-Spring-Boot-ä¸Šçš„æ›´æ”¹ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•é‡æ–°åŠ è½½ Spring Boot ä¸Šçš„æ›´æ”¹ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Ÿ"></a>å¦‚ä½•é‡æ–°åŠ è½½ Spring Boot ä¸Šçš„æ›´æ”¹ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Ÿ</h3><p>ä¸€å…±æœ‰ä¸‰ç§æ–¹å¼ï¼Œå¯ä»¥å®ç°æ•ˆæœï¼š</p>
<ul>
<li><p>ã€æ¨èã€‘<code>spring-boot-devtools</code> æ’ä»¶ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå·¥å…·éœ€è¦é…ç½® IDEA çš„è‡ªåŠ¨ç¼–è¯‘ã€‚</p>
</li>
<li><p>Spring Loaded æ’ä»¶ã€‚</p>
<blockquote>
<p>Spring Boot 2.X åï¼Œå®˜æ–¹å®£å¸ƒä¸å†æ”¯æŒ Spring Loaded æ’ä»¶ çš„æ›´æ–°ï¼Œæ‰€ä»¥åŸºæœ¬å¯ä»¥æ— è§†å®ƒäº†ã€‚</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bab43eaa4e14">JRebel</a> æ’ä»¶ï¼Œéœ€è¦ä»˜è´¹ã€‚</p>
</li>
</ul>
<p>å…³äºå¦‚ä½•ä½¿ç”¨ <code>spring-boot-devtools</code> å’Œ Spring Loaded æ’ä»¶ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000014488100">ã€ŠSpring Boot å­¦ä¹ ç¬”è®°ï¼šSpring Boot Developer Tools ä¸çƒ­éƒ¨ç½²ã€‹</a> ã€‚</p>
<h3 id="Spring-Boot-çš„é…ç½®æ–‡ä»¶æœ‰å“ªå‡ ç§æ ¼å¼ï¼Ÿ"><a href="#Spring-Boot-çš„é…ç½®æ–‡ä»¶æœ‰å“ªå‡ ç§æ ¼å¼ï¼Ÿ" class="headerlink" title="Spring Boot çš„é…ç½®æ–‡ä»¶æœ‰å“ªå‡ ç§æ ¼å¼ï¼Ÿ"></a>Spring Boot çš„é…ç½®æ–‡ä»¶æœ‰å“ªå‡ ç§æ ¼å¼ï¼Ÿ</h3><p>Spring Boot ç›®å‰æ”¯æŒä¸¤ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼š</p>
<ul>
<li><p><code>.properties</code> æ ¼å¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port &#x3D; 9090</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>.yaml</code> æ ¼å¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">    port: 9090</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<p>å¯èƒ½æœ‰èƒ–å‹ä¸äº†è§£ <strong>YAML æ ¼å¼</strong>ï¼Ÿ</p>
<p>YAML æ˜¯ä¸€ç§äººç±»å¯è¯»çš„æ•°æ®åºåˆ—åŒ–è¯­è¨€ï¼Œå®ƒé€šå¸¸ç”¨äºé…ç½®æ–‡ä»¶ã€‚</p>
<ul>
<li>ä¸ Properties æ–‡ä»¶ç›¸æ¯”ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¤æ‚çš„å±æ€§ YAML æ–‡ä»¶å°±æ›´åŠ <strong>ç»“æ„åŒ–</strong>ã€‚ä»ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º YAML å…·æœ‰<strong>åˆ†å±‚</strong>é…ç½®æ•°æ®ã€‚</li>
<li>å½“ç„¶ YAML åœ¨ Spring ä¼šå­˜åœ¨ä¸€ä¸ªç¼ºé™·ï¼Œ<code>@PropertySource</code>æ³¨è§£ä¸æ”¯æŒè¯»å– YAML é…ç½®æ–‡ä»¶ï¼Œä»…æ”¯æŒ Properties é…ç½®æ–‡ä»¶ã€‚<ul>
<li>ä¸è¿‡è¿™ä¸ªé—®é¢˜ä¹Ÿä¸å¤§ï¼Œå¯ä»¥éº»çƒ¦ä¸€ç‚¹ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://blog.csdn.net/lafengwnagzi/article/details/74178374"><code>@Value</code></a> æ³¨è§£ï¼Œæ¥è¯»å– YAML é…ç½®é¡¹ã€‚</li>
</ul>
</li>
</ul>
<p>å®é™…åœºæ™¯ä¸‹ï¼Œè‰¿è‰¿ç›¸å¯¹æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨ Properties é…ç½®æ–‡ä»¶ã€‚ä¸ªäººå–œæ¬¢~å½“ç„¶ï¼ŒYAML å·²ç»è¶Šæ¥è¶Šæµè¡Œäº†ã€‚</p>
<h3 id="Spring-Boot-é»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-Boot-é»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring Boot é»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring Boot é»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å¯¹äº Spring Boot åº”ç”¨ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶æ ¹ç›®å½•ä¸‹çš„ <strong>application</strong> é…ç½®æ–‡ä»¶ï¼Œå½“ç„¶å¯ä»¥æ˜¯ Properties æ ¼å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ YAML æ ¼å¼ã€‚</p>
<p>å¯èƒ½æœ‰èƒ–å‹è¯´ï¼Œæˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°é¢è¯•é¢˜ä¸­ï¼Œè¯´è¿˜æœ‰ä¸€ä¸ªæ ¹ç›®å½•ä¸‹çš„ <strong>bootstrap</strong> é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªæ˜¯ Spring Cloud æ–°å¢çš„å¯åŠ¨é…ç½®æ–‡ä»¶ï¼Œ<a target="_blank" rel="noopener" href="https://my.oschina.net/freeskyjs/blog/1843048">éœ€è¦å¼•å…¥ <code>spring-cloud-context</code> ä¾èµ–åï¼Œæ‰ä¼šè¿›è¡ŒåŠ è½½</a>ã€‚å®ƒçš„ç‰¹ç‚¹å’Œç”¨é€”ä¸»è¦æ˜¯ï¼š</p>
<blockquote>
<p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://my.oschina.net/neverforget/blog/1525947">ã€ŠSpring Cloud ä¸­é…ç½®æ–‡ä»¶å bootstrap.yml å’Œ application.yml åŒºåˆ«ã€‹</a> æ–‡ç« ã€‚</p>
</blockquote>
<ul>
<li>ã€ç‰¹ç‚¹ã€‘å› ä¸º bootstrap ç”±çˆ¶ ApplicationContext åŠ è½½ï¼Œæ¯” application ä¼˜å…ˆåŠ è½½ã€‚</li>
<li>ã€ç‰¹ç‚¹ã€‘å› ä¸º bootstrap ä¼˜å…ˆäº application åŠ è½½ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å®ƒè¦†ç›–ã€‚</li>
<li>ã€ç”¨é€”ã€‘ä½¿ç”¨é…ç½®ä¸­å¿ƒ Spring Cloud Config æ—¶ï¼Œéœ€è¦åœ¨ bootstrap ä¸­é…ç½®é…ç½®ä¸­å¿ƒçš„åœ°å€ï¼Œä»è€Œå®ç°çˆ¶ ApplicationContext åŠ è½½æ—¶ï¼Œä»é…ç½®ä¸­å¿ƒæ‹‰å–ç›¸åº”çš„é…ç½®åˆ°åº”ç”¨ä¸­ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œ<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">ã€ŠAppendix A. Common application propertiesã€‹</a> ä¸­ï¼Œæœ‰ application é…ç½®æ–‡ä»¶çš„é€šç”¨å±æ€§åˆ—è¡¨ã€‚</p>
<h3 id="Spring-Boot-å¦‚ä½•å®šä¹‰å¤šå¥—ä¸åŒç¯å¢ƒé…ç½®ï¼Ÿ"><a href="#Spring-Boot-å¦‚ä½•å®šä¹‰å¤šå¥—ä¸åŒç¯å¢ƒé…ç½®ï¼Ÿ" class="headerlink" title="Spring Boot å¦‚ä½•å®šä¹‰å¤šå¥—ä¸åŒç¯å¢ƒé…ç½®ï¼Ÿ"></a>Spring Boot å¦‚ä½•å®šä¹‰å¤šå¥—ä¸åŒç¯å¢ƒé…ç½®ï¼Ÿ</h3><p>å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://blog.csdn.net/top_code/article/details/78570047">ã€ŠSpring Boot æ•™ç¨‹ - Spring Boot Profiles å®ç°å¤šç¯å¢ƒä¸‹é…ç½®åˆ‡æ¢ã€‹</a> ä¸€æ–‡ã€‚</p>
<p>ä½†æ˜¯ï¼Œéœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶çš„å®‰å…¨æ€§ï¼Œæ˜¾ç„¶æˆ‘ä»¬ä¸èƒ½ä¸”ä¸åº”è¯¥æŠŠç”Ÿäº§çš„é…ç½®æ”¾åˆ°é¡¹ç›®çš„ Git ä»“åº“ä¸­è¿›è¡Œç®¡ç†ã€‚é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<ul>
<li>æ–¹æ¡ˆä¸€ï¼Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ”¾åœ¨ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡å™¨ä¸­ï¼Œä»¥ <code>java -jar myproject.jar --spring.config.location=/xxx/yyy/application-prod.properties</code> å‘½ä»¤ï¼Œè®¾ç½® å‚æ•° <code>spring.config.location</code> æŒ‡å‘é…ç½®æ–‡ä»¶ã€‚</li>
<li>æ–¹æ¡ˆäºŒï¼Œä½¿ç”¨ Jenkins åœ¨æ‰§è¡Œæ‰“åŒ…ï¼Œé…ç½®ä¸Š Maven Profile åŠŸèƒ½ï¼Œä½¿ç”¨æœåŠ¡å™¨ä¸Šçš„é…ç½®æ–‡ä»¶ã€‚æ•´ä½“æ¥è¯´ï¼Œå’Œã€æ–¹æ¡ˆä¸€ã€‘çš„å·®å¼‚æ˜¯ï¼Œå°†é…ç½®æ–‡ä»¶æ‰“åŒ…è¿›äº† Jar åŒ…ä¸­ã€‚</li>
<li>æ–¹æ¡ˆä¸‰ï¼Œä½¿ç”¨é…ç½®ä¸­å¿ƒã€‚</li>
</ul>
<h3 id="Spring-Boot-é…ç½®åŠ è½½é¡ºåºï¼Ÿ"><a href="#Spring-Boot-é…ç½®åŠ è½½é¡ºåºï¼Ÿ" class="headerlink" title="Spring Boot é…ç½®åŠ è½½é¡ºåºï¼Ÿ"></a>Spring Boot é…ç½®åŠ è½½é¡ºåºï¼Ÿ</h3><p>åœ¨ Spring Boot ä¸­ï¼Œé™¤äº†æˆ‘ä»¬å¸¸ç”¨çš„ application é…ç½®æ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼š</p>
<ul>
<li>ç³»ç»Ÿç¯å¢ƒå˜é‡</li>
<li>å‘½ä»¤è¡Œå‚æ•°</li>
<li>ç­‰ç­‰â€¦</li>
</ul>
<p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">ã€ŠExternalized Configurationã€‹</a> æ–‡æ¡£ï¼Œæˆ‘ä»¬æ•´ç†é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li><p>spring-boot-devtools ä¾èµ–çš„ spring-boot-devtools.properties é…ç½®æ–‡ä»¶ã€‚</p>
<blockquote>
<p>è¿™ä¸ªç°å¸¸å°ä¼—ï¼Œå…·ä½“è¯´æ˜å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://blog.csdn.net/u011499747/article/details/71746325">ã€ŠSpring Bootå‚è€ƒæ–‡æ¡£ï¼ˆ12ï¼‰å¼€å‘è€…å·¥å…·ã€‹</a> ï¼Œå»ºè®®æ— è§†ã€‚</p>
</blockquote>
</li>
<li><p>å•å…ƒæµ‹è¯•ä¸Šçš„ @TestPropertySource å’Œ @SpringBootTest æ³¨è§£æŒ‡å®šçš„å‚æ•°ã€‚</p>
<blockquote>
<p>å‰è€…çš„ä¼˜å…ˆçº§é«˜äºåè€…ã€‚å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000010854607">ã€ŠSpringã€Spring Boot å’ŒTestNG æµ‹è¯•æŒ‡å— - @TestPropertySourceã€‹</a> ä¸€æ–‡ã€‚</p>
</blockquote>
</li>
<li><p>å‘½ä»¤è¡ŒæŒ‡å®šçš„å‚æ•°ã€‚ä¾‹å¦‚ <code>java -jar springboot.jar --server.port=9090</code> ã€‚</p>
</li>
<li><p>å‘½ä»¤è¡Œä¸­çš„ <code>spring.application.json</code> æŒ‡å®šå‚æ•°ã€‚ä¾‹å¦‚ <code>java -Dspring.application.json=&#39;&#123;&quot;name&quot;:&quot;Java&quot;&#125;&#39; -jar springboot.jar</code> ã€‚</p>
</li>
<li><p>ServletConfig åˆå§‹åŒ–å‚æ•°ã€‚</p>
</li>
<li><p>ServletContext åˆå§‹åŒ–å‚æ•°ã€‚</p>
</li>
<li><p>JNDI å‚æ•°ã€‚ä¾‹å¦‚ <code>java:comp/env</code> ã€‚</p>
</li>
<li><p>Java ç³»ç»Ÿå˜é‡ï¼Œå³ <code>System#getProperties()</code> æ–¹æ³•å¯¹åº”çš„ã€‚</p>
</li>
<li><p>æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚</p>
</li>
<li><p>RandomValuePropertySource é…ç½®çš„ <code>random.*</code> å±æ€§å¯¹åº”çš„å€¼ã€‚</p>
</li>
<li><p>Jar <strong>å¤–éƒ¨</strong>çš„å¸¦æŒ‡å®š profile çš„ application é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>application-&#123;profile&#125;.yaml</code> ã€‚</p>
</li>
<li><p>Jar <strong>å†…éƒ¨</strong>çš„å¸¦æŒ‡å®š profile çš„ application é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>application-&#123;profile&#125;.yaml</code> ã€‚</p>
</li>
<li><p>Jar <strong>å¤–éƒ¨</strong> application é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>application.yaml</code> ã€‚</p>
</li>
<li><p>Jar <strong>å†…éƒ¨</strong> application é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>application.yaml</code> ã€‚</p>
</li>
<li><p>åœ¨è‡ªå®šä¹‰çš„ <code>@Configuration</code> ç±»ä¸­å®šäºçš„ <code>@PropertySource</code> ã€‚</p>
</li>
<li><p>å¯åŠ¨çš„ main æ–¹æ³•ä¸­ï¼Œå®šä¹‰çš„é»˜è®¤é…ç½®ã€‚å³é€šè¿‡ <code>SpringApplication#setDefaultProperties(Map defaultProperties)</code> æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚</p>
</li>
</ol>
<p>å˜¿å˜¿ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¤šå¾ˆé•¿ï¼Œä¸ç”¨çœŸçš„å»è®°ä½ã€‚</p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œé¢è¯•å®˜ä¸ä¼šå› ä¸ºè¿™ä¸ªé¢˜ç›®å›ç­”çš„ä¸å¥½ï¼Œå¯¹ä½ æ‰£åˆ†ã€‚</li>
<li>å®é™…ä½¿ç”¨æ—¶ï¼Œåšä¸‹æµ‹è¯•å³å¯ã€‚</li>
<li>æ¯ä¸€ç§é…ç½®æ–¹å¼çš„è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000015069140">ã€ŠSpring Boot å‚è€ƒæŒ‡å—ï¼ˆå¤–éƒ¨åŒ–é…ç½®ï¼‰ã€‹</a> ã€‚</li>
</ul>
<h3 id="Spring-Boot-æœ‰å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ"><a href="#Spring-Boot-æœ‰å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ" class="headerlink" title="Spring Boot æœ‰å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ"></a>Spring Boot æœ‰å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ</h3><p>å’Œ Spring ä¸€æ ·ï¼Œä¸€å…±æä¾›äº†ä¸‰ç§æ–¹å¼ã€‚</p>
<ul>
<li><p>1ã€XML é…ç½®æ–‡ä»¶ã€‚</p>
<p>Bean æ‰€éœ€çš„ä¾èµ–é¡¹å’ŒæœåŠ¡åœ¨ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«è®¸å¤š bean å®šä¹‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é…ç½®é€‰é¡¹ã€‚å®ƒä»¬é€šå¸¸ä»¥ bean æ ‡ç­¾å¼€å¤´ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.edureka.firstSpring.StudentBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Edureka&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2ã€æ³¨è§£é…ç½®ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡åœ¨ç›¸å…³çš„ç±»ï¼Œæ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£ï¼Œå°† Bean é…ç½®ä¸ºç»„ä»¶ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ XML æ¥æè¿° Bean è£…é…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- bean definitions go here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3ã€Java Config é…ç½®ã€‚</p>
<p>Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ @Bean å’Œ @Configuration æ¥å®ç°ã€‚</p>
<ul>
<li><p><code>@Bean</code> æ³¨è§£æ‰®æ¼”ä¸ <code>&lt;bean /&gt;</code> å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚</p>
</li>
<li><p><code>@Configuration</code> ç±»å…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– <code>@Bean</code> æ–¹æ³•æ¥å®šä¹‰ Bean é—´ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li><p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentConfig</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StudentBean <span class="title">myStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StudentBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ ğŸ˜ˆ</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç›®å‰ä¸»è¦ä½¿ç”¨ <strong>Java Config</strong> é…ç½®ä¸ºä¸»ã€‚å½“ç„¶ï¼Œä¸‰ç§é…ç½®æ–¹å¼æ˜¯å¯ä»¥æ··åˆä½¿ç”¨çš„ã€‚ä¾‹å¦‚è¯´ï¼š</p>
<ul>
<li>Dubbo æœåŠ¡çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ä½¿ç”¨ XML ã€‚</li>
<li>Spring MVC è¯·æ±‚çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ä½¿ç”¨ <code>@RequestMapping</code> æ³¨è§£ã€‚</li>
<li>Spring MVC æ‹¦æˆªå™¨çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ Java Config é…ç½®ã€‚</li>
</ul>
<hr>
<p>å¦å¤–ï¼Œç°åœ¨å·²ç»æ˜¯ Spring Boot çš„å¤©ä¸‹ï¼Œæ‰€ä»¥æ›´åŠ æ˜¯ <strong>Java Config</strong> é…ç½®ä¸ºä¸»ã€‚</p>
<h3 id="Spring-Boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿ"><a href="#Spring-Boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿ" class="headerlink" title="Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿ"></a>Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iocoder.skywalking.web01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Web01Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Web01Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>@SpringBootApplication</code> æ³¨è§£ï¼Œå°±æ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ã€‚</li>
</ul>
<p><code>org.springframework.boot.autoconfigure.@SpringBootApplication</code> æ³¨è§£çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SpringBootApplication.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">    excludeFilters = &#123;@Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;TypeExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">), @Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">)&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = EnableAutoConfiguration.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = EnableAutoConfiguration.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    String[] excludeName() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = ComponentScan.class,</span></span><br><span class="line"><span class="meta">        attribute = &quot;basePackages&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    String[] scanBasePackages() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = ComponentScan.class,</span></span><br><span class="line"><span class="meta">        attribute = &quot;basePackageClasses&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    Class&lt;?&gt;[] scanBasePackageClasses() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å®ƒç»„åˆäº† 3 ä¸ªæ³¨è§£ï¼Œè¯¦ç»†è¯´æ˜ï¼Œèƒ–å‹çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://blog.csdn.net/claram/article/details/75125749">ã€ŠSpring Boot ç³»åˆ—ï¼š@SpringBootApplication æ³¨è§£ã€‹</a> ã€‚</p>
</li>
<li><p><code>@Configuration</code> æ³¨è§£ï¼ŒæŒ‡å®šç±»æ˜¯ <strong>Bean å®šä¹‰</strong>çš„é…ç½®ç±»ã€‚</p>
<blockquote>
<p><code>@Configuration</code> æ³¨è§£ï¼Œæ¥è‡ª <code>spring-context</code> é¡¹ç›®ï¼Œç”¨äº Java Config ï¼Œä¸æ˜¯ Spring Boot æ–°å¸¦æ¥çš„ã€‚</p>
</blockquote>
</li>
<li><p><code>@ComponentScan</code> æ³¨è§£ï¼Œæ‰«ææŒ‡å®šåŒ…ä¸‹çš„ Bean ä»¬ã€‚</p>
<blockquote>
<p><code>@ComponentScan</code> æ³¨è§£ï¼Œæ¥è‡ª <code>spring-context</code> é¡¹ç›®ï¼Œç”¨äº Java Config ï¼Œä¸æ˜¯ Spring Boot æ–°å¸¦æ¥çš„ã€‚</p>
</blockquote>
</li>
<li><p><code>@EnableAutoConfiguration</code> æ³¨è§£ï¼Œæ‰“å¼€è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦å…³é—­æŸä¸ªç±»çš„è‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥è®¾ç½®æ³¨è§£çš„ <code>exclude</code> æˆ– <code>excludeName</code> å±æ€§ã€‚</p>
<blockquote>
<p><code>@EnableAutoConfiguration</code> æ³¨è§£ï¼Œæ¥è‡ª <code>spring-boot-autoconfigure</code> é¡¹ç›®ï¼Œ<strong>å®ƒæ‰æ˜¯ Spring Boot æ–°å¸¦æ¥çš„</strong>ã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯-Spring-Boot-è‡ªåŠ¨é…ç½®ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-Boot-è‡ªåŠ¨é…ç½®ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring Boot è‡ªåŠ¨é…ç½®ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Spring Boot è‡ªåŠ¨é…ç½®ï¼Ÿ</h3><p>åœ¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-Boot/Interview/#">ã€ŒSpring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿã€</a> ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œä½¿ç”¨ <code>@@EnableAutoConfiguration</code> æ³¨è§£ï¼Œæ‰“å¼€ Spring Boot è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ã€‚å…·ä½“å¦‚ä½•å®ç°çš„ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/464d04c36fb1">ã€Š@EnableAutoConfiguration æ³¨è§£çš„å·¥ä½œåŸç†ã€‹</a> ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5b679fbc5188251aad213110">ã€Šä¸€ä¸ªé¢è¯•é¢˜å¼•èµ·çš„ Spring Boot å¯åŠ¨è§£æã€‹</a></li>
<li>å»ºè®®ï¼Œèƒ½ä¸€è¾¹è°ƒè¯•ï¼Œä¸€è¾¹çœ‹è¿™ç¯‡æ–‡ç« ã€‚è°ƒè¯•å¾ˆç®€å•ï¼Œä»»ä¸€æ­å»ºä¸€ä¸ª Spring Boot é¡¹ç›®å³å¯ã€‚</li>
</ul>
<p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„æ€»ç»“ï¼š</p>
<ol>
<li>Spring Boot åœ¨å¯åŠ¨æ—¶æ‰«æé¡¹ç›®æ‰€ä¾èµ–çš„ jar åŒ…ï¼Œå¯»æ‰¾åŒ…å«<code>spring.factories</code> æ–‡ä»¶çš„ jar åŒ…ã€‚</li>
<li>æ ¹æ® <code>spring.factories</code> é…ç½®åŠ è½½ AutoConfigure ç±»ã€‚</li>
<li>æ ¹æ® [<code>@Conditional</code> ç­‰æ¡ä»¶æ³¨è§£](<a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring-Boot/Interview/Spring">http://svip.iocoder.cn/Spring-Boot/Interview/Spring</a> Boot æ¡ä»¶æ³¨è§£) çš„æ¡ä»¶ï¼Œè¿›è¡Œè‡ªåŠ¨é…ç½®å¹¶å°† Bean æ³¨å…¥ Spring IoC ä¸­ã€‚</li>
</ol>
<h3 id="Spring-Boot-æœ‰å“ªå‡ ç§è¯»å–é…ç½®çš„æ–¹å¼ï¼Ÿ"><a href="#Spring-Boot-æœ‰å“ªå‡ ç§è¯»å–é…ç½®çš„æ–¹å¼ï¼Ÿ" class="headerlink" title="Spring Boot æœ‰å“ªå‡ ç§è¯»å–é…ç½®çš„æ–¹å¼ï¼Ÿ"></a>Spring Boot æœ‰å“ªå‡ ç§è¯»å–é…ç½®çš„æ–¹å¼ï¼Ÿ</h3><p>Spring Boot ç›®å‰æ”¯æŒ <strong>2</strong> ç§è¯»å–é…ç½®ï¼š</p>
<ol>
<li><p><code>@Value</code> æ³¨è§£ï¼Œè¯»å–é…ç½®åˆ°å±æ€§ã€‚æœ€æœ€æœ€å¸¸ç”¨ã€‚</p>
<blockquote>
<p>å¦å¤–ï¼Œæ”¯æŒå’Œ <code>@PropertySource</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡å®šä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
</li>
<li><p><code>@ConfigurationProperties</code> æ³¨è§£ï¼Œè¯»å–é…ç½®åˆ°ç±»ä¸Šã€‚</p>
<blockquote>
<p>å¦å¤–ï¼Œæ”¯æŒå’Œ <code>@PropertySource</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡å®šä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://aoyouzi.iteye.com/blog/2422837">ã€ŠSpring Boot è¯»å–é…ç½®çš„å‡ ç§æ–¹å¼ã€‹</a> ã€‚</p>
<h3 id="ä½¿ç”¨-Spring-Boot-åï¼Œé¡¹ç›®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ"><a href="#ä½¿ç”¨-Spring-Boot-åï¼Œé¡¹ç›®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ Spring Boot åï¼Œé¡¹ç›®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ"></a>ä½¿ç”¨ Spring Boot åï¼Œé¡¹ç›®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</h3><p>æˆ‘ä»¬å…ˆæ¥è¯´è¯´é¡¹ç›®çš„åˆ†å±‚ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸»æµçš„æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>æ–¹å¼ä¸€ï¼Œ<code>controller</code>ã€<code>service</code>ã€<code>dao</code> ä¸‰ä¸ªåŒ…ï¼Œæ¯ä¸ªåŒ…ä¸‹é¢æ·»åŠ ç›¸åº”çš„ XXXControllerã€YYYServiceã€ZZZDAO ã€‚</li>
<li>æ–¹å¼äºŒï¼ŒæŒ‰ç…§ä¸šåŠ¡æ¨¡å—åˆ†åŒ…ï¼Œæ¯ä¸ªåŒ…é‡Œé¢æ”¾ Controllerã€Serviceã€DAO ç±»ã€‚ä¾‹å¦‚ï¼Œä¸šåŠ¡æ¨¡å—åˆ†æˆ <code>user</code>ã€<code>order</code>ã€<code>item</code> ç­‰ç­‰åŒ…ï¼Œåœ¨ <code>user</code> åŒ…é‡Œæ”¾ UserControllerã€UserServiceã€UserDAO ç±»ã€‚</li>
</ul>
<p>é‚£ä¹ˆï¼Œä½¿ç”¨ Spring Boot çš„é¡¹ç›®æ€ä¹ˆåˆ†å±‚å‘¢ï¼Ÿè‰¿è‰¿è‡ªå·±çš„æƒ³æ³•</p>
<ul>
<li>ç°åœ¨é¡¹ç›®éƒ½ä¼šè¿›è¡ŒæœåŠ¡åŒ–åˆ†æ‹†ï¼Œæ¯ä¸ªé¡¹ç›®ä¸ä¼šç‰¹åˆ«å¤æ‚ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ã€æ–¹å¼ä¸€ã€‘ã€‚</li>
<li>ä»¥å‰çš„é¡¹ç›®ï¼Œå¤§å¤šæ˜¯å•ä½“çš„é¡¹ç›®ï¼ŒåŠ¨åˆ™é¡¹ç›®å‡ ä¸‡åˆ°å‡ åä¸‡çš„ä»£ç ï¼Œå½“æ—¶å¤šé‡‡ç”¨ã€æ–¹å¼äºŒã€‘ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ Spring Boot é¡¹ç›®çš„ Demo ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-26/05.png" alt="Spring Boot é¡¹ç›®çš„ Demo"></p>
<h3 id="å¦‚ä½•åœ¨-Spring-Boot-å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹æ®Šçš„ä»£ç ï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Spring-Boot-å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹æ®Šçš„ä»£ç ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Spring Boot å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹æ®Šçš„ä»£ç ï¼Ÿ"></a>å¦‚ä½•åœ¨ Spring Boot å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹æ®Šçš„ä»£ç ï¼Ÿ</h3><p>å¦‚æœéœ€è¦åœ¨ SpringApplication å¯åŠ¨åæ‰§è¡Œä¸€äº›ç‰¹æ®Šçš„ä»£ç ï¼Œä½ å¯ä»¥å®ç° ApplicationRunner æˆ– CommandLineRunner æ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£å·¥ä½œæ–¹å¼ç›¸åŒï¼Œéƒ½åªæä¾›å•ä¸€çš„ run æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä»…åœ¨ <code>SpringApplication#run(...)</code> æ–¹æ³•<strong>å®Œæˆä¹‹å‰è°ƒç”¨</strong>ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¤ªä¼šä½¿ç”¨è¯¥åŠŸèƒ½ã€‚å¦‚æœçœŸéœ€è¦ï¼Œèƒ–å‹å¯ä»¥è¯¦ç»†çœ‹çœ‹ [ã€Šä½¿ç”¨ ApplicationRunner æˆ– CommandLineRunner ã€‹](<a target="_blank" rel="noopener" href="https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/IV">https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/IV</a>. Spring Boot features/23.8 Using the ApplicationRunner or CommandLineRunner.html) ã€‚</p>
<h3 id="Spring-Boot-2-X-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿ"><a href="#Spring-Boot-2-X-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿ" class="headerlink" title="Spring Boot 2.X æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿ"></a>Spring Boot 2.X æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿ</h3><ol>
<li>èµ·æ­¥ JDK 8 å’Œæ”¯æŒ JDK 9</li>
<li>ç¬¬ä¸‰æ–¹åº“çš„å‡çº§</li>
<li>Reactive Spring</li>
<li>HTTP/2 æ”¯æŒ</li>
<li>é…ç½®å±æ€§çš„ç»‘å®š</li>
<li>Gradle æ’ä»¶</li>
<li>Actuator æ”¹è¿›</li>
<li>æ•°æ®æ”¯æŒçš„æ”¹è¿›</li>
<li>Web çš„æ”¹è¿›</li>
<li>æ”¯æŒ Quartz è‡ªåŠ¨é…ç½®</li>
<li>æµ‹è¯•çš„æ”¹è¿›</li>
<li>å…¶å®ƒâ€¦</li>
</ol>
<p>è¯¦ç»†çš„è¯´æ˜ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features">ã€ŠSpring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ã€‹</a> ã€‚</p>
<h2 id="æ•´åˆç¯‡"><a href="#æ•´åˆç¯‡" class="headerlink" title="æ•´åˆç¯‡"></a>æ•´åˆç¯‡</h2><h3 id="å¦‚ä½•å°†å†…åµŒæœåŠ¡å™¨æ¢æˆ-Jetty-ï¼Ÿ"><a href="#å¦‚ä½•å°†å†…åµŒæœåŠ¡å™¨æ¢æˆ-Jetty-ï¼Ÿ" class="headerlink" title="å¦‚ä½•å°†å†…åµŒæœåŠ¡å™¨æ¢æˆ Jetty ï¼Ÿ"></a>å¦‚ä½•å°†å†…åµŒæœåŠ¡å™¨æ¢æˆ Jetty ï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>spring-boot-starter-web</code> æ¨¡å—ä½¿ç”¨ Tomcat ä½œä¸ºå†…åµŒçš„æœåŠ¡å™¨ã€‚æ‰€ä»¥éœ€è¦å»é™¤å¯¹ <code>spring-boot-starter-tomcat</code> æ¨¡å—çš„å¼•ç”¨ï¼Œæ·»åŠ  <code>spring-boot-starter-jetty</code> æ¨¡å—çš„å¼•ç”¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span> <span class="comment">&lt;!-- å»é™¤ Tomcat --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> <span class="comment">&lt;!-- å¼•å…¥ Jetty --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="Spring-Boot-ä¸­çš„ç›‘è§†å™¨-Actuator-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-Boot-ä¸­çš„ç›‘è§†å™¨-Actuator-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring Boot ä¸­çš„ç›‘è§†å™¨ Actuator æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring Boot ä¸­çš„ç›‘è§†å™¨ Actuator æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><code>spring-boot-actuator</code> æä¾› Spring Boot çš„ç›‘è§†å™¨åŠŸèƒ½ï¼Œå¯å¸®åŠ©æˆ‘ä»¬è®¿é—®ç”Ÿäº§ç¯å¢ƒä¸­æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„<strong>å½“å‰çŠ¶æ€</strong>ã€‚</p>
<ul>
<li>å…³äº Spring Boot Actuator çš„æ•™ç¨‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/af9738634a21">ã€ŠSpring Boot Actuator ä½¿ç”¨ã€‹</a> ã€‚</li>
<li>ä¸Šè¿°æ•™ç¨‹æ˜¯åŸºäº Spring Boot 1.X çš„ç‰ˆæœ¬ï¼Œå¦‚æœèƒ–å‹ä½¿ç”¨ Spring Boot 2.X çš„ç‰ˆæœ¬ï¼Œä½ å°†ä¼šå‘ç° <code>/beans</code> ç­‰ Endpoint æ˜¯ä¸å­˜åœ¨çš„ï¼Œå‚è€ƒ <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/49174700/spring-boot-2-actuator-endpoint-where-is-beans-endpoint">ã€ŠSpring boot 2 - Actuator endpoint, where is /beans endpointã€‹</a> é—®é¢˜æ¥è§£å†³ã€‚</li>
</ul>
<p><strong>å®‰å…¨æ€§</strong></p>
<p>Spring Boot 2.X é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>spring-boot-actuator</code> äº§ç”Ÿçš„ Endpoint æ˜¯æ²¡æœ‰å®‰å…¨ä¿æŠ¤çš„ï¼Œä½†æ˜¯ Actuator å¯èƒ½æš´éœ²æ•æ„Ÿä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬çš„åšæ³•æ˜¯ï¼Œå¼•å…¥ <code>spring-boot-start-security</code> ä¾èµ–ï¼Œä½¿ç”¨ Spring Security å¯¹å®ƒä»¬è¿›è¡Œå®‰å…¨ä¿æŠ¤ã€‚</p>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-MVC-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-MVC-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring MVC ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring MVC ï¼Ÿ</h3><ol>
<li><p>å¼•å…¥ <code>spring-boot-starter-web</code> çš„ä¾èµ–ã€‚</p>
</li>
<li><p>å®ç° WebMvcConfigurer æ¥å£ï¼Œå¯æ·»åŠ è‡ªå®šä¹‰çš„ Spring MVC é…ç½®ã€‚</p>
<blockquote>
<p>å› ä¸º Spring Boot 2 åŸºäº JDK 8 çš„ç‰ˆæœ¬ï¼Œè€Œ JDK 8 æä¾› <code>default</code> æ–¹æ³•ï¼Œæ‰€ä»¥ Spring Boot 2 åºŸå¼ƒäº† WebMvcConfigurerAdapter é€‚é…ç±»ï¼Œç›´æ¥ä½¿ç”¨ WebMvcConfigurer å³å¯ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcConfigurer.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** é…ç½®è·¯å¾„åŒ¹é…å™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** é…ç½®å†…å®¹è£å†³çš„ä¸€äº›é€‰é¡¹ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureContentNegotiation</span><span class="params">(ContentNegotiationConfigurer configurer)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** å¼‚æ­¥ç›¸å…³çš„é…ç½® **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureAsyncSupport</span><span class="params">(AsyncSupportConfigurer configurer)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addFormatters</span><span class="params">(FormatterRegistry registry)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æ·»åŠ æ‹¦æˆªå™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** é™æ€èµ„æºå¤„ç† **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** è§£å†³è·¨åŸŸé—®é¢˜ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** é…ç½®è§†å›¾è§£æå™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureViewResolvers</span><span class="params">(ViewResolverRegistry registry)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æ·»åŠ å‚æ•°è§£æå™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addArgumentResolvers</span><span class="params">(List&lt;HandlerMethodArgumentResolver&gt; resolvers)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æ·»åŠ è¿”å›å€¼å¤„ç†å™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">addReturnValueHandlers</span><span class="params">(List&lt;HandlerMethodReturnValueHandler&gt; handlers)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** è¿™é‡Œé…ç½®è§†å›¾è§£æå™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** é…ç½®æ¶ˆæ¯è½¬æ¢å™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/** é…ç½®å¼‚å¸¸å¤„ç†å™¨ **/</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">extendHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Validator <span class="title">getValidator</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">null</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> MessageCodesResolver <span class="title">getMessageCodesResolver</span><span class="params">()</span> </span>&#123;  <span class="keyword">return</span> <span class="keyword">null</span>; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p>åœ¨ä½¿ç”¨ Spring MVC æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšå¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>å®ç°è‡ªå·±é¡¹ç›®éœ€è¦çš„æ‹¦æˆªå™¨ï¼Œå¹¶åœ¨ WebMvcConfigurer å®ç°ç±»ä¸­é…ç½®ã€‚å¯å‚è§ <a target="_blank" rel="noopener" href="https://github.com/YunaiV/oceans/blob/2a2d3746905f1349e260e88049e7e28346c7648f/bff/webapp-bff/src/main/java/cn/iocoder/oceans/webapp/bff/config/MVCConfiguration.java">MVCConfiguration</a> ç±»ã€‚</li>
<li>é…ç½® <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> æ³¨è§£ï¼Œå®ç°å…¨å±€å¼‚å¸¸å¤„ç†ã€‚å¯å‚è§ <a target="_blank" rel="noopener" href="https://github.com/YunaiV/oceans/blob/2a2d3746905f1349e260e88049e7e28346c7648f/bff/webapp-bff/src/main/java/cn/iocoder/oceans/webapp/bff/config/GlobalExceptionHandler.java">GlobalExceptionHandler</a> ç±»ã€‚</li>
<li>é…ç½® <code>@ControllerAdvice</code> ï¼Œå®ç° ResponseBodyAdvice æ¥å£ï¼Œå®ç°å…¨å±€ç»Ÿä¸€è¿”å›ã€‚å¯å‚è§ <a target="_blank" rel="noopener" href="https://github.com/YunaiV/oceans/blob/2a2d3746905f1349e260e88049e7e28346c7648f/bff/webapp-bff/src/main/java/cn/iocoder/oceans/webapp/bff/config/GlobalResponseBodyAdvice.java">GlobalResponseBodyAdvice</a> ã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒWebMvcConfigurerã€ResponseBodyAdviceã€<code>@ControllerAdvice</code>ã€<code>@ExceptionHandler</code> æ¥å£ï¼Œéƒ½æ˜¯ Spring MVC æ¡†æ¶è‡ªèº«å·²ç»æœ‰çš„ä¸œè¥¿ã€‚</p>
<ul>
<li><code>spring-boot-starter-web</code> çš„ä¾èµ–ï¼Œå¸®æˆ‘ä»¬è§£å†³çš„æ˜¯ Spring MVC çš„ä¾èµ–ä»¥åŠç›¸å…³çš„ Tomcat ç­‰ç»„ä»¶ã€‚</li>
</ul>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-Security-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-Security-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring Security ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring Security ï¼Ÿ</h3><p>ç›®å‰æ¯”è¾ƒä¸»æµçš„å®‰å…¨æ¡†æ¶æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>Spring Security</li>
<li>Apache Shiro</li>
</ol>
<p>å¯¹äºä»»ä½•é¡¹ç›®æ¥è¯´ï¼Œå®‰å…¨è®¤è¯æ€»æ˜¯å°‘ä¸äº†ï¼ŒåŒæ ·é€‚ç”¨äºä½¿ç”¨ Spring Boot çš„é¡¹ç›®ã€‚ç›¸å¯¹æ¥è¯´ï¼ŒSpring Security ç°åœ¨ä¼šæ¯” Apache Shiro æ›´æµè¡Œã€‚</p>
<p>Spring Boot å’Œ Spring Security çš„é…ç½®æ–¹å¼æ¯”è¾ƒç®€å•ï¼š</p>
<ol>
<li>å¼•å…¥ <code>spring-boot-starter-security</code> çš„ä¾èµ–ã€‚</li>
<li>ç»§æ‰¿ WebSecurityConfigurerAdapter ï¼Œæ·»åŠ <strong>è‡ªå®šä¹‰</strong>çš„å®‰å…¨é…ç½®ã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œæ¯ä¸ªé¡¹ç›®çš„å®‰å…¨é…ç½®æ˜¯ä¸åŒçš„ï¼Œéœ€è¦èƒ–å‹è‡ªå·±é€‰æ‹©ã€‚æ›´å¤šè¯¦ç»†çš„ä½¿ç”¨ï¼Œå»ºè®®è®¤çœŸé˜…è¯»å¦‚ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://blog.didispace.com/springbootsecurity/">ã€ŠSpring Bootä¸­ ä½¿ç”¨ Spring Security è¿›è¡Œå®‰å…¨æ§åˆ¶ã€‹</a> ï¼Œå¿«é€Ÿä¸Šæ‰‹ã€‚</li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Security/good-collection/">ã€ŠSpring Security å®ç°åŸç†ä¸æºç è§£æç³»ç»Ÿ â€”â€” ç²¾å“åˆé›†ã€‹</a> ï¼Œæ·±å…¥æºç ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œå®‰å…¨æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¯é¢˜ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.jdon.com/49653">ã€ŠSpring Boot åç§å®‰å…¨æªæ–½ã€‹</a> ä¸€æ–‡ã€‚</p>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-Security-OAuth2-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Spring-Security-OAuth2-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring Security OAuth2 ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ Spring Security OAuth2 ï¼Ÿ</h3><p>å‚è§ <a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Security/OAuth2-learning/">ã€ŠSpring Security OAuth2 å…¥é—¨ã€‹</a> æ–‡ç« ï¼Œå†…å®¹æœ‰ç‚¹å¤šã€‚</p>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-JPA-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-JPA-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ JPA ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ JPA ï¼Ÿ</h3><ol>
<li>å¼•å…¥ <code>spring-boot-starter-data-jpa</code> çš„ä¾èµ–ã€‚</li>
<li>åœ¨ application é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ JPA ç›¸å…³çš„å°‘é‡é…ç½®ã€‚å½“ç„¶ï¼Œæ•°æ®åº“çš„é…ç½®ä¹Ÿè¦æ·»åŠ è¿›å»ã€‚</li>
<li>å…·ä½“ç¼–ç ã€‚</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨ï¼Œèƒ–å‹å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Boot/battcn/v2-orm-jpa/">ã€Šä¸€èµ·æ¥å­¦ SpringBoot 2.x | ç¬¬å…­ç¯‡ï¼šæ•´åˆ Spring Data JPAã€‹</a></li>
</ul>
<p>æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>Spring Boot 2 é»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥æ± æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/brettwooldridge/HikariCP">HikariCP</a> ï¼Œç›®å‰æœ€å¥½çš„æ€§èƒ½çš„æ•°æ®åº“è¿æ¥æ± çš„å®ç°ã€‚</li>
<li><code>spring-boot-starter-data-jpa</code> çš„ä¾èµ–ï¼Œä½¿ç”¨çš„é»˜è®¤ JPA å®ç°æ˜¯ Hibernate 5.X ã€‚</li>
</ul>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-MyBatis-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-MyBatis-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ MyBatis ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ MyBatis ï¼Ÿ</h3><ol>
<li>å¼•å…¥ <code>mybatis-spring-boot-starter</code> çš„ä¾èµ–ã€‚</li>
<li>åœ¨ application é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ MyBatis ç›¸å…³çš„å°‘é‡é…ç½®ã€‚å½“ç„¶ï¼Œæ•°æ®åº“çš„é…ç½®ä¹Ÿè¦æ·»åŠ è¿›å»ã€‚</li>
<li>å…·ä½“ç¼–ç ã€‚</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨ï¼Œèƒ–å‹å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Boot/battcn/v2-orm-mybatis/">ã€Šä¸€èµ·æ¥å­¦ SpringBoot 2.x | ç¬¬ä¸ƒç¯‡ï¼šæ•´åˆ Mybatisã€‹</a></li>
</ul>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-RabbitMQ-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-RabbitMQ-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ RabbitMQ ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ RabbitMQ ï¼Ÿ</h3><ol>
<li>å¼•å…¥ <code>spring-boot-starter-amqp</code> çš„ä¾èµ–</li>
<li>åœ¨ application é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ RabbitMQ ç›¸å…³çš„å°‘é‡é…ç½®ã€‚</li>
<li>å…·ä½“ç¼–ç ã€‚</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨ï¼Œèƒ–å‹å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Boot/battcn/v2-queue-rabbitmq/">ã€Šä¸€èµ·æ¥å­¦ SpringBoot 2.x | ç¬¬åäºŒç¯‡ï¼šåˆæ¢ RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Boot/battcn/v2-queue-rabbitmq-delay/">ã€Šä¸€èµ·æ¥å­¦ SpringBoot 2.x | ç¬¬åä¸‰ç¯‡ï¼šRabbitMQ å»¶è¿Ÿé˜Ÿåˆ—ã€‹</a></li>
</ul>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Kafka-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-Kafka-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ Kafka ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ Kafka ï¼Ÿ</h3><ol>
<li>å¼•å…¥ <code>spring-kafka</code> çš„ä¾èµ–ã€‚</li>
<li>åœ¨ application é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ Kafka ç›¸å…³çš„å°‘é‡é…ç½®ã€‚</li>
<li>å…·ä½“ç¼–ç ã€‚</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨ï¼Œèƒ–å‹å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/">ã€ŠSpring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹</a></li>
</ul>
<h3 id="å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-RocketMQ-ï¼Ÿ"><a href="#å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-RocketMQ-ï¼Ÿ" class="headerlink" title="å¦‚ä½•é›†æˆ Spring Boot å’Œ RocketMQ ï¼Ÿ"></a>å¦‚ä½•é›†æˆ Spring Boot å’Œ RocketMQ ï¼Ÿ</h3><ol>
<li>å¼•å…¥ <code>rocketmq-spring-boot</code> çš„ä¾èµ–ã€‚</li>
<li>åœ¨ application é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ RocketMQ ç›¸å…³çš„å°‘é‡é…ç½®ã€‚</li>
<li>å…·ä½“ç¼–ç ã€‚</li>
</ol>
<p>è¯¦ç»†çš„ä½¿ç”¨ï¼Œèƒ–å‹å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/RocketMQ/start/spring-boot-example">ã€Šæˆ‘ç”¨è¿™ç§æ–¹æ³•åœ¨ Spring ä¸­å®ç°æ¶ˆæ¯çš„å‘é€å’Œæ¶ˆè´¹ã€‹</a></li>
</ul>
<h3 id="Spring-Boot-æ”¯æŒå“ªäº›æ—¥å¿—æ¡†æ¶ï¼Ÿ"><a href="#Spring-Boot-æ”¯æŒå“ªäº›æ—¥å¿—æ¡†æ¶ï¼Ÿ" class="headerlink" title="Spring Boot æ”¯æŒå“ªäº›æ—¥å¿—æ¡†æ¶ï¼Ÿ"></a>Spring Boot æ”¯æŒå“ªäº›æ—¥å¿—æ¡†æ¶ï¼Ÿ</h3><p>Spring Boot æ”¯æŒçš„æ—¥å¿—æ¡†æ¶æœ‰ï¼š</p>
<ul>
<li>Logback</li>
<li>Log4j2</li>
<li>Log4j</li>
<li>Java Util Logging</li>
</ul>
<p>é»˜è®¤ä½¿ç”¨çš„æ˜¯ Logback æ—¥å¿—æ¡†æ¶ï¼Œä¹Ÿæ˜¯ç›®å‰è¾ƒä¸ºæ¨èçš„ï¼Œå…·ä½“é…ç½®ï¼Œå¯ä»¥å‚è§ <a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring-Boot/battcn/v2-config-logs/">ã€Šä¸€èµ·æ¥å­¦ SpringBoot 2.x | ç¬¬ä¸‰ç¯‡ï¼šSpringBoot æ—¥å¿—é…ç½®ã€‹</a> ã€‚</p>
<p>å› ä¸º Log4j2 çš„æ€§èƒ½æ›´åŠ ä¼˜ç§€ï¼Œä¹Ÿæœ‰äººåœ¨ç”Ÿäº§ä¸Šä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f18a9cff351d">ã€ŠSpring Boot Log4j2 æ—¥å¿—æ€§èƒ½ä¹‹å·…ã€‹</a> é…ç½®ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://fatefrank.github.io/2020/08/06/Spring%20%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Seif Zheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seif Zheng's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/Spring%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Spring é¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š11:50:21" itemprop="dateCreated datePublished" datetime="2020-08-06T00:00:00+08:00">2020-08-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Spring-æ•´ä½“"><a href="#Spring-æ•´ä½“" class="headerlink" title="Spring æ•´ä½“"></a>Spring æ•´ä½“</h2><h3 id="ä»€ä¹ˆæ˜¯-Spring-Frameworkï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-Frameworkï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring Frameworkï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Spring Frameworkï¼Ÿ</h3><p>Spring æ˜¯ä¸€ä¸ªå¼€æºåº”ç”¨æ¡†æ¶ï¼Œæ—¨åœ¨é™ä½åº”ç”¨ç¨‹åºå¼€å‘çš„å¤æ‚åº¦ã€‚</p>
<ul>
<li><p>å®ƒæ˜¯è½»é‡çº§ã€æ¾æ•£è€¦åˆçš„ã€‚</p>
<blockquote>
<p>å®ƒçš„è½»é‡çº§ä¸»è¦æ˜¯ç›¸å¯¹äº EJB ã€‚éšç€ Spring çš„ä½“ç³»è¶Šæ¥è¶Šåºå¤§ï¼Œå¤§å®¶è¢« Spring çš„é…ç½®ææ‡µé€¼äº†ï¼Œæ‰€ä»¥åæ¥å‡ºäº† Spring Boot ã€‚</p>
</blockquote>
</li>
<li><p>å®ƒå…·æœ‰åˆ†å±‚ä½“ç³»ç»“æ„ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©ç»„ä»¶ï¼ŒåŒæ—¶è¿˜ä¸º J2EE åº”ç”¨ç¨‹åºå¼€å‘æä¾›äº†ä¸€ä¸ªæœ‰å‡èšåŠ›çš„æ¡†æ¶ã€‚</p>
</li>
<li><p>å®ƒå¯ä»¥é›†æˆå…¶ä»–æ¡†æ¶ï¼Œå¦‚ Spring MVCã€Hibernateã€MyBatis ç­‰ï¼Œæ‰€ä»¥åˆç§°ä¸ºæ¡†æ¶çš„æ¡†æ¶( ç²˜åˆå‰‚ã€è„šæ‰‹æ¶ )ã€‚</p>
</li>
</ul>
<h3 id="Spring-Framework-ä¸­å„æ¨¡å—ä»‹ç»ï¼Ÿ"><a href="#Spring-Framework-ä¸­å„æ¨¡å—ä»‹ç»ï¼Ÿ" class="headerlink" title="Spring Framework ä¸­å„æ¨¡å—ä»‹ç»ï¼Ÿ"></a>Spring Framework ä¸­å„æ¨¡å—ä»‹ç»ï¼Ÿ</h3><p>å¦‚ä¸‹æ˜¯ä¸€å¼ æ¯”è¾ƒæ—©æœŸç‰ˆæœ¬çš„ Spring Framework çš„æ¨¡å—å›¾ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/01.jpg" alt="Spring Framework"></p>
<p><strong>Spring æ ¸å¿ƒå®¹å™¨</strong></p>
<blockquote>
<p>å¯¹åº”å›¾ä¸­ï¼ŒCore Container ã€‚</p>
</blockquote>
<p>è¯¥å±‚åŸºæœ¬ä¸Šæ˜¯ Spring Framework çš„æ ¸å¿ƒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li><p>Spring Core</p>
</li>
<li><p>Spring Bean</p>
<blockquote>
<p>æ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯ BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨æ§åˆ¶åè½¬ ï¼ˆIOCï¼‰æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</p>
</blockquote>
</li>
<li><p>Spring Context</p>
<blockquote>
<p>Spring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€äº‹ä»¶æœºåˆ¶ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</p>
</blockquote>
</li>
<li><p>SpEL (Spring Expression Language)</p>
<blockquote>
<p>Spring è¡¨è¾¾å¼è¯­è¨€å…¨ç§°ä¸º â€œSpring Expression Languageâ€ï¼Œç¼©å†™ä¸º â€œSpELâ€ ï¼Œç±»ä¼¼äº Struts2 ä¸­ä½¿ç”¨çš„ OGNL è¡¨è¾¾å¼è¯­è¨€ï¼Œèƒ½åœ¨è¿è¡Œæ—¶æ„å»ºå¤æ‚è¡¨è¾¾å¼ã€å­˜å–å¯¹è±¡å›¾å±æ€§ã€å¯¹è±¡æ–¹æ³•è°ƒç”¨ç­‰ç­‰ï¼Œå¹¶ä¸”èƒ½ä¸ Spring åŠŸèƒ½å®Œç¾æ•´åˆï¼Œå¦‚èƒ½ç”¨æ¥é…ç½® Bean å®šä¹‰ã€‚</p>
</blockquote>
</li>
</ul>
<p>æˆ–è€…è¯´ï¼Œè¿™å—å°±æ˜¯ Spring IoC ã€‚</p>
<p><strong>æ•°æ®è®¿é—®</strong></p>
<blockquote>
<p>å¯¹åº”å›¾ä¸­ï¼ŒData Access ã€‚</p>
</blockquote>
<p>è¯¥å±‚æä¾›ä¸æ•°æ®åº“äº¤äº’çš„æ”¯æŒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li><p>JDBC (Java DataBase Connectivity)</p>
<blockquote>
<p>Spring å¯¹ JDBC çš„å°è£…æ¨¡å—ï¼Œæä¾›äº†å¯¹å…³ç³»æ•°æ®åº“çš„è®¿é—®ã€‚</p>
</blockquote>
</li>
<li><p>ORM (Object Relational Mapping)</p>
<blockquote>
<p>Spring ORM æ¨¡å—ï¼Œæä¾›äº†å¯¹ hibernate5 å’Œ JPA çš„é›†æˆã€‚</p>
<ul>
<li>hibernate5 æ˜¯ä¸€ä¸ª ORM æ¡†æ¶ã€‚</li>
<li>JPA æ˜¯ä¸€ä¸ª Java æŒä¹…åŒ– API ã€‚</li>
</ul>
</blockquote>
</li>
<li><p>OXM (Object XML Mappers)</p>
<blockquote>
<p>Spring æä¾›äº†ä¸€å¥—ç±»ä¼¼ ORM çš„æ˜ å°„æœºåˆ¶ï¼Œç”¨æ¥å°† Java å¯¹è±¡å’Œ XML æ–‡ä»¶è¿›è¡Œæ˜ å°„ã€‚è¿™å°±æ˜¯ Spring çš„å¯¹è±¡ XML æ˜ å°„åŠŸèƒ½ï¼Œæœ‰æ—¶å€™ä¹Ÿæˆä¸º XML çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p>ç”¨çš„æ¯”è¾ƒå°‘ï¼Œèƒ–å‹äº†è§£ä¸‹å³å¯ã€‚</p>
</blockquote>
</li>
<li><p>Transaction</p>
<blockquote>
<p>Spring ç®€å•è€Œå¼ºå¤§çš„äº‹åŠ¡ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å£°æ˜å¼äº‹åŠ¡å’Œç¼–ç¨‹å¼äº‹åŠ¡ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>Web</strong></p>
<p>è¯¥å±‚æä¾›äº†åˆ›å»º Web åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li><p>WebMVC</p>
<blockquote>
<p>MVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚</p>
</blockquote>
</li>
<li><p>WebFlux</p>
<blockquote>
<p>åŸºäº Reactive åº“çš„å“åº”å¼çš„ Web å¼€å‘æ¡†æ¶</p>
<p>ä¸äº†è§£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/java/spring5-webflux-reactive/index.html">ã€Šä½¿ç”¨ Spring 5 çš„ WebFlux å¼€å‘ååº”å¼ Web åº”ç”¨ã€‹</a></p>
</blockquote>
</li>
<li><p>WebSocket</p>
<blockquote>
<p>Spring 4.0 çš„ä¸€ä¸ªæœ€å¤§æ›´æ–°æ˜¯å¢åŠ äº†å¯¹ Websocket çš„æ”¯æŒã€‚</p>
<p>Websocket æä¾›äº†ä¸€ä¸ªåœ¨ Web åº”ç”¨ä¸­å®ç°é«˜æ•ˆã€åŒå‘é€šè®¯ï¼Œéœ€è€ƒè™‘å®¢æˆ·ç«¯(æµè§ˆå™¨)å’ŒæœåŠ¡ç«¯ä¹‹é—´é«˜é¢‘å’Œä½å»¶æ—¶æ¶ˆæ¯äº¤æ¢çš„æœºåˆ¶ã€‚</p>
<p>ä¸€èˆ¬çš„åº”ç”¨åœºæ™¯æœ‰ï¼šåœ¨çº¿äº¤æ˜“ã€ç½‘é¡µèŠå¤©ã€æ¸¸æˆã€åä½œã€æ•°æ®å¯è§†åŒ–ç­‰ã€‚</p>
</blockquote>
</li>
<li><p><del>Portlet</del> å·²ç»åºŸå¼ƒ</p>
</li>
</ul>
<p><strong>AOP</strong></p>
<p>è¯¥å±‚æ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li><p>AOP</p>
<blockquote>
<p>é€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†çš„ä»»ä½•å¯¹è±¡æ”¯æŒ AOPã€‚</p>
<p>Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ– EJB ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</p>
</blockquote>
</li>
<li><p>Aspects</p>
<blockquote>
<p>è¯¥æ¨¡å—ä¸ºä¸ AspectJ çš„é›†æˆæä¾›æ”¯æŒã€‚</p>
</blockquote>
</li>
<li><p>Instrumentation</p>
<blockquote>
<p>è¯¥å±‚ä¸ºç±»æ£€æµ‹å’Œç±»åŠ è½½å™¨å®ç°æä¾›æ”¯æŒã€‚</p>
<p>ç”¨çš„æ¯”è¾ƒå°‘ï¼Œèƒ–å‹äº†è§£ä¸‹å³å¯ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>å…¶å®ƒ</strong></p>
<ul>
<li><p>JMS (Java Messaging Service)</p>
<blockquote>
<p>æä¾›äº†ä¸€ä¸ª JMS é›†æˆæ¡†æ¶ï¼Œç®€åŒ–äº† JMS API çš„ä½¿ç”¨ã€‚</p>
<p>å¯èƒ½æœ‰èƒ–å‹ä¸å¤ªäº†è§£ JMS ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenpi/p/5559349.html">ã€ŠJMS(Javaæ¶ˆæ¯æœåŠ¡)å…¥é—¨æ•™ç¨‹ã€‹</a> ã€‚</p>
</blockquote>
</li>
<li><p>Test</p>
<blockquote>
<p>è¯¥æ¨¡å—ä¸ºä½¿ç”¨ JUnit å’Œ TestNG è¿›è¡Œæµ‹è¯•æä¾›æ”¯æŒã€‚</p>
</blockquote>
</li>
<li><p>Messaging</p>
<blockquote>
<p>è¯¥æ¨¡å—ä¸º STOMP æä¾›æ”¯æŒã€‚å®ƒè¿˜æ”¯æŒæ³¨è§£ç¼–ç¨‹æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ç”¨äºä» WebSocket å®¢æˆ·ç«¯è·¯ç”±å’Œå¤„ç† STOMP æ¶ˆæ¯ã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"><a href="#ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"></a>ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ</h3><p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›ä½¿ç”¨ Spring æ¡†æ¶å¸¦æ¥çš„ä¸»è¦å¥½å¤„ï¼š</p>
<ul>
<li><strong>DI</strong> ï¼š**<a target="_blank" rel="noopener" href="http://howtodoinjava.com/2013/03/19/inversion-of-control-ioc-and-dependency-injection-di-patterns-in-spring-framework-and-related-interview-questions/">Dependency Injection(DI)</a>** æ–¹æ³•ï¼Œä½¿å¾—æ„é€ å™¨å’Œ JavaBeanã€properties æ–‡ä»¶ä¸­çš„ä¾èµ–å…³ç³»ä¸€ç›®äº†ç„¶ã€‚</li>
<li><strong>è½»é‡çº§</strong>ï¼šä¸ EJB å®¹å™¨ç›¸æ¯”è¾ƒï¼ŒIoC å®¹å™¨æ›´åŠ è¶‹å‘äº<strong>è½»é‡çº§</strong>ã€‚è¿™æ ·ä¸€æ¥ IoC å®¹å™¨åœ¨æœ‰é™çš„å†…å­˜å’Œ CPU èµ„æºçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œåº”ç”¨ç¨‹åºçš„å¼€å‘å’Œå‘å¸ƒå°±å˜å¾—ååˆ†æœ‰åˆ©ã€‚</li>
<li><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)**ï¼š Spring æ”¯æŒé¢å‘</strong>åˆ‡é¢ç¼–ç¨‹**ï¼ŒåŒæ—¶æŠŠåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»Ÿçš„æœåŠ¡åˆ†ç¦»å¼€æ¥ã€‚</li>
<li><strong>é›†æˆä¸»æµæ¡†æ¶</strong>ï¼šSpring å¹¶æ²¡æœ‰é—­é—¨é€ è½¦ï¼ŒSpring <strong>é›†æˆ</strong>äº†å·²æœ‰çš„æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚ ORM æ¡†æ¶ã€Logging æ—¥æœŸæ¡†æ¶ã€J2EEã€Quartz å’Œ JDK Timer ï¼Œä»¥åŠå…¶ä»–è§†å›¾æŠ€æœ¯ã€‚</li>
<li>æ¨¡å—åŒ–ï¼šSpring æ¡†æ¶æ˜¯æŒ‰ç…§<strong>æ¨¡å—</strong>çš„å½¢å¼æ¥ç»„ç»‡çš„ã€‚ç”±åŒ…å’Œç±»çš„å‘½åï¼Œå°±å¯ä»¥çœ‹å‡ºå…¶æ‰€å±çš„æ¨¡å—ï¼Œå¼€å‘è€…ä»…ä»…éœ€è¦é€‰ç”¨ä»–ä»¬éœ€è¦çš„æ¨¡å—å³å¯ã€‚</li>
<li><strong>ä¾¿æ·çš„æµ‹è¯•</strong>ï¼šè¦ <a target="_blank" rel="noopener" href="http://howtodoinjava.com/2013/04/19/how-to-unit-test-spring-security-authentication-with-junit/">æµ‹è¯•ä¸€é¡¹ç”¨Springå¼€å‘çš„åº”ç”¨ç¨‹åº</a> ååˆ†ç®€å•ï¼Œå› ä¸º<strong>æµ‹è¯•</strong>ç›¸å…³çš„ç¯å¢ƒä»£ç éƒ½å·²ç»å›Šæ‹¬åœ¨æ¡†æ¶ä¸­äº†ã€‚æ›´åŠ ç®€å•çš„æ˜¯ï¼Œåˆ©ç”¨ JavaBean å½¢å¼çš„ POJO ç±»ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ©ç”¨ä¾èµ–æ³¨å…¥æ¥å†™å…¥æµ‹è¯•æ•°æ®ã€‚</li>
<li><strong>Web æ¡†æ¶</strong>ï¼šSpring çš„ <strong>Web æ¡†æ¶</strong>äº¦æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ Web MVC æ¡†æ¶ï¼Œä¸ºå¼€å‘è€…ä»¬åœ¨ Web æ¡†æ¶çš„é€‰æ‹©ä¸Šæä¾›äº†ä¸€ä¸ªé™¤äº†ä¸»æµæ¡†æ¶æ¯”å¦‚ Struts ã€è¿‡åº¦è®¾è®¡çš„ã€ä¸æµè¡Œ Web æ¡†æ¶çš„ä»¥å¤–çš„æœ‰åŠ›é€‰é¡¹ã€‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šSpring æä¾›äº†ä¸€ä¸ªä¾¿æ·çš„<strong>äº‹åŠ¡ç®¡ç†</strong>æ¥å£ï¼Œé€‚ç”¨äºå°å‹çš„æœ¬åœ°äº‹ç‰©å¤„ç†ï¼ˆæ¯”å¦‚åœ¨å• DB çš„ç¯å¢ƒä¸‹ï¼‰å’Œå¤æ‚çš„å…±åŒäº‹ç‰©å¤„ç†ï¼ˆæ¯”å¦‚åˆ©ç”¨ JTA çš„å¤æ‚ DB ç¯å¢ƒï¼‰ã€‚</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šSpring æä¾›ä¸€ä¸ªæ–¹ä¾¿çš„ API ï¼Œå°†ç‰¹å®šæŠ€æœ¯çš„å¼‚å¸¸(ç”±JDBC, Hibernate, æˆ– JDO æŠ›å‡º)è½¬åŒ–ä¸ºä¸€è‡´çš„ã€Unchecked å¼‚å¸¸ã€‚</li>
</ul>
<p>å½“ç„¶ï¼ŒSpring ä»£ç ä¼˜ç‚¹çš„åŒæ—¶ï¼Œä¸€å®šä¼šå¸¦æ¥ç›¸åº”çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªæ¡†æ¶éƒ½æœ‰çš„é—®é¢˜ï¼Œè°ƒè¯•é˜¶æ®µä¸ç›´è§‚ï¼ŒåæœŸçš„ bug å¯¹åº”é˜¶æ®µï¼Œä¸å®¹æ˜“åˆ¤æ–­é—®é¢˜æ‰€åœ¨ã€‚è¦èŠ±ä¸€å®šçš„æ—¶é—´å»ç†è§£å®ƒã€‚</li>
<li>æŠŠå¾ˆå¤š JavaEE çš„ä¸œè¥¿å°è£…äº†ï¼Œåœ¨æ»¡è¶³å¿«é€Ÿå¼€å‘é«˜è´¨é‡ç¨‹åºçš„åŒæ—¶ï¼Œéšè—äº†å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<h3 id="Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><p>Spring æ¡†æ¶ä¸­ä½¿ç”¨åˆ°äº†å¤§é‡çš„è®¾è®¡æ¨¡å¼ï¼Œä¸‹é¢åˆ—ä¸¾äº†æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ï¼š</p>
<ul>
<li>ä»£ç†æ¨¡å¼ â€” åœ¨ AOP å’Œ remoting ä¸­è¢«ç”¨çš„æ¯”è¾ƒå¤šã€‚</li>
<li>å•ä¾‹æ¨¡å¼ â€” åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ Bean é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li>
<li>æ¨¡æ¿æ–¹æ³• â€” ç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚æ¯”å¦‚ <a target="_blank" rel="noopener" href="http://howtodoinjava.com/2015/02/20/spring-restful-client-resttemplate-example/">RestTemplate</a>ã€JmsTemplateã€JdbcTemplate ã€‚</li>
<li>å‰ç«¯æ§åˆ¶å™¨ â€” Springæä¾›äº† DispatcherServlet æ¥å¯¹è¯·æ±‚è¿›è¡Œåˆ†å‘ã€‚</li>
<li>è§†å›¾å¸®åŠ©(View Helper) â€” Spring æä¾›äº†ä¸€ç³»åˆ—çš„ JSP æ ‡ç­¾ï¼Œé«˜æ•ˆå®æ¥è¾…åŠ©å°†åˆ†æ•£çš„ä»£ç æ•´åˆåœ¨è§†å›¾é‡Œã€‚</li>
<li>ä¾èµ–æ³¨å…¥ â€” è´¯ç©¿äº BeanFactory / ApplicationContext æ¥å£çš„æ ¸å¿ƒç†å¿µã€‚</li>
<li>å·¥å‚æ¨¡å¼ â€” BeanFactory ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œè§‰å¾—ä¸è¿‡ç˜¾ï¼Œå¯ä»¥çœ‹çœ‹è‰¿è‰¿åŸºå‹çŸ¥ç§‹å†™çš„å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring/DesignPattern-1">ã€ŠSpring æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼(ä¸€)ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring/DesignPattern-2">ã€ŠSpring æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼(äºŒ)ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring/DesignPattern-3">ã€ŠSpring æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼(ä¸‰)ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring/DesignPattern-4">ã€ŠSpring æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼(å››)ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iocoder.cn/Spring/DesignPattern-5">ã€ŠSpring æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼(äº”)ã€‹</a></li>
</ul>
<h2 id="Spring-IoC"><a href="#Spring-IoC" class="headerlink" title="Spring IoC"></a>Spring IoC</h2><blockquote>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå°†åˆ†æˆ IoC å’Œ Bean ä¸¤éƒ¨åˆ†æ¥åˆ†äº« Spring å®¹å™¨çš„å†…å®¹ã€‚</p>
<ul>
<li>IoC ï¼Œä¾§é‡åœ¨äºå®¹å™¨ã€‚</li>
<li>Bean ï¼Œä¾§é‡åœ¨äºè¢«å®¹å™¨ç®¡ç†çš„ Bean ã€‚</li>
</ul>
</blockquote>
<h3 id="ä»€ä¹ˆæ˜¯-Spring-IoC-å®¹å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-IoC-å®¹å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring IoC å®¹å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Spring IoC å®¹å™¨ï¼Ÿ</h3><blockquote>
<p>æ³¨æ„ï¼Œæ­£ç¡®çš„æ‹¼å†™æ˜¯ IoC ã€‚</p>
</blockquote>
<p>Spring æ¡†æ¶çš„æ ¸å¿ƒæ˜¯ Spring IoC å®¹å™¨ã€‚å®¹å™¨åˆ›å»º Bean å¯¹è±¡ï¼Œå°†å®ƒä»¬è£…é…åœ¨ä¸€èµ·ï¼Œé…ç½®å®ƒä»¬å¹¶ç®¡ç†å®ƒä»¬çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚</p>
<ul>
<li>Spring å®¹å™¨ä½¿ç”¨<strong>ä¾èµ–æ³¨å…¥</strong>æ¥ç®¡ç†ç»„æˆåº”ç”¨ç¨‹åºçš„ Bean å¯¹è±¡ã€‚</li>
<li>å®¹å™¨é€šè¿‡è¯»å–æä¾›çš„<strong>é…ç½®å…ƒæ•°æ®</strong> Bean Definition æ¥æ¥æ”¶å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œé…ç½®å’Œç»„è£…çš„æŒ‡ä»¤ã€‚</li>
<li>è¯¥é…ç½®å…ƒæ•°æ® Bean Definition å¯ä»¥é€šè¿‡ XMLï¼ŒJava æ³¨è§£æˆ– Java Config ä»£ç <strong>æä¾›</strong>ã€‚</li>
</ul>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/02.jpg" alt="Spring IoC"></p>
<h3 id="ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>åœ¨ä¾èµ–æ³¨å…¥ä¸­ï¼Œä½ ä¸å¿…ä¸»åŠ¨ã€æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œä½†å¿…é¡»æè¿°å¦‚ä½•åˆ›å»ºå®ƒä»¬ã€‚</p>
<ul>
<li>ä½ ä¸æ˜¯ç›´æ¥åœ¨ä»£ç ä¸­å°†ç»„ä»¶å’ŒæœåŠ¡è¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯æè¿°é…ç½®æ–‡ä»¶ä¸­å“ªäº›ç»„ä»¶éœ€è¦å“ªäº›æœåŠ¡ã€‚</li>
<li>ç„¶åï¼Œå†ç”± IoC å®¹å™¨å°†å®ƒä»¬è£…é…åœ¨ä¸€èµ·ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œä¾èµ–æ³¨å…¥çš„è‹±æ–‡ç¼©å†™æ˜¯ Dependency Injection ï¼Œç®€ç§° DI ã€‚</p>
<h3 id="IoC-å’Œ-DI-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#IoC-å’Œ-DI-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="IoC å’Œ DI æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>IoC å’Œ DI æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>Dependency Injection</strong>åŸæ¥ï¼Œå®ƒå« IoC ã€‚</p>
<p>Martin Flower å‘è¯äº†ï¼Œæ˜¯ä¸ªæ¡†æ¶éƒ½æœ‰ IoC ï¼Œè¿™ä¸è¶³ä»¥æ–°ç”Ÿå®¹å™¨åè½¬çš„â€œå¦‚ä½•å®šä½æ’ä»¶çš„å…·ä½“å®ç°â€ï¼Œäºæ˜¯ï¼Œå®ƒæœ‰äº†ä¸ªæ–°åå­—ï¼ŒDependency Injection ã€‚</p>
<p>å…¶å®ï¼Œå®ƒå°±æ˜¯ä¸€ç§å°†è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…åˆ†ç¦»çš„æ€æƒ³ï¼ŒUncle Bob ç®¡å®ƒå«DIPï¼ˆDependency Inversion Principleï¼‰ï¼Œå¹¶æŠŠå®ƒå½’å…¥OOè®¾è®¡åŸåˆ™ã€‚<br>åŒ Spring ç›¸æ¯”ï¼Œå®ƒæ›´æ—©è¿›å…¥æˆ‘çš„å¤§è„‘ã€‚ä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆæœ¦èƒ§ï¼Œç›´è‡³ Spring å‡ºç°ã€‚</p>
<p>æ…¢æ…¢çš„ï¼Œæˆ‘çŸ¥é“äº†å®ƒè¿˜åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>Interface Injectionï¼ˆtype 1ï¼‰</li>
<li>Setter Injectionï¼ˆtype 2ï¼‰</li>
<li>Constructor Injectionï¼ˆtype 3ï¼‰ã€‚</li>
</ul>
<p>Martin Floweré‚£ç¯‡ä¸ºå®ƒæ›´åçš„å¤§ä½œè®©æˆ‘å¿ƒç›®å…³äºå®ƒçš„ä¸€åˆ‡è¶‹äºå®Œæ•´ã€‚</p>
<p>åœ¨ Spring ä¸­ï¼Œå®ƒæ˜¯ä¸€åˆ‡çš„åŸºç¡€ã€‚Spring çš„ç§ç§ä¼˜åŠ¿éšä¹‹è€Œæ¥ã€‚<br>äºæˆ‘è€Œè¨€ï¼Œå®ƒä¸ºæˆ‘å¸¦æ¥æ›´å¤šçš„æ˜¯æ€ç»´æ–¹å¼çš„è½¬å˜ï¼Œææ€•ä»¥åæˆ‘å†ä¹Ÿæ— æ³•å†™å‡ºé‚£ç§ä¸€å¤§å—çš„å…¨åŠŸèƒ½ç¨‹åºäº†ã€‚</p>
<h3 id="å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥ï¼Ÿ"></a>å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>é€šå¸¸ï¼Œä¾èµ–æ³¨å…¥å¯ä»¥é€šè¿‡<strong>ä¸‰ç§</strong>æ–¹å¼å®Œæˆï¼Œå³ï¼š</p>
<blockquote>
<p>ä¸Šé¢ä¸€ä¸ªé—®é¢˜çš„ä¸‰ç§æ–¹å¼çš„è‹±æ–‡ï¼Œä¸‹é¢æ˜¯ä¸‰ç§æ–¹å¼çš„ä¸­æ–‡ã€‚</p>
</blockquote>
<ul>
<li>æ¥å£æ³¨å…¥</li>
<li>æ„é€ å‡½æ•°æ³¨å…¥</li>
<li>setter æ³¨å…¥</li>
</ul>
<p>ç›®å‰ï¼Œåœ¨ Spring Framework ä¸­ï¼Œä»…ä½¿ç”¨æ„é€ å‡½æ•°å’Œ setter æ³¨å…¥è¿™<strong>ä¸¤ç§</strong>æ–¹å¼ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸¤ç§æ–¹å¼å„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹å‘¢ï¼Ÿ</p>
<p>å¯ä»¥ç®€å•é˜…è¯» <a target="_blank" rel="noopener" href="https://my.oschina.net/itblog/blog/203746">ã€ŠSpringä¸¤ç§ä¾èµ–æ³¨å…¥æ–¹å¼çš„æ¯”è¾ƒã€‹</a>ï¼Œä¸ç”¨å¤ªè¾ƒçœŸã€‚ç»¼è¿°æ¥è¯´ï¼š</p>
<table>
<thead>
<tr>
<th align="left">æ„é€ å‡½æ•°æ³¨å…¥</th>
<th align="left">setter æ³¨å…¥</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ²¡æœ‰éƒ¨åˆ†æ³¨å…¥</td>
<td align="left">æœ‰éƒ¨åˆ†æ³¨å…¥</td>
</tr>
<tr>
<td align="left">ä¸ä¼šè¦†ç›– setter å±æ€§</td>
<td align="left">ä¼šè¦†ç›– setter å±æ€§</td>
</tr>
<tr>
<td align="left">ä»»æ„ä¿®æ”¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td>
<td align="left">ä»»æ„ä¿®æ”¹ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td>
</tr>
<tr>
<td align="left">é€‚ç”¨äºè®¾ç½®å¾ˆå¤šå±æ€§</td>
<td align="left">é€‚ç”¨äºè®¾ç½®å°‘é‡å±æ€§</td>
</tr>
</tbody></table>
<ul>
<li>å®é™…åœºæ™¯ä¸‹ï¼Œsetting æ³¨å…¥ä½¿ç”¨çš„æ›´å¤šã€‚</li>
</ul>
<h3 id="Spring-ä¸­æœ‰å¤šå°‘ç§-IoC-å®¹å™¨ï¼Ÿ"><a href="#Spring-ä¸­æœ‰å¤šå°‘ç§-IoC-å®¹å™¨ï¼Ÿ" class="headerlink" title="Spring ä¸­æœ‰å¤šå°‘ç§ IoC å®¹å™¨ï¼Ÿ"></a>Spring ä¸­æœ‰å¤šå°‘ç§ IoC å®¹å™¨ï¼Ÿ</h3><p>Spring æä¾›äº†ä¸¤ç§( ä¸æ˜¯â€œä¸ªâ€ ) IoC å®¹å™¨ï¼Œåˆ†åˆ«æ˜¯ BeanFactoryã€ApplicationContext ã€‚</p>
<p><strong>BeanFactory</strong></p>
<blockquote>
<p>BeanFactory åœ¨ <code>spring-beans</code> é¡¹ç›®æä¾›ã€‚</p>
</blockquote>
<p>BeanFactory ï¼Œå°±åƒä¸€ä¸ªåŒ…å« Bean é›†åˆçš„å·¥å‚ç±»ã€‚å®ƒä¼šåœ¨å®¢æˆ·ç«¯è¦æ±‚æ—¶å®ä¾‹åŒ– Bean å¯¹è±¡ã€‚</p>
<p><strong>ApplicationContext</strong></p>
<blockquote>
<p>ApplicationContext åœ¨ <code>spring-context</code> é¡¹ç›®æä¾›ã€‚</p>
</blockquote>
<p>ApplicationContext æ¥å£æ‰©å±•äº† BeanFactory æ¥å£ï¼Œå®ƒåœ¨ BeanFactory åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚å†…ç½®å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>MessageSource ï¼šç®¡ç† message ï¼Œå®ç°å›½é™…åŒ–ç­‰åŠŸèƒ½ã€‚</li>
<li>ApplicationEventPublisher ï¼šäº‹ä»¶å‘å¸ƒã€‚</li>
<li>ResourcePatternResolver ï¼šå¤šèµ„æºåŠ è½½ã€‚</li>
<li>EnvironmentCapable ï¼šç³»ç»Ÿ Environmentï¼ˆprofile + Propertiesï¼‰ç›¸å…³ã€‚</li>
<li>Lifecycle ï¼šç®¡ç†ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li>Closable ï¼šå…³é—­ï¼Œé‡Šæ”¾èµ„æº</li>
<li>InitializingBeanï¼šè‡ªå®šä¹‰åˆå§‹åŒ–ã€‚</li>
<li>BeanNameAwareï¼šè®¾ç½® beanName çš„ Aware æ¥å£ã€‚</li>
</ul>
<p>å¦å¤–ï¼ŒApplicationContext ä¼šè‡ªåŠ¨åˆå§‹åŒ–éæ‡’åŠ è½½çš„ Bean å¯¹è±¡ä»¬ã€‚</p>
<p>è¯¦ç»†çš„å†…å®¹ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/ApplicationContext/">ã€Šã€æ­»ç£• Springã€‘â€”â€” ApplicationContext ç›¸å…³æ¥å£æ¶æ„åˆ†æã€‹</a> ä¸€æ–‡ã€‚æºç ä¹‹å‰æ— ç§˜å¯†ã€‚ç®€å•æ€»ç»“ä¸‹ BeanFactory ä¸ ApplicationContext ä¸¤è€…çš„å·®å¼‚ï¼š</p>
<table>
<thead>
<tr>
<th align="left">BeanFactory</th>
<th align="left">ApplicationContext</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å®ƒä½¿ç”¨æ‡’åŠ è½½</td>
<td align="left">å®ƒä½¿ç”¨å³æ—¶åŠ è½½</td>
</tr>
<tr>
<td align="left">å®ƒä½¿ç”¨è¯­æ³•æ˜¾å¼æä¾›èµ„æºå¯¹è±¡</td>
<td align="left">å®ƒè‡ªå·±åˆ›å»ºå’Œç®¡ç†èµ„æºå¯¹è±¡</td>
</tr>
<tr>
<td align="left">ä¸æ”¯æŒå›½é™…åŒ–</td>
<td align="left">æ”¯æŒå›½é™…åŒ–</td>
</tr>
<tr>
<td align="left">ä¸æ”¯æŒåŸºäºä¾èµ–çš„æ³¨è§£</td>
<td align="left">æ”¯æŒåŸºäºä¾èµ–çš„æ³¨è§£</td>
</tr>
</tbody></table>
<p>å¦å¤–ï¼ŒBeanFactory ä¹Ÿè¢«ç§°ä¸º<strong>ä½çº§</strong>å®¹å™¨ï¼Œè€Œ ApplicationContext è¢«ç§°ä¸º<strong>é«˜çº§</strong>å®¹å™¨ã€‚</p>
<h3 id="è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„-BeanFactory-å®¹å™¨ï¼Ÿ"><a href="#è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„-BeanFactory-å®¹å™¨ï¼Ÿ" class="headerlink" title="è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„ BeanFactory å®¹å™¨ï¼Ÿ"></a>è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„ BeanFactory å®¹å™¨ï¼Ÿ</h3><p>BeanFactory æœ€å¸¸ç”¨çš„æ˜¯ XmlBeanFactory ã€‚å®ƒå¯ä»¥æ ¹æ® XML æ–‡ä»¶ä¸­å®šä¹‰çš„å†…å®¹ï¼Œåˆ›å»ºç›¸åº”çš„ Beanã€‚</p>
<h3 id="è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„-ApplicationContext-å®¹å™¨ï¼Ÿ"><a href="#è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„-ApplicationContext-å®¹å™¨ï¼Ÿ" class="headerlink" title="è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„ ApplicationContext å®¹å™¨ï¼Ÿ"></a>è¯·ä»‹ç»ä¸‹å¸¸ç”¨çš„ ApplicationContext å®¹å™¨ï¼Ÿ</h3><p>ä»¥ä¸‹æ˜¯ä¸‰ç§è¾ƒå¸¸è§çš„ ApplicationContext å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><p>1ã€ClassPathXmlApplicationContext ï¼šä» ClassPath çš„ XML é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸Šä¸‹æ–‡ï¼Œå¹¶ç”Ÿæˆä¸Šä¸‹æ–‡å®šä¹‰ã€‚åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä»ç¨‹åºç¯å¢ƒå˜é‡ä¸­å–å¾—ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context &#x3D; new ClassPathXmlApplicationContext(â€œbean.xmlâ€);</span><br></pre></td></tr></table></figure>
</li>
<li><p>2ã€FileSystemXmlApplicationContext ï¼šç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„XMLé…ç½®æ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context &#x3D; new FileSystemXmlApplicationContext(â€œbean.xmlâ€);</span><br></pre></td></tr></table></figure>
</li>
<li><p>3ã€XmlWebApplicationContext ï¼šç”± Web åº”ç”¨çš„XMLæ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨ Spring MVC ä½¿ç”¨çš„æƒ…å†µã€‚</p>
</li>
</ul>
<p>å½“ç„¶ï¼Œç›®å‰æˆ‘ä»¬æ›´å¤šçš„æ˜¯ä½¿ç”¨ Spring Boot ä¸ºä¸»ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯ç¬¬å››ç§ ApplicationContext å®¹å™¨ï¼ŒConfigServletWebServerApplicationContext ã€‚</p>
<h3 id="åˆ—ä¸¾ä¸€äº›-IoC-çš„ä¸€äº›å¥½å¤„ï¼Ÿ"><a href="#åˆ—ä¸¾ä¸€äº›-IoC-çš„ä¸€äº›å¥½å¤„ï¼Ÿ" class="headerlink" title="åˆ—ä¸¾ä¸€äº› IoC çš„ä¸€äº›å¥½å¤„ï¼Ÿ"></a>åˆ—ä¸¾ä¸€äº› IoC çš„ä¸€äº›å¥½å¤„ï¼Ÿ</h3><ul>
<li>å®ƒå°†æœ€å°åŒ–åº”ç”¨ç¨‹åºä¸­çš„ä»£ç é‡ã€‚</li>
<li>å®ƒä»¥æœ€å°çš„å½±å“å’Œæœ€å°‘çš„ä¾µå…¥æœºåˆ¶ä¿ƒè¿›æ¾è€¦åˆã€‚</li>
<li>å®ƒæ”¯æŒå³æ—¶çš„å®ä¾‹åŒ–å’Œå»¶è¿ŸåŠ è½½ Bean å¯¹è±¡ã€‚</li>
<li>å®ƒå°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ˜“äºæµ‹è¯•ï¼Œå› ä¸ºå®ƒä¸éœ€è¦å•å…ƒæµ‹è¯•ç”¨ä¾‹ä¸­çš„ä»»ä½•å•ä¾‹æˆ– JNDI æŸ¥æ‰¾æœºåˆ¶ã€‚</li>
</ul>
<h3 id="ç®€è¿°-Spring-IoC-çš„å®ç°æœºåˆ¶ï¼Ÿ"><a href="#ç®€è¿°-Spring-IoC-çš„å®ç°æœºåˆ¶ï¼Ÿ" class="headerlink" title="ç®€è¿° Spring IoC çš„å®ç°æœºåˆ¶ï¼Ÿ"></a>ç®€è¿° Spring IoC çš„å®ç°æœºåˆ¶ï¼Ÿ</h3><p>ç®€å•æ¥è¯´ï¼ŒSpring ä¸­çš„ IoC çš„å®ç°åŸç†ï¼Œå°±æ˜¯<strong>å·¥å‚æ¨¡å¼</strong>åŠ <strong>åå°„æœºåˆ¶</strong>ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Fruit</span> </span>&#123;     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;     </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">implements</span> <span class="title">Fruit</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        System.out.println(<span class="string">&quot;Apple&quot;</span>);    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Orange</span> <span class="keyword">implements</span> <span class="title">Fruit</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        System.out.println(<span class="string">&quot;Orange&quot;</span>);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Fruit <span class="title">getInstance</span><span class="params">(String className)</span> </span>&#123;        </span><br><span class="line">        Fruit f = <span class="keyword">null</span>;        </span><br><span class="line">        <span class="keyword">try</span> &#123;            </span><br><span class="line">            f = (Fruit) Class.forName(className).newInstance();        </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;            </span><br><span class="line">            e.printStackTrace();        </span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">return</span> f;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;        </span><br><span class="line">        Fruit f = Factory.getInstance(<span class="string">&quot;io.github.dunwu.spring.Apple&quot;</span>);        </span><br><span class="line">        <span class="keyword">if</span>(f != <span class="keyword">null</span>) &#123;            </span><br><span class="line">            f.eat();        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Fruit æ¥å£ï¼Œæœ‰ Apple å’Œ Orange ä¸¤ä¸ªå®ç°ç±»ã€‚</li>
<li>Factory å·¥å‚ï¼Œé€šè¿‡åå°„æœºåˆ¶ï¼Œåˆ›å»º <code>className</code> å¯¹åº”çš„ Fruit å¯¹è±¡ã€‚</li>
<li>Client é€šè¿‡ Factory å·¥å‚ï¼Œè·å¾—å¯¹åº”çš„ Fruit å¯¹è±¡ã€‚</li>
<li>ğŸ˜ˆ å®é™…æƒ…å†µä¸‹ï¼ŒSpring IoC æ¯”è¿™ä¸ªå¤æ‚å¾ˆå¤šå¾ˆå¤šï¼Œä¾‹å¦‚å•ä¾‹ Bean å¯¹è±¡ï¼ŒBean çš„å±æ€§æ³¨å…¥ï¼Œç›¸äº’ä¾èµ–çš„ Bean çš„å¤„ç†ï¼Œä»¥åŠç­‰ç­‰ã€‚</li>
</ul>
<p>åœ¨åŸºå‹ <a target="_blank" rel="noopener" href="http://www.iocoder.cn/Fight/Interview-poorly-asked-Spring-IOC-process-1/">ã€Šé¢è¯•é—®çƒ‚çš„ Spring IoC è¿‡ç¨‹ã€‹</a> çš„æ–‡ç« ä¸­ï¼ŒæŠŠ Spring IoC ç›¸å…³çš„å†…å®¹ï¼Œè®²çš„éå¸¸ä¸é”™ã€‚</p>
<h3 id="Spring-æ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ"><a href="#Spring-æ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ" class="headerlink" title="Spring æ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ"></a>Spring æ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ</h3><p>Spring çš„ ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»º Bean ç”¨æ¥ç›‘å¬åœ¨ ApplicationContext ä¸­å‘å¸ƒçš„äº‹ä»¶ã€‚å¦‚æœä¸€ä¸ª Bean å®ç°äº† ApplicationListener æ¥å£ï¼Œå½“ä¸€ä¸ªApplicationEvent è¢«å‘å¸ƒä»¥åï¼ŒBean ä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AllApplicationEventListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ApplicationEvent</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ApplicationEvent applicationEvent)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// process event  </span></span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Spring æä¾›äº†ä»¥ä¸‹äº”ç§æ ‡å‡†çš„äº‹ä»¶ï¼š</p>
<ol>
<li>ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContext è¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨ConfigurableApplicationContext æ¥å£ä¸­çš„ <code>#refresh()</code> æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚</li>
<li>ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ConfigurableApplicationContext çš„ <code>#start()</code> æ–¹æ³•å¼€å§‹/é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li>ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ ConfigurableApplicationContext çš„ <code>#stop()</code> æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li>ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“ApplicationContext è¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹ Bean éƒ½è¢«é”€æ¯ã€‚</li>
<li>è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨ We båº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªHTTP è¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚</li>
</ol>
<hr>
<p>é™¤äº†ä¸Šé¢ä»‹ç»çš„äº‹ä»¶ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ‰©å±• ApplicationEvent ç±»æ¥å¼€å‘<strong>è‡ªå®šä¹‰</strong>çš„äº‹ä»¶ã€‚</p>
<p>â‘  ç¤ºä¾‹è‡ªå®šä¹‰çš„äº‹ä»¶çš„ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomApplicationEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span></span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomApplicationEvent</span><span class="params">(Object source, <span class="keyword">final</span> String msg)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>(source);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â‘¡ ä¸ºäº†ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomEventListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">CustomApplicationEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(CustomApplicationEvent applicationEvent)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// handle event  </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â‘¢ ä¹‹åé€šè¿‡ ApplicationContext æ¥å£çš„ <code>#publishEvent(Object event)</code> æ–¹æ³•ï¼Œæ¥å‘å¸ƒè‡ªå®šä¹‰äº‹ä»¶ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º CustomApplicationEvent äº‹ä»¶</span></span><br><span class="line">CustomApplicationEvent customEvent = <span class="keyword">new</span> CustomApplicationEvent(</span><br><span class="line">    applicationContext, <span class="string">&quot;Test message&quot;</span>);</span><br><span class="line"><span class="comment">// å‘å¸ƒäº‹ä»¶</span></span><br><span class="line">applicationContext.publishEvent(customEvent);</span><br></pre></td></tr></table></figure>



<h2 id="Spring-Bean"><a href="#Spring-Bean" class="headerlink" title="Spring Bean"></a>Spring Bean</h2><ul>
<li>Bean ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ï¼Œé…ç½®ï¼Œè£…é…å’Œç®¡ç†ã€‚</li>
<li>Bean æ˜¯åŸºäºç”¨æˆ·æä¾›ç»™ IoC å®¹å™¨çš„é…ç½®å…ƒæ•°æ® Bean Definition åˆ›å»ºã€‚</li>
</ul>
<p>è¿™ä¸ªé—®é¢˜ï¼Œèƒ–å‹å¯ä»¥åœ¨å›è¿‡å¤´çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/Interview/#">ã€Œä»€ä¹ˆæ˜¯ Spring IoC å®¹å™¨ï¼Ÿã€</a> é—®é¢˜ï¼Œç›¸äº’å¯¹ç…§ã€‚</p>
<h3 id="Spring-æœ‰å“ªäº›é…ç½®æ–¹å¼"><a href="#Spring-æœ‰å“ªäº›é…ç½®æ–¹å¼" class="headerlink" title="Spring æœ‰å“ªäº›é…ç½®æ–¹å¼?"></a>Spring æœ‰å“ªäº›é…ç½®æ–¹å¼?</h3><p>å•çº¯ä» Spring Framework æä¾›çš„æ–¹å¼ï¼Œä¸€å…±æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li><p>1ã€XML é…ç½®æ–‡ä»¶ã€‚</p>
<p>Bean æ‰€éœ€çš„ä¾èµ–é¡¹å’ŒæœåŠ¡åœ¨ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«è®¸å¤š bean å®šä¹‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é…ç½®é€‰é¡¹ã€‚å®ƒä»¬é€šå¸¸ä»¥ bean æ ‡ç­¾å¼€å¤´ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;studentBean&quot; class&#x3D;&quot;org.edureka.firstSpring.StudentBean&quot;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;Edureka&quot;&gt;&lt;&#x2F;property&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2ã€æ³¨è§£é…ç½®ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡åœ¨ç›¸å…³çš„ç±»ï¼Œæ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£ï¼Œå°† Bean é…ç½®ä¸ºç»„ä»¶ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ XML æ¥æè¿° Bean è£…é…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">&lt;context:annotation-config&#x2F;&gt;</span><br><span class="line">&lt;!-- bean definitions go here --&gt;</span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>3ã€Java Config é…ç½®ã€‚</p>
<p>Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ @Bean å’Œ @Configuration æ¥å®ç°ã€‚</p>
<ul>
<li><p><code>@Bean</code> æ³¨è§£æ‰®æ¼”ä¸ `` å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚</p>
</li>
<li><p><code>@Configuration</code> ç±»å…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– <code>@Bean</code> æ–¹æ³•æ¥å®šä¹‰ Bean é—´ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li><p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class StudentConfig &#123;</span><br><span class="line">    </span><br><span class="line">    @Bean</span><br><span class="line">    public StudentBean myStudent() &#123;</span><br><span class="line">        return new StudentBean();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ ğŸ˜ˆ</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç›®å‰ä¸»è¦ä½¿ç”¨ <strong>Java Config</strong> é…ç½®ä¸ºä¸»ã€‚å½“ç„¶ï¼Œä¸‰ç§é…ç½®æ–¹å¼æ˜¯å¯ä»¥æ··åˆä½¿ç”¨çš„ã€‚ä¾‹å¦‚è¯´ï¼š</p>
<ul>
<li>Dubbo æœåŠ¡çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ä½¿ç”¨ XML ã€‚</li>
<li>Spring MVC è¯·æ±‚çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ä½¿ç”¨ <code>@RequestMapping</code> æ³¨è§£ã€‚</li>
<li>Spring MVC æ‹¦æˆªå™¨çš„é…ç½®ï¼Œè‰¿è‰¿å–œæ¬¢ Java Config é…ç½®ã€‚</li>
</ul>
<hr>
<p>å¦å¤–ï¼Œç°åœ¨å·²ç»æ˜¯ Spring Boot çš„å¤©ä¸‹ï¼Œæ‰€ä»¥æ›´åŠ æ˜¯ <strong>Java Config</strong> é…ç½®ä¸ºä¸»ã€‚</p>
<h3 id="Spring-æ”¯æŒå‡ ç§-Bean-Scope-ï¼Ÿ"><a href="#Spring-æ”¯æŒå‡ ç§-Bean-Scope-ï¼Ÿ" class="headerlink" title="Spring æ”¯æŒå‡ ç§ Bean Scope ï¼Ÿ"></a>Spring æ”¯æŒå‡ ç§ Bean Scope ï¼Ÿ</h3><blockquote>
<p>è¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒå°ä¼—çš„é¢˜ç›®ï¼Œç®€å•äº†è§£å³å¯ã€‚</p>
</blockquote>
<p>Spring Bean æ”¯æŒ 5 ç§ Scope ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>Singleton - æ¯ä¸ª Spring IoC å®¹å™¨ä»…æœ‰ä¸€ä¸ªå• Bean å®ä¾‹ã€‚<strong>é»˜è®¤</strong></li>
<li>Prototype - æ¯æ¬¡è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</li>
<li>Request - æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œå¹¶ä¸”è¯¥ Bean ä»…åœ¨å½“å‰ HTTP è¯·æ±‚å†…æœ‰æ•ˆã€‚</li>
<li>Session - æ¯ä¸€ä¸ªçš„ Session éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼ŒåŒæ—¶è¯¥ Bean ä»…åœ¨å½“å‰ HTTP Session å†…æœ‰æ•ˆã€‚</li>
<li>Application - æ¯ä¸€ä¸ª Web Application éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Bean ï¼ŒåŒæ—¶è¯¥ Bean ä»…åœ¨å½“å‰ Web Application å†…æœ‰æ•ˆã€‚</li>
</ul>
<blockquote>
<p>å¦å¤–ï¼Œç½‘ç»œä¸Šå¾ˆå¤šæ–‡ç« è¯´æœ‰ Global-session çº§åˆ«ï¼Œå®ƒæ˜¯ Portlet æ¨¡å—ç‹¬æœ‰ï¼Œç›®å‰å·²ç»åºŸå¼ƒï¼Œåœ¨ Spring5 ä¸­æ˜¯æ‰¾ä¸åˆ°çš„ã€‚</p>
</blockquote>
<p>ä»…å½“ç”¨æˆ·ä½¿ç”¨æ”¯æŒ Web çš„ ApplicationContext æ—¶ï¼Œ<strong>æœ€åä¸‰ä¸ªæ‰å¯ç”¨</strong>ã€‚</p>
<p>å†è¡¥å……ä¸€ç‚¹ï¼Œå¼€å‘è€…æ˜¯å¯ä»¥<strong>è‡ªå®šä¹‰</strong> Bean Scope ï¼Œå…·ä½“å¯å‚è§ <a target="_blank" rel="noopener" href="https://blog.csdn.net/elim168/article/details/75581670">ã€ŠSpringï¼ˆ10ï¼‰â€”â€” Bean ä½œç”¨èŒƒå›´ï¼ˆäºŒï¼‰â€”â€” è‡ªå®šä¹‰ Scopeã€‹</a> ã€‚</p>
<p>ä¸é”™å‘¢ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œè¿™ä¸ªé¢˜ç›®ç®€å•äº†è§£ä¸‹å³å¯ï¼Œå®é™…å¸¸ç”¨çš„åªæœ‰ Singleton å’Œ Prototype ä¸¤ç§çº§åˆ«ï¼Œç”šè‡³è¯´ï¼Œåªæœ‰ Singleton çº§åˆ«ã€‚</p>
<h3 id="Spring-Bean-åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"><a href="#Spring-Bean-åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ" class="headerlink" title="Spring Bean åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"></a>Spring Bean åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h3><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒé«˜çº§çš„ Spring çš„é¢è¯•é¢˜ï¼Œéå¸¸å¸¸è§ï¼Œå¹¶ä¸”ç­”å¯¹æ¯”è¾ƒåŠ åˆ†ã€‚å½“ç„¶ï¼Œå¦‚æœå®é™…çœŸæ­£å¼„æ‡‚ï¼Œéœ€è¦å¯¹ Spring Bean çš„æºç ï¼Œæœ‰æ¯”è¾ƒå¥½çš„ç†è§£ï¼Œæ‰€ä»¥ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/categories/Spring/">ã€Šç²¾å°½ Spring æºç ã€‹</a> ç³»åˆ—ï¼Œè¯¥è¯»è¿˜æ˜¯è¯»å§ã€‚</p>
</blockquote>
<p>Spring Bean çš„<strong>åˆå§‹åŒ–</strong>æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å®ä¾‹åŒ– Bean å¯¹è±¡</p>
<ul>
<li><p>Spring å®¹å™¨æ ¹æ®é…ç½®ä¸­çš„ Bean Definition(å®šä¹‰)ä¸­<strong>å®ä¾‹åŒ–</strong> Bean å¯¹è±¡ã€‚</p>
<blockquote>
<p>Bean Definition å¯ä»¥é€šè¿‡ XMLï¼ŒJava æ³¨è§£æˆ– Java Config ä»£ç æä¾›ã€‚</p>
</blockquote>
</li>
<li><p>Spring ä½¿ç”¨ä¾èµ–æ³¨å…¥<strong>å¡«å……</strong>æ‰€æœ‰å±æ€§ï¼Œå¦‚ Bean ä¸­æ‰€å®šä¹‰çš„é…ç½®ã€‚</p>
</li>
</ul>
</li>
<li><p>Aware ç›¸å…³çš„å±æ€§ï¼Œæ³¨å…¥åˆ° Bean å¯¹è±¡</p>
<ul>
<li>å¦‚æœ Bean å®ç° <strong>BeanNameAware</strong> æ¥å£ï¼Œåˆ™å·¥å‚é€šè¿‡ä¼ é€’ Bean çš„ beanName æ¥è°ƒç”¨ <code>#setBeanName(String name)</code> æ–¹æ³•ã€‚</li>
<li>å¦‚æœ Bean å®ç° <strong>BeanFactoryAware</strong> æ¥å£ï¼Œå·¥å‚é€šè¿‡ä¼ é€’è‡ªèº«çš„å®ä¾‹æ¥è°ƒç”¨ <code>#setBeanFactory(BeanFactory beanFactory)</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><p>è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œè¿›ä¸€æ­¥åˆå§‹åŒ– Bean å¯¹è±¡</p>
<ul>
<li>å¦‚æœå­˜åœ¨ä¸ Bean å…³è”çš„ä»»ä½• <strong>BeanPostProcessor</strong> ä»¬ï¼Œåˆ™è°ƒç”¨ <code>#preProcessBeforeInitialization(Object bean, String beanName)</code> æ–¹æ³•ã€‚</li>
<li>å¦‚æœ Bean å®ç° <strong>InitializingBean</strong> æ¥å£ï¼Œåˆ™ä¼šè°ƒç”¨ <code>#afterPropertiesSet()</code> æ–¹æ³•ã€‚</li>
<li>å¦‚æœä¸º Bean æŒ‡å®šäº† <strong>init</strong> æ–¹æ³•ï¼ˆä¾‹å¦‚ `` çš„ <code>init-method</code> å±æ€§ï¼‰ï¼Œé‚£ä¹ˆå°†è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
<li>å¦‚æœå­˜åœ¨ä¸ Bean å…³è”çš„ä»»ä½• <strong>BeanPostProcessor</strong> ä»¬ï¼Œåˆ™å°†è°ƒç”¨ <code>#postProcessAfterInitialization(Object bean, String beanName)</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
<p>Spring Bean çš„<strong>é”€æ¯</strong>æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¦‚æœ Bean å®ç° <strong>DisposableBean</strong> æ¥å£ï¼Œå½“ spring å®¹å™¨å…³é—­æ—¶ï¼Œä¼šè°ƒç”¨ <code>#destroy()</code> æ–¹æ³•ã€‚</li>
<li>å¦‚æœä¸º bean æŒ‡å®šäº† <strong>destroy</strong> æ–¹æ³•ï¼ˆä¾‹å¦‚ `` çš„ <code>destroy-method</code> å±æ€§ï¼‰ï¼Œé‚£ä¹ˆå°†è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
</ul>
<p>æ•´ä½“å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/03.jpg" alt="æµç¨‹å›¾"></p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/08.png" alt="æµç¨‹å›¾"></p>
<h3 id="ä»€ä¹ˆæ˜¯-Spring-çš„å†…éƒ¨-beanï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-çš„å†…éƒ¨-beanï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring çš„å†…éƒ¨ beanï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Spring çš„å†…éƒ¨ beanï¼Ÿ</h3><p>åªæœ‰å°† Bean <strong>ä»…</strong>ç”¨ä½œå¦ä¸€ä¸ª Bean çš„å±æ€§æ—¶ï¼Œæ‰èƒ½å°† Bean å£°æ˜ä¸ºå†…éƒ¨ Beanã€‚</p>
<ul>
<li>ä¸ºäº†å®šä¹‰ Beanï¼ŒSpring æä¾›åŸºäº XML çš„é…ç½®å…ƒæ•°æ®åœ¨ <code>æˆ– </code> ä¸­æä¾›äº† ``å…ƒç´ çš„ä½¿ç”¨ã€‚</li>
<li>å†…éƒ¨ Bean æ€»æ˜¯<strong>åŒ¿å</strong>çš„ï¼Œå¹¶ä¸”å®ƒä»¬æ€»æ˜¯ä½œä¸º<strong>åŸå‹ Prototype</strong> ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Student ç±»ï¼Œå…¶ä¸­å¼•ç”¨äº† Person ç±»ã€‚è¿™é‡Œæˆ‘ä»¬å°†åªåˆ›å»ºä¸€ä¸ª Person ç±»å®ä¾‹å¹¶åœ¨ Student ä¸­ä½¿ç”¨å®ƒã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Student.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ... Setters and Getters</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ... Setters and Getters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bean.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">â€œStudentBean</span>&quot; <span class="attr">class</span>=<span class="string">&quot;com.edureka.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--This is inner bean --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.edureka.Person&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">â€œScott</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">â€œBangalore</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="ä»€ä¹ˆæ˜¯-Spring-è£…é…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-è£…é…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring è£…é…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Spring è£…é…ï¼Ÿ</h3><p>å½“ Bean åœ¨ Spring å®¹å™¨ä¸­ç»„åˆåœ¨ä¸€èµ·æ—¶ï¼Œå®ƒè¢«ç§°ä¸º<strong>è£…é…</strong>æˆ– <strong>Bean è£…é…</strong>ã€‚Spring å®¹å™¨éœ€è¦çŸ¥é“éœ€è¦ä»€ä¹ˆ Bean ä»¥åŠå®¹å™¨åº”è¯¥å¦‚ä½•ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥å°† Bean ç»‘å®šåœ¨ä¸€èµ·ï¼ŒåŒæ—¶è£…é… Bean ã€‚</p>
<blockquote>
<p>è£…é…ï¼Œå’Œä¸Šæ–‡æåˆ°çš„ DI ä¾èµ–æ³¨å…¥ï¼Œå®é™…æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</p>
</blockquote>
<p><strong>è‡ªåŠ¨è£…é…æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</strong></p>
<p>Spring å®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨è£…é… Bean ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥ BeanFactory çš„å†…å®¹è®© Spring è‡ªåŠ¨è§£æ Bean çš„åä½œè€…ã€‚</p>
<p>è‡ªåŠ¨è£…é…çš„ä¸åŒæ¨¡å¼ï¼š</p>
<ul>
<li>no - è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œè¡¨ç¤ºæ²¡æœ‰è‡ªåŠ¨è£…é…ã€‚åº”ä½¿ç”¨æ˜¾å¼ Bean å¼•ç”¨è¿›è¡Œè£…é…ã€‚</li>
<li>byName - å®ƒæ ¹æ® Bean çš„åç§°æ³¨å…¥å¯¹è±¡ä¾èµ–é¡¹ã€‚å®ƒåŒ¹é…å¹¶è£…é…å…¶å±æ€§ä¸ XML æ–‡ä»¶ä¸­ç”±ç›¸åŒåç§°å®šä¹‰çš„ Bean ã€‚</li>
<li>ã€æœ€å¸¸ç”¨ã€‘<strong>byType</strong> - å®ƒæ ¹æ®ç±»å‹æ³¨å…¥å¯¹è±¡ä¾èµ–é¡¹ã€‚å¦‚æœå±æ€§çš„ç±»å‹ä¸ XML æ–‡ä»¶ä¸­çš„ä¸€ä¸ª Bean ç±»å‹åŒ¹é…ï¼Œåˆ™åŒ¹é…å¹¶è£…é…å±æ€§ã€‚</li>
<li>æ„é€ å‡½æ•° - å®ƒé€šè¿‡è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ¥æ³¨å…¥ä¾èµ–é¡¹ã€‚å®ƒæœ‰å¤§é‡çš„å‚æ•°ã€‚</li>
<li>autodetect - é¦–å…ˆå®¹å™¨å°è¯•é€šè¿‡æ„é€ å‡½æ•°ä½¿ç”¨ autowire è£…é…ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å°è¯•é€šè¿‡ byType è‡ªåŠ¨è£…é…ã€‚</li>
</ul>
<p><strong>è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™ï¼Ÿ</strong></p>
<blockquote>
<p>è‰¿è‰¿ï¼šè¿™ä¸ªé¢˜ç›®ï¼Œäº†è§£ä¸‹å³å¯ï¼Œä¹Ÿä¸æ˜¯å¾ˆå‡†ç¡®ã€‚</p>
</blockquote>
<ul>
<li><p>è¦†ç›–çš„å¯èƒ½æ€§ - æ‚¨å§‹ç»ˆå¯ä»¥ä½¿ç”¨<constructor-arg>å’Œ<property>è®¾ç½®æŒ‡å®šä¾èµ–é¡¹ï¼Œè¿™å°†è¦†ç›–è‡ªåŠ¨è£…é…ã€‚</p>
</li>
<li><p>åŸºæœ¬å…ƒæ•°æ®ç±»å‹ - ç®€å•å±æ€§ï¼ˆå¦‚åŸæ•°æ®ç±»å‹ï¼Œå­—ç¬¦ä¸²å’Œç±»ï¼‰æ— æ³•è‡ªåŠ¨è£…é…ã€‚</p>
<blockquote>
<p>è¿™ç§ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œä¹Ÿä¸èƒ½ç§°ä¸ºå±€é™ã€‚å› ä¸ºå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è§£å†³ã€‚</p>
</blockquote>
</li>
<li><p>ä»¤äººå›°æƒ‘çš„æ€§è´¨ - æ€»æ˜¯å–œæ¬¢ä½¿ç”¨æ˜ç¡®çš„è£…é…ï¼Œå› ä¸ºè‡ªåŠ¨è£…é…ä¸å¤ªç²¾ç¡®ã€‚</p>
</li>
</ul>
<h3 id="è§£é‡Šä»€ä¹ˆå«å»¶è¿ŸåŠ è½½ï¼Ÿ"><a href="#è§£é‡Šä»€ä¹ˆå«å»¶è¿ŸåŠ è½½ï¼Ÿ" class="headerlink" title="è§£é‡Šä»€ä¹ˆå«å»¶è¿ŸåŠ è½½ï¼Ÿ"></a>è§£é‡Šä»€ä¹ˆå«å»¶è¿ŸåŠ è½½ï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯åŠ¨ä¹‹åä¼šå°†æ‰€æœ‰ä½œç”¨åŸŸä¸º<strong>å•ä¾‹</strong>çš„ Bean éƒ½åˆ›å»ºå¥½ï¼Œä½†æ˜¯æœ‰çš„ä¸šåŠ¡åœºæ™¯æˆ‘ä»¬å¹¶ä¸éœ€è¦å®ƒæå‰éƒ½åˆ›å»ºå¥½ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Bean ä¸­è®¾ç½® <code>lzay-init = &quot;true&quot;</code> ã€‚</p>
<ul>
<li>è¿™æ ·ï¼Œå½“å®¹å™¨å¯åŠ¨ä¹‹åï¼Œä½œç”¨åŸŸä¸ºå•ä¾‹çš„ Bean ï¼Œå°±ä¸åœ¨åˆ›å»ºã€‚</li>
<li>è€Œæ˜¯åœ¨è·å¾—è¯¥ Bean æ—¶ï¼Œæ‰çœŸæ­£åœ¨åˆ›å»ºåŠ è½½ã€‚</li>
</ul>
<h3 id="Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Bean-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"><a href="#Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Bean-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ" class="headerlink" title="Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"></a>Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ</h3><p>Spring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹<a target="_blank" rel="noopener" href="http://howtodoinjava.com/2012/10/22/singleton-design-pattern-in-java/">å•ä¾‹</a> Bean è¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p>
<ul>
<li>å…³äºå•ä¾‹ Bean çš„<a target="_blank" rel="noopener" href="http://howtodoinjava.com/2014/06/02/what-is-thread-safety/">çº¿ç¨‹å®‰å…¨</a>å’Œå¹¶å‘é—®é¢˜ï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚</li>
<li>å¹¶ä¸”ï¼Œå•ä¾‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¹Ÿä¸æ˜¯ Spring åº”è¯¥å»å…³å¿ƒçš„ã€‚Spring åº”è¯¥åšçš„æ˜¯ï¼Œæä¾›æ ¹æ®é…ç½®ï¼Œåˆ›å»ºå•ä¾‹ Bean æˆ–å¤šä¾‹ Bean çš„åŠŸèƒ½ã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„ Spring Bean å¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€(æ¯”å¦‚Service ç±»å’Œ DAO ç±»)ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´ Spring çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>å¦‚æœä½ çš„ Bean æœ‰å¤šç§çŠ¶æ€çš„è¯ï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æœ€æµ…æ˜¾çš„è§£å†³åŠæ³•ï¼Œå°±æ˜¯å°†å¤šæ€ Bean çš„ä½œç”¨åŸŸ( Scope )ç”± Singleton å˜æ›´ä¸º Prototype ã€‚</p>
<h3 id="Spring-Bean-æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Ÿ"><a href="#Spring-Bean-æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="Spring Bean æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Ÿ"></a>Spring Bean æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Ÿ</h3><blockquote>
<p>è‰¿è‰¿è¯´ï¼šèƒ½å›ç­”å‡ºè¿™ä¸ªé—®é¢˜çš„ï¼Œä¸€èˆ¬æ˜¯æ¯”è¾ƒå‰å®³çš„ã€‚</p>
</blockquote>
<p>è¿™æ˜¯ä¸ªæ¯”è¾ƒå¤æ‚çš„é—®é¢˜ï¼Œæœ‰èƒ½åŠ›çš„èƒ–å‹ï¼Œå»ºè®®çœ‹ä¸‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/IoC-get-Bean-createBean-5/">ã€Šã€æ­»ç£• Springã€‘â€”â€” IoC ä¹‹åŠ è½½ Beanï¼šåˆ›å»º Beanï¼ˆäº”ï¼‰ä¹‹å¾ªç¯ä¾èµ–å¤„ç†ã€‹</a></p>
<p>æ„Ÿè§‰ï¼Œä¸é€šè¿‡æºç ï¼Œå¾ˆéš¾è§£é‡Šæ¸…æ¥šè¿™ä¸ªé—®é¢˜ã€‚å¦‚æœçœ‹ä¸æ‡‚çš„èƒ–å‹ï¼Œå¯ä»¥åœ¨è®¤çœŸçœ‹å®Œï¼Œåœ¨æ˜Ÿçƒé‡Œï¼Œæˆ‘ä»¬ä¸€èµ·å¤šäº¤æµä¸‹ã€‚å¥½ç©çš„ã€‚</p>
<h2 id="Spring-æ³¨è§£"><a href="#Spring-æ³¨è§£" class="headerlink" title="Spring æ³¨è§£"></a>Spring æ³¨è§£</h2><p>è¿™å—å†…å®¹ï¼Œå®é™…å†™åœ¨ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/Interview/#">ã€ŒSpring Beanã€</a> ä¸­æ¯”è¾ƒåˆé€‚ï¼Œè€ƒè™‘åˆ°åç»­çš„é—®é¢˜ï¼Œéƒ½æ˜¯å…³äºæ³¨è§£çš„ï¼Œæ‰€ä»¥å•ç‹¬èµ·ä¸€ä¸ªå¤§çš„ç« èŠ‚ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ</h3><p>ä¸ä½¿ç”¨ XML æ¥æè¿° Bean è£…é…ï¼Œå¼€å‘äººå‘˜é€šè¿‡åœ¨ç›¸å…³çš„ç±»ï¼Œæ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨<strong>æ³¨è§£</strong>å°†é…ç½®ç§»åŠ¨åˆ°ç»„ä»¶ç±»æœ¬èº«ã€‚å®ƒå¯ä»¥ä½œä¸º XML è®¾ç½®çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼š</p>
<p>Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ <code>@Bean</code> å’Œ <code>@Configuration</code> æ¥å®ç°ã€‚</p>
<ul>
<li><code>@Bean</code> æ³¨è§£ï¼Œæ‰®æ¼”ä¸ <code>&lt;bean /&gt;</code> å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚</li>
<li><code>@Configuration</code> æ³¨è§£çš„ç±»ï¼Œå…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– <code>@Bean</code> æ–¹æ³•æ¥å®šä¹‰ Bean é—´ä¾èµ–å…³ç³»ã€‚</li>
</ul>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StudentBean <span class="title">myStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StudentBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="å¦‚ä½•åœ¨-Spring-ä¸­å¯åŠ¨æ³¨è§£è£…é…ï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Spring-ä¸­å¯åŠ¨æ³¨è§£è£…é…ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Spring ä¸­å¯åŠ¨æ³¨è§£è£…é…ï¼Ÿ"></a>å¦‚ä½•åœ¨ Spring ä¸­å¯åŠ¨æ³¨è§£è£…é…ï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œè¦ä½¿ç”¨åŸºäºæ³¨è§£è£…é…ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡é…ç½® `` å…ƒç´ åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœèƒ–å‹æ˜¯ä½¿ç”¨ Spring Boot ï¼Œé»˜è®¤æƒ…å†µä¸‹å·²ç»å¼€å¯ã€‚</p>
<h3 id="Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ"><a href="#Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ" class="headerlink" title="@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ"></a>@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><ul>
<li><code>@Component</code> ï¼šå®ƒå°† Java ç±»æ ‡è®°ä¸º Bean ã€‚å®ƒæ˜¯ä»»ä½• Spring ç®¡ç†ç»„ä»¶çš„<strong>é€šç”¨</strong>æ„é€ å‹ã€‚</li>
<li><code>@Controller</code> ï¼šå®ƒå°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC <strong>æ§åˆ¶å™¨</strong>ã€‚</li>
<li><code>@Service</code> ï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ <code>@Component</code> æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨<strong>æœåŠ¡å±‚</strong>ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ <code>@Component</code> ï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚</li>
<li><code>@Repository</code> ï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ <code>@Component</code> æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º <strong>DAO</strong> æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessException ã€‚</li>
</ul>
<h3 id="Required-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#Required-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@Required æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@Required æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><code>@Required</code> æ³¨è§£ï¼Œåº”ç”¨äº Bean å±æ€§ setter æ–¹æ³•ã€‚</p>
<ul>
<li>æ­¤æ³¨è§£ä»…æŒ‡ç¤ºå¿…é¡»åœ¨é…ç½®æ—¶ä½¿ç”¨ Bean å®šä¹‰ä¸­çš„æ˜¾å¼å±æ€§å€¼æˆ–ä½¿ç”¨è‡ªåŠ¨è£…é…å¡«å……å—å½±å“çš„ Bean å±æ€§ã€‚</li>
<li>å¦‚æœå°šæœªå¡«å……å—å½±å“çš„ Bean å±æ€§ï¼Œåˆ™å®¹å™¨å°†æŠ›å‡º BeanInitializationException å¼‚å¸¸ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Required</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> string <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>T T è²Œä¼¼å¹³æ—¶å¾ˆå°‘ç”¨è¿™ä¸ªæ³¨è§£å™¢ã€‚</li>
</ul>
<h3 id="Autowired-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#Autowired-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@Autowired æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@Autowired æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><code>@Autowired</code> æ³¨è§£ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°æ§åˆ¶åº”è¯¥åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</p>
<ul>
<li>æ­¤æ³¨è§£ç”¨äºåœ¨ setter æ–¹æ³•ï¼Œæ„é€ å‡½æ•°ï¼Œå…·æœ‰ä»»æ„åç§°æˆ–å¤šä¸ªå‚æ•°çš„å±æ€§æˆ–æ–¹æ³•ä¸Šè‡ªåŠ¨è£…é… Beanã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç±»å‹é©±åŠ¨çš„æ³¨å…¥ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmpAccount</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Employee emp;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>å½“ä½ åˆ›å»ºå¤šä¸ª<strong>ç›¸åŒç±»å‹</strong>çš„ Bean ï¼Œå¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…<strong>å…¶ä¸­ä¸€ä¸ª</strong> Bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>@Qualifier</code> æ³¨è§£å’Œ <code>@Autowired</code> é€šè¿‡æŒ‡å®š ID åº”è¯¥è£…é…å“ªä¸ª<strong>ç¡®åˆ‡çš„</strong> Bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåº”ç”¨ä¸­æœ‰ä¸¤ä¸ªç±»å‹ä¸º Employee çš„ Bean ID ä¸º <code>&quot;emp1&quot;</code> å’Œ <code>&quot;emp2&quot;</code> ï¼Œæ­¤å¤„ï¼Œæˆ‘ä»¬å¸Œæœ› EmployeeAccount Bean æ³¨å…¥ <code>&quot;emp1&quot;</code> å¯¹åº”çš„ Bean å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeAccount</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(emp1)</span></span><br><span class="line">    <span class="keyword">private</span> Employee emp;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><blockquote>
<p>Spring AOP çš„é¢è¯•é¢˜ä¸­ï¼Œå¤§å¤šæ•°éƒ½æ˜¯æ¦‚å¿µé¢˜ï¼Œä¸»è¦æ˜¯å¯¹åˆ‡é¢çš„ç†è§£ã€‚æ¦‚å¿µç‚¹ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>AOP</li>
<li>Aspect</li>
<li>JoinPoint</li>
<li>PointCut</li>
<li>Advice</li>
<li>Target</li>
<li>AOP Proxy</li>
<li>Weaving</li>
</ul>
</blockquote>
<ul>
<li>åœ¨é˜…è¯»å®Œ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/Interview/#">ã€ŒSpring AOPã€</a> çš„é¢è¯•é¢˜åï¼Œåœ¨å›è¿‡å¤´æ€è€ƒä¸‹è¿™äº›æ¦‚å¿µç‚¹ï¼Œåˆ°åº•ç†è§£äº†å¤šå°‘ã€‚æ³¨æ„ï¼Œä¸æ˜¯èƒŒï¼Œç†è§£ï¼</li>
</ul>
<p>éå¸¸æ¨èé˜…è¯»å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007469968">ã€Šå½»åº•å¾æœ Spring AOP ä¹‹ç†è®ºç¯‡ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007469982">ã€Šå½»åº•å¾æœ Spring AOP ä¹‹å®æˆ˜ç¯‡ã€‹</a></li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯-AOP-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-AOP-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ AOP ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ AOP ï¼Ÿ</h3><p>AOP(Aspect-Oriented Programming)ï¼Œå³<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>, å®ƒä¸ OOP( Object-Oriented Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹) ç›¸è¾…ç›¸æˆï¼Œ æä¾›äº†ä¸ OOP ä¸åŒçš„æŠ½è±¡è½¯ä»¶ç»“æ„çš„è§†è§’ã€‚</p>
<ul>
<li>åœ¨ OOP ä¸­ï¼Œä»¥ç±»( Class )ä½œä¸ºåŸºæœ¬å•å…ƒ</li>
<li>åœ¨ AOP ä¸­ï¼Œä»¥**åˆ‡é¢( Aspect )**ä½œä¸ºåŸºæœ¬å•å…ƒã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯-Aspect-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Aspect-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Aspect ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Aspect ï¼Ÿ</h3><p>Aspect ç”± <strong>PointCut</strong> å’Œ <strong>Advice</strong> ç»„æˆã€‚</p>
<ul>
<li>å®ƒæ—¢åŒ…å«äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰ï¼Œä¹ŸåŒ…æ‹¬äº†è¿æ¥ç‚¹çš„å®šä¹‰ã€‚</li>
<li>Spring AOP å°±æ˜¯è´Ÿè´£å®æ–½åˆ‡é¢çš„æ¡†æ¶ï¼Œå®ƒå°†åˆ‡é¢æ‰€å®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ç¼–ç»‡åˆ°åˆ‡é¢æ‰€æŒ‡å®šçš„è¿æ¥ç‚¹ä¸­ã€‚</li>
</ul>
<p>AOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:</p>
<ol>
<li>å¦‚ä½•é€šè¿‡ PointCut å’Œ Advice å®šä½åˆ°ç‰¹å®šçš„ <strong>JoinPoint</strong> ä¸Šã€‚</li>
<li>å¦‚ä½•åœ¨ Advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç ã€‚</li>
</ol>
<p><strong>å¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢</strong></p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/04.jpg" alt="æµç¨‹å›¾"></p>
<h3 id="ä»€ä¹ˆæ˜¯-JoinPoint"><a href="#ä»€ä¹ˆæ˜¯-JoinPoint" class="headerlink" title="ä»€ä¹ˆæ˜¯ JoinPoint ?"></a>ä»€ä¹ˆæ˜¯ JoinPoint ?</h3><p>JoinPoint ï¼Œ<strong>åˆ‡ç‚¹</strong>ï¼Œç¨‹åºè¿è¡Œä¸­çš„ä¸€äº›æ—¶é—´ç‚¹, ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚</li>
<li>æˆ–è€…æ˜¯ä¸€ä¸ªå¼‚å¸¸çš„å¤„ç†ã€‚</li>
</ul>
<p>åœ¨ Spring AOP ä¸­ï¼ŒJoinPoint æ€»æ˜¯æ–¹æ³•çš„æ‰§è¡Œç‚¹ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯-PointCut-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-PointCut-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ PointCut ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ PointCut ï¼Ÿ</h3><p>PointCut ï¼Œ<strong>åŒ¹é…</strong> JoinPoint çš„è°“è¯(a predicate that matches join points)ã€‚</p>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼ŒPointCut æ˜¯åŒ¹é… JoinPoint çš„æ¡ä»¶ã€‚</p>
</blockquote>
<ul>
<li>Advice æ˜¯å’Œç‰¹å®šçš„ PointCut å…³è”çš„ï¼Œå¹¶ä¸”åœ¨ PointCut ç›¸åŒ¹é…çš„ JoinPoint ä¸­æ‰§è¡Œã€‚å³ <code>Advice =&gt; PointCut =&gt; JoinPoint</code> ã€‚</li>
<li>åœ¨ Spring ä¸­, æ‰€æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ JoinPoint ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨æ‰€æœ‰çš„æ–¹æ³•ä¸Šéƒ½æ·»åŠ  Advice ã€‚<strong>è€Œ PointCut çš„ä½œç”¨</strong>ï¼Œå°±æ˜¯æä¾›ä¸€ç»„è§„åˆ™(ä½¿ç”¨ AspectJ PointCut expression language æ¥æè¿°) æ¥åŒ¹é… JoinPoint ï¼Œç»™æ»¡è¶³è§„åˆ™çš„ JoinPoint æ·»åŠ  Advice ã€‚</li>
</ul>
<p>æ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹ç»•ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œå…¶å®ä¹Ÿä¸ä¼šå¼„çš„è¿™ä¹ˆæ¸…æ¥š~~</p>
<h3 id="å…³äº-JoinPoint-å’Œ-PointCut-çš„åŒºåˆ«"><a href="#å…³äº-JoinPoint-å’Œ-PointCut-çš„åŒºåˆ«" class="headerlink" title="å…³äº JoinPoint å’Œ PointCut çš„åŒºåˆ«"></a>å…³äº JoinPoint å’Œ PointCut çš„åŒºåˆ«</h3><p>JoinPoint å’Œ PointCut æœ¬è´¨ä¸Šå°±æ˜¯<strong>ä¸¤ä¸ªä¸åŒçº¬åº¦ä¸Š</strong>çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>åœ¨ Spring AOP ä¸­ï¼Œæ‰€æœ‰çš„æ–¹æ³•æ‰§è¡Œéƒ½æ˜¯ JoinPoint ã€‚è€Œ PointCut æ˜¯ä¸€ä¸ªæè¿°ä¿¡æ¯ï¼Œå®ƒä¿®é¥°çš„æ˜¯ JoinPoint ï¼Œé€šè¿‡ PointCut ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šå“ªäº› JoinPoint å¯ä»¥è¢«ç»‡å…¥ Advice ã€‚</li>
<li>Advice æ˜¯åœ¨ JoinPoint ä¸Šæ‰§è¡Œçš„ï¼Œè€Œ PointCut è§„å®šäº†å“ªäº› JoinPoint å¯ä»¥æ‰§è¡Œå“ªäº› Advice ã€‚</li>
</ul>
<p>æˆ–è€…ï¼Œæˆ‘ä»¬åœ¨æ¢ä¸€ç§è¯´æ³•ï¼š</p>
<ol>
<li>é¦–å…ˆï¼ŒAdvice é€šè¿‡ PointCut æŸ¥è¯¢éœ€è¦è¢«ç»‡å…¥çš„ JoinPoint ã€‚</li>
<li>ç„¶åï¼ŒAdvice åœ¨æŸ¥è¯¢åˆ° JoinPoint ä¸Šæ‰§è¡Œé€»è¾‘ã€‚</li>
</ol>
<h3 id="ä»€ä¹ˆæ˜¯-Advice-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Advice-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Advice ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Advice ï¼Ÿ</h3><p>Advice ï¼Œ<strong>é€šçŸ¥</strong>ã€‚</p>
<ul>
<li>ç‰¹å®š JoinPoint å¤„çš„ Aspect æ‰€é‡‡å–çš„åŠ¨ä½œç§°ä¸º Advice ã€‚</li>
<li>Spring AOP ä½¿ç”¨ä¸€ä¸ª Advice ä½œä¸ºæ‹¦æˆªå™¨ï¼Œåœ¨ JoinPoint â€œå‘¨å›´â€ç»´æŠ¤ä¸€ç³»åˆ—çš„<strong>æ‹¦æˆªå™¨</strong>ã€‚</li>
</ul>
<p><strong>æœ‰å“ªäº›ç±»å‹çš„ Adviceï¼Ÿ</strong></p>
<ul>
<li>Before - è¿™äº›ç±»å‹çš„ Advice åœ¨ JoinPoint æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ <code>@Before</code> æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li>
<li>After Returning - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹æ–¹æ³•æ­£å¸¸æ‰§è¡Œåæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ <code>@AfterReturning</code> æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li>
<li>After Throwing - è¿™äº›ç±»å‹çš„ Advice ä»…åœ¨ JoinPoint æ–¹æ³•é€šè¿‡æŠ›å‡ºå¼‚å¸¸é€€å‡ºå¹¶ä½¿ç”¨ <code>@AfterThrowing</code> æ³¨è§£æ ‡è®°é…ç½®æ—¶æ‰§è¡Œã€‚</li>
<li>After Finally - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•é€€å‡ºæ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸è¿”å›ï¼Œå¹¶ä½¿ç”¨ <code>@After</code> æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li>
<li>Around - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹ä¹‹å‰å’Œä¹‹åæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ <code>@Around</code> æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li>
</ul>
<p>çœ‹èµ·æ¥ï¼Œæ˜¯ä¸æ˜¯å’Œæ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶é—´ï¼Œæœ‰å‡ åˆ†ç›¸ä¼¼ã€‚å®é™…ä¸Šï¼Œç”¨äºæ‹¦æˆªæ•ˆæœçš„å„ç§å®ç°ï¼Œå¤§ä½“éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯-Target-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Target-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Target ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Target ï¼Ÿ</h3><p>Target ï¼Œç»‡å…¥ Advice çš„<strong>ç›®æ ‡å¯¹è±¡</strong>ã€‚ç›®æ ‡å¯¹è±¡ä¹Ÿè¢«ç§°ä¸º <strong>Advised Object</strong> ã€‚</p>
<ul>
<li>å› ä¸º Spring AOP ä½¿ç”¨è¿è¡Œæ—¶ä»£ç†çš„æ–¹å¼æ¥å®ç° Aspect ï¼Œå› æ­¤ Advised Object æ€»æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡(Proxied Object) ã€‚</li>
<li><strong>æ³¨æ„, Advised Object æŒ‡çš„ä¸æ˜¯åŸæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯ç»‡å…¥ Advice åæ‰€äº§ç”Ÿçš„ä»£ç†å¯¹è±¡</strong>ã€‚</li>
<li>Advice + Target Object = Advised Object = Proxy ã€‚</li>
</ul>
<h3 id="AOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ"><a href="#AOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="AOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ"></a>AOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>å®ç° AOP çš„æŠ€æœ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ul>
<li><p>â‘  <strong>é™æ€ä»£ç†</strong> - æŒ‡ä½¿ç”¨ AOP æ¡†æ¶æä¾›çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä»è€Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ç”Ÿæˆ AOP ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºã€‚</p>
<ul>
<li><p>ç¼–è¯‘æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šç¼–è¯‘å™¨å®ç°ï¼‰</p>
</li>
<li><p>ç±»åŠ è½½æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šçš„ç±»åŠ è½½å™¨å®ç°ï¼‰ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼ŒSkyWalking åŸºäº Java Agent æœºåˆ¶ï¼Œé…ç½®ä¸Š ByteBuddy åº“ï¼Œå®ç°ç±»åŠ è½½æ—¶ç¼–ç»‡æ—¶å¢å¼ºï¼Œä»è€Œå®ç°é“¾è·¯è¿½è¸ªçš„é€æ˜åŸ‹ç‚¹ã€‚</p>
<p>æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://www.kailing.pub/article/index/arcid/178.html">ã€ŠSkyWalking æºç åˆ†æä¹‹ JavaAgent å·¥å…· ByteBuddy çš„åº”ç”¨ã€‹</a> ã€‚</p>
</blockquote>
</li>
</ul>
</li>
<li><p>â‘¡ <strong>åŠ¨æ€ä»£ç†</strong> - åœ¨è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­â€œä¸´æ—¶â€ç”Ÿæˆ AOP åŠ¨æ€ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºè¿è¡Œæ—¶å¢å¼ºã€‚ç›®å‰ Spring ä¸­ä½¿ç”¨äº†ä¸¤ç§åŠ¨æ€ä»£ç†åº“ï¼š</p>
<ul>
<li>JDK åŠ¨æ€ä»£ç†</li>
<li>CGLIB</li>
</ul>
</li>
</ul>
<p>é‚£ä¹ˆ Spring ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ CGLIB å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; From ã€ŠSpring æºç æ·±åº¦è§£æã€‹P172</span><br><span class="line">&#x2F;&#x2F; Spring AOP éƒ¨åˆ†ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†æˆ–è€… CGLIB æ¥ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†ã€‚ï¼ˆå»ºè®®å°½é‡ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†ï¼‰</span><br><span class="line">&#x2F;&#x2F; å¦‚æœè¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œåˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚æ‰€æœ‰è¯¥ç›®æ ‡ç±»å‹å®ç°çš„æ¥å£éƒ½è®²è¢«ä»£ç†ã€‚</span><br><span class="line">&#x2F;&#x2F; è‹¥è¯¥ç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª CGLIB ä»£ç†ã€‚</span><br><span class="line">&#x2F;&#x2F; å¦‚æœä½ å¸Œæœ›å¼ºåˆ¶ä½¿ç”¨ CGLIB ä»£ç†ï¼Œï¼ˆä¾‹å¦‚å¸Œæœ›ä»£ç†ç›®æ ‡å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ï¼Œè€Œä¸åªæ˜¯å®ç°è‡ªæ¥å£çš„æ–¹æ³•ï¼‰é‚£ä¹Ÿå¯ä»¥ã€‚ä½†æ˜¯éœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</span><br><span class="line">&#x2F;&#x2F;      1&gt; æ— æ³•é€šçŸ¥(advise) Final æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½è¢«è¦†ç›–ã€‚</span><br><span class="line">&#x2F;&#x2F;      2&gt; ä½ éœ€è¦å°† CGLIB äºŒè¿›åˆ¶å‘å‹åŒ…æ”¾åœ¨ classpath ä¸‹é¢ã€‚</span><br><span class="line">&#x2F;&#x2F; ä¸ºä»€ä¹ˆ Spring é»˜è®¤ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†å‘¢ï¼Ÿç¬”è€…çŒœæµ‹åŸå› å¦‚ä¸‹ï¼š</span><br><span class="line">&#x2F;&#x2F;      1&gt; ä½¿ç”¨ JDK åŸç”Ÿæ”¯æŒï¼Œå‡å°‘ä¸‰æ–¹ä¾èµ–</span><br><span class="line">&#x2F;&#x2F;      2&gt; JDK8 å¼€å§‹åï¼ŒJDK ä»£ç†çš„æ€§èƒ½å·®è· CGLIB çš„æ€§èƒ½ä¸ä¼šå¤ªå¤šã€‚å¯å‚è§ï¼šhttps:&#x2F;&#x2F;www.cnblogs.com&#x2F;haiq&#x2F;p&#x2F;4304615.html</span><br></pre></td></tr></table></figure>

<ul>
<li>å®é™…ä¸Šï¼ŒSpring AOP çš„ä»£ç é‡ä¸å¤§ï¼Œä¸å…¶åœ¨çª—æˆ·å¤–é¢ä¸æ¸…ä¸æ¥šï¼Œä¸å¦‚æ…ç ´å®ƒï¼æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥æ’¸ä¸€æ’¸ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/aop-simple-intro/">ã€Šç²¾å°½ Spring æºç åˆ†æ â€”â€” AOP æºç ç®€å•å¯¼è¯»ã€‹</a> ã€‚</li>
</ul>
<p>æˆ–è€…ï¼Œæˆ‘ä»¬æ¥æ¢ä¸€ä¸ªè§£ç­”ç­”æ¡ˆï¼š</p>
<p>Spring AOP ä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œ</p>
<ul>
<li><p>JDK åŠ¨æ€ä»£ç†</p>
<p>JDK åŠ¨æ€ä»£ç†é€šè¿‡åå°„æ¥æ¥æ”¶è¢«ä»£ç†çš„ç±»ï¼Œå¹¶ä¸”è¦æ±‚è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ã€‚JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯ InvocationHandler æ¥å£å’Œ Proxy ç±»ã€‚</p>
</li>
<li><p>CGLIB åŠ¨æ€ä»£ç†</p>
<p>å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œé‚£ä¹ˆ Spring AOP ä¼šé€‰æ‹©ä½¿ç”¨ CGLIB æ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚å½“ç„¶ï¼ŒSpring ä¹Ÿæ”¯æŒé…ç½®ï¼Œ<strong>å¼ºåˆ¶</strong>ä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç†ã€‚<br>CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ï¼Œæ³¨æ„ï¼ŒCGLIB æ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸º <code>final</code> ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨ CGLIB åšåŠ¨æ€ä»£ç†çš„ã€‚</p>
</li>
</ul>
<h3 id="Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul>
<li>ä»£ç†æ–¹å¼ä¸åŒ<ul>
<li>Spring AOP åŸºäºåŠ¨æ€ä»£ç†æ–¹å¼å®ç°ã€‚</li>
<li>AspectJ AOP åŸºäºé™æ€ä»£ç†æ–¹å¼å®ç°ã€‚</li>
</ul>
</li>
<li>PointCut æ”¯æŒåŠ›åº¦ä¸åŒ<ul>
<li>Spring AOP <strong>ä»…</strong>æ”¯æŒæ–¹æ³•çº§åˆ«çš„ PointCut ã€‚</li>
<li>AspectJ AOP æä¾›äº†å®Œå…¨çš„ AOP æ”¯æŒï¼Œå®ƒè¿˜æ”¯æŒå±æ€§çº§åˆ«çš„ PointCut ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ</h3><p>Weaving ï¼Œ<strong>ç¼–ç»‡</strong>ã€‚</p>
<ul>
<li>ä¸ºäº†åˆ›å»ºä¸€ä¸ª Advice å¯¹è±¡è€Œé“¾æ¥ä¸€ä¸ª Aspect å’Œå…¶å®ƒåº”ç”¨ç±»å‹æˆ–å¯¹è±¡ï¼Œç§°ä¸ºç¼–ç»‡ï¼ˆWeavingï¼‰ã€‚</li>
<li>åœ¨ Spring AOP ä¸­ï¼Œç¼–ç»‡åœ¨è¿è¡Œæ—¶æ‰§è¡Œï¼Œå³åŠ¨æ€ä»£ç†ã€‚è¯·å‚è€ƒä¸‹å›¾ï¼š</li>
</ul>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/05.jpg" alt="Proxy"></p>
<h3 id="Spring-å¦‚ä½•ä½¿ç”¨-AOP-åˆ‡é¢ï¼Ÿ"><a href="#Spring-å¦‚ä½•ä½¿ç”¨-AOP-åˆ‡é¢ï¼Ÿ" class="headerlink" title="Spring å¦‚ä½•ä½¿ç”¨ AOP åˆ‡é¢ï¼Ÿ"></a>Spring å¦‚ä½•ä½¿ç”¨ AOP åˆ‡é¢ï¼Ÿ</h3><p>åœ¨ Spring AOP ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼é…ç½® AOP åˆ‡é¢ï¼š</p>
<ul>
<li>åŸºäº <strong>XML</strong> æ–¹å¼çš„åˆ‡é¢å®ç°ã€‚</li>
<li>åŸºäº <strong>æ³¨è§£</strong> æ–¹å¼çš„åˆ‡é¢å®ç°ã€‚</li>
</ul>
<p>ç›®å‰ï¼Œä¸»æµå–œæ¬¢ä½¿ç”¨ <strong>æ³¨è§£</strong> æ–¹å¼ã€‚èƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007469982">ã€Šå½»åº•å¾æœ Spring AOP ä¹‹å®æˆ˜ç¯‡ã€‹</a> ã€‚</p>
<h2 id="Spring-Transaction"><a href="#Spring-Transaction" class="headerlink" title="Spring Transaction"></a>Spring Transaction</h2><p>éå¸¸æ¨èé˜…è¯»å¦‚ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247484702&idx=1&sn=c04261d63929db09ff6df7cadc7cca21&chksm=fa497aafcd3ef3b94082da7bca841b5b7b528eb2a52dbc4eb647b97be63a9a1cf38a9e71bf90&token=165108535&lang=zh_CN#rd">ã€Šå¯èƒ½æ˜¯æœ€æ¼‚äº®çš„ Spring äº‹åŠ¡ç®¡ç†è¯¦è§£ã€‹</a></li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</h3><p>äº‹åŠ¡å°±æ˜¯å¯¹ä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œï¼ˆæ¯”å¦‚æ’å…¥å¤šæ¡æ•°æ®ï¼‰è¿›è¡Œç»Ÿä¸€çš„æäº¤æˆ–å›æ»šæ“ä½œï¼Œå¦‚æœæ’å…¥æˆåŠŸï¼Œé‚£ä¹ˆä¸€èµ·æˆåŠŸï¼Œå¦‚æœä¸­é—´æœ‰ä¸€æ¡å‡ºç°å¼‚å¸¸ï¼Œé‚£ä¹ˆå›æ»šä¹‹å‰çš„æ‰€æœ‰æ“ä½œã€‚</p>
<p>è¿™æ ·å¯ä»¥é˜²æ­¢å‡ºç°è„æ•°æ®ï¼Œé˜²æ­¢æ•°æ®åº“æ•°æ®å‡ºç°é—®é¢˜ã€‚</p>
<h3 id="äº‹åŠ¡çš„ç‰¹æ€§æŒ‡çš„æ˜¯ï¼Ÿ"><a href="#äº‹åŠ¡çš„ç‰¹æ€§æŒ‡çš„æ˜¯ï¼Ÿ" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§æŒ‡çš„æ˜¯ï¼Ÿ"></a>äº‹åŠ¡çš„ç‰¹æ€§æŒ‡çš„æ˜¯ï¼Ÿ</h3><p>æŒ‡çš„æ˜¯ <strong>ACID</strong> ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/06.png" alt="äº‹åŠ¡çš„ç‰¹æ€§"></p>
<ol>
<li><strong>åŸå­æ€§</strong> Atomicity ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…å…¨éƒ¨å®Œæˆï¼Œæˆ–è€…å…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«æ¢å¤ï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚å³ï¼Œäº‹åŠ¡ä¸å¯åˆ†å‰²ã€ä¸å¯çº¦ç®€ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong> Consistency ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7">çº¦æŸ</a>ã€<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%A7%A6%E5%8F%91%E5%99%A8_(%E6%95%B0%E6%8D%AE%E5%BA%93)">è§¦å‘å™¨</a>ã€<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A&action=edit&redlink=1">çº§è”å›æ»š</a>ç­‰ã€‚</li>
<li><strong>éš”ç¦»æ€§</strong> Isolation ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li>
<li><strong>æŒä¹…æ€§</strong> Durability ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li>
</ol>
<h3 id="åˆ—ä¸¾-Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"><a href="#åˆ—ä¸¾-Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ" class="headerlink" title="åˆ—ä¸¾ Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"></a>åˆ—ä¸¾ Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ</h3><p>ç›®å‰ Spring æä¾›ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p>
<ul>
<li><strong>å£°æ˜å¼</strong>äº‹åŠ¡ï¼šé€šè¿‡ä½¿ç”¨æ³¨è§£æˆ–åŸºäº XML çš„é…ç½®äº‹åŠ¡ï¼Œä»è€Œäº‹åŠ¡ç®¡ç†ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ã€‚</li>
<li><strong>ç¼–ç¨‹å¼</strong>äº‹åŠ¡ï¼šé€šè¿‡ç¼–ç çš„æ–¹å¼å®ç°äº‹åŠ¡ç®¡ç†ï¼Œéœ€è¦åœ¨ä»£ç ä¸­æ˜¾å¼çš„è°ƒç”¨äº‹åŠ¡çš„è·å¾—ã€æäº¤ã€å›æ»šã€‚å®ƒä¸ºæ‚¨æä¾›æå¤§çš„çµæ´»æ€§ï¼Œä½†ç»´æŠ¤èµ·æ¥éå¸¸å›°éš¾ã€‚</li>
</ul>
<p>å®é™…åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Spring Boot + æ³¨è§£çš„<strong>å£°æ˜å¼</strong>äº‹åŠ¡ã€‚å…·ä½“çš„ç¤ºä¾‹ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cddeca2c9245">ã€ŠSpring Boot äº‹åŠ¡æ³¨è§£è¯¦è§£ã€‹</a> ã€‚</p>
<p>å¦å¤–ï¼Œä¹Ÿæ¨èçœ‹çœ‹ <a target="_blank" rel="noopener" href="https://blog.csdn.net/xktxoo/article/details/77919508">ã€ŠSpring äº‹åŠ¡ç®¡ç† ï¼ ç¼–ç¨‹å¼äº‹åŠ¡ã€å£°æ˜å¼äº‹åŠ¡ã€‹</a> ä¸€æ–‡ã€‚</p>
<h3 id="Spring-äº‹åŠ¡å¦‚ä½•å’Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶åšé›†æˆï¼Ÿ"><a href="#Spring-äº‹åŠ¡å¦‚ä½•å’Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶åšé›†æˆï¼Ÿ" class="headerlink" title="Spring äº‹åŠ¡å¦‚ä½•å’Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶åšé›†æˆï¼Ÿ"></a>Spring äº‹åŠ¡å¦‚ä½•å’Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶åšé›†æˆï¼Ÿ</h3><p>â‘  é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ä¸‹ï¼Œè¿™é‡Œæ•°æ®æŒä¹…å±‚æ¡†æ¶ï¼ŒæŒ‡çš„æ˜¯ Spring JDBCã€Hibernateã€Spring JPAã€MyBatis ç­‰ç­‰ã€‚</p>
<p>â‘¡ ç„¶åï¼ŒSpring äº‹åŠ¡çš„ç®¡ç†ï¼Œæ˜¯é€šè¿‡ <code>org.springframework.transaction.PlatformTransactionManager</code> è¿›è¡Œç®¡ç†ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; PlatformTransactionManager.java</span><br><span class="line"></span><br><span class="line">public interface PlatformTransactionManager &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ ¹æ®äº‹åŠ¡å®šä¹‰ TransactionDefinition ï¼Œè·å¾— TransactionStatus ã€‚ </span><br><span class="line">    TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ ¹æ®æƒ…å†µï¼Œæäº¤äº‹åŠ¡</span><br><span class="line">    void commit(TransactionStatus status) throws TransactionException;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; æ ¹æ®æƒ…å†µï¼Œå›æ»šäº‹åŠ¡</span><br><span class="line">    void rollback(TransactionStatus status) throws TransactionException;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>PlatformTransactionManager æ˜¯è´Ÿè´£äº‹åŠ¡ç®¡ç†çš„æ¥å£ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ¥å£æ–¹æ³•ï¼Œåˆ†åˆ«è´Ÿè´£äº‹åŠ¡çš„è·å¾—ã€æäº¤ã€å›æ»šã€‚</p>
</li>
<li><p>#getTransaction(TransactionDefinition definition)æ–¹æ³•ï¼Œæ ¹æ®äº‹åŠ¡å®šä¹‰ TransactionDefinition ï¼Œè·å¾— TransactionStatus ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸æ˜¯åˆ›å»ºäº‹åŠ¡å‘¢ï¼Ÿå› ä¸ºå¦‚æœå½“å‰å¦‚æœå·²ç»æœ‰äº‹åŠ¡ï¼Œåˆ™ä¸ä¼šè¿›è¡Œåˆ›å»ºï¼Œä¸€èˆ¬æ¥è¯´ä¼šè·Ÿå½“å‰çº¿ç¨‹è¿›è¡Œç»‘å®šã€‚å¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™è¿›è¡Œåˆ›å»ºã€‚</li>
<li>ä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯ TransactionStatus å¯¹è±¡ï¼Ÿåœ¨ TransactionStatus ä¸­ï¼Œä¸ä»…ä»…åŒ…å«äº‹åŠ¡å±æ€§ï¼Œè¿˜åŒ…å«äº‹åŠ¡çš„å…¶å®ƒä¿¡æ¯ï¼Œä¾‹å¦‚æ˜¯å¦åªè¯»ã€æ˜¯å¦ä¸ºæ–°åˆ›å»ºçš„äº‹åŠ¡ç­‰ç­‰ã€‚ğŸ˜ˆ ä¸‹é¢ï¼Œä¹Ÿä¼šè¯¦ç»†è§£æ TransactionStatus ã€‚</li>
<li>äº‹åŠ¡ TransactionDefinition æ˜¯ä»€ä¹ˆï¼ŸğŸ˜ˆ ä¸‹é¢ï¼Œä¹Ÿä¼šè¯¦ç»†è§£æ TransactionStatus ã€‚</li>
</ul>
</li>
<li><p>#commit(TransactionStatus status)æ–¹æ³•ï¼Œæ ¹æ® TransactionStatus æƒ…å†µï¼Œæäº¤äº‹åŠ¡ã€‚</p>
<ul>
<li><p>ä¸ºä»€ä¹ˆæ ¹æ® TransactionStatus æƒ…å†µï¼Œè¿›è¡Œæäº¤ï¼Ÿä¾‹å¦‚è¯´ï¼Œå¸¦@Transactionalæ³¨è§£çš„çš„ A æ–¹æ³•ï¼Œä¼šè°ƒç”¨</p>
<p> @Transactionalæ³¨è§£çš„çš„ B æ–¹æ³•ã€‚</p>
<ul>
<li>åœ¨ B æ–¹æ³•ç»“æŸè°ƒç”¨åï¼Œä¼šæ‰§è¡Œ <code>PlatformTransactionManager#commit(TransactionStatus status)</code> æ–¹æ³•ï¼Œæ­¤å¤„äº‹åŠ¡<strong>æ˜¯ä¸èƒ½</strong>ã€<strong>ä¹Ÿä¸ä¼š</strong>æäº¤çš„ã€‚</li>
<li>è€Œæ˜¯åœ¨ A æ–¹æ³•ç»“æŸè°ƒç”¨åï¼Œæ‰§è¡Œ <code>PlatformTransactionManager#commit(TransactionStatus status)</code> æ–¹æ³•ï¼Œæäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>#rollback(TransactionStatus status)æ–¹æ³•ï¼Œæ ¹æ® TransactionStatus æƒ…å†µï¼Œå›æ»šäº‹åŠ¡ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆæ ¹æ® TransactionStatus æƒ…å†µï¼Œè¿›è¡Œå›æ»šï¼ŸåŸå› åŒ <code>#commit(TransactionStatus status)</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
<p>â‘¢ å†ä¹‹åï¼ŒPlatformTransactionManager æœ‰<strong>æŠ½è±¡å­</strong>ç±» <code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code> ï¼ŒåŸºäº <a target="_blank" rel="noopener" href="https://blog.csdn.net/carson_ho/article/details/54910518">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a> ï¼Œå®ç°äº‹åŠ¡æ•´ä½“é€»è¾‘çš„éª¨æ¶ï¼Œè€ŒæŠ½è±¡ <code>#doCommit(DefaultTransactionStatus status)</code>ã€<code>#doRollback(DefaultTransactionStatus status)</code> ç­‰ç­‰æ–¹æ³•ï¼Œäº¤ç”±å­ç±»ç±»æ¥å®ç°ã€‚</p>
<blockquote>
<p>å‰æ–¹é«˜èƒ½ï¼Œå³å°†è¿›å…¥å…³é”®çš„ â‘£ æ­¥éª¤ã€‚</p>
</blockquote>
<p>â‘£ æœ€åï¼Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶ï¼Œä¼šæœ‰å…¶å¯¹åº”çš„ PlatformTransactionManager å®ç°ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/07.png" alt="äº‹åŠ¡çš„ç‰¹æ€§"></p>
<ul>
<li>æ‰€æœ‰çš„å®ç°ç±»ï¼Œéƒ½åŸºäº AbstractPlatformTransactionManager è¿™ä¸ªéª¨æ¶ç±»ã€‚</li>
<li>HibernateTransactionManager ï¼Œå’Œ Hibernate5 çš„äº‹åŠ¡ç®¡ç†åšé›†æˆã€‚</li>
<li>DataSourceTransactionManager ï¼Œå’Œ JDBC çš„äº‹åŠ¡ç®¡ç†åšé›†æˆã€‚æ‰€ä»¥ï¼Œå®ƒä¹Ÿé€‚ç”¨äº MyBatisã€Spring JDBC ç­‰ç­‰ã€‚</li>
<li>JpaTransactionManager ï¼Œå’Œ JPA çš„äº‹åŠ¡ç®¡ç†åšé›†æˆã€‚</li>
</ul>
<p>å¦‚ä¸‹ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ XML æ–¹å¼æ¥é…ç½®çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œä½¿ç”¨çš„æ˜¯ DataSourceTransactionManager ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ­£å¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œå®ƒé€‚ç”¨äº MyBatisã€Spring JDBC ç­‰ç­‰ã€‚</li>
</ul>
<hr>
<p>ğŸ˜ˆ æ˜¯ä¸æ˜¯å¾ˆæœ‰è¶£ï¼Œæ›´å¤šè¯¦ç»†çš„è§£æï¼Œå¯è§å¦‚ä¸‹å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/categories/Spring/">ã€Šç²¾å°½ Spring æºç åˆ†æ â€”â€” Transaction æºç ç®€å•å¯¼è¯»ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/transaction-package/">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” äº‹åŠ¡æ¨¡å—ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/Spring-Integration-4/">ã€Šç²¾å°½ MyBatis æºç è§£æ â€”â€” Spring é›†æˆï¼ˆå››ï¼‰ä¹‹äº‹åŠ¡ã€‹</a></li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆåœ¨-Spring-äº‹åŠ¡ä¸­ä¸èƒ½åˆ‡æ¢æ•°æ®æºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆåœ¨-Spring-äº‹åŠ¡ä¸­ä¸èƒ½åˆ‡æ¢æ•°æ®æºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆåœ¨ Spring äº‹åŠ¡ä¸­ä¸èƒ½åˆ‡æ¢æ•°æ®æºï¼Ÿ"></a>ä¸ºä»€ä¹ˆåœ¨ Spring äº‹åŠ¡ä¸­ä¸èƒ½åˆ‡æ¢æ•°æ®æºï¼Ÿ</h3><p>åšè¿‡ Spring å¤šæ•°æ®æºçš„èƒ–å‹ï¼Œéƒ½ä¼šæœ‰ä¸ªæƒ¨ç—›çš„ç»å†ï¼Œä¸ºä»€ä¹ˆåœ¨å¼€å¯äº‹åŠ¡çš„ Service å±‚çš„æ–¹æ³•ä¸­ï¼Œæ— æ³•åˆ‡æ¢æ•°æ®æºå‘¢ï¼Ÿå› ä¸ºï¼Œåœ¨ Spring çš„äº‹åŠ¡ç®¡ç†ä¸­ï¼Œ<strong>æ‰€ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥ä¼šå’Œå½“å‰çº¿ç¨‹æ‰€ç»‘å®š</strong>ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®äº†å¦å¤–ä¸€ä¸ªæ•°æ®æºï¼Œä½¿ç”¨çš„è¿˜æ˜¯å½“å‰çš„æ•°æ®æºè¿æ¥ã€‚</p>
<p>å¦å¤–ï¼Œå¤šä¸ªæ•°æ®æºä¸”éœ€è¦äº‹åŠ¡çš„åœºæ™¯ï¼Œæœ¬èº«ä¼šå¸¦æ¥<strong>å¤šäº‹åŠ¡ä¸€è‡´æ€§</strong>çš„é—®é¢˜ï¼Œæš‚æ—¶æ²¡æœ‰ç‰¹åˆ«å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬ä¸€ä¸ªåº”ç”¨ï¼Œæ¨èé™¤éäº†è¯»å†™åˆ†ç¦»æ‰€å¸¦æ¥çš„å¤šæ•°æ®æºï¼Œå…¶å®ƒæƒ…å†µä¸‹ï¼Œå»ºè®®åªæœ‰ä¸€ä¸ªæ•°æ®æºã€‚å¹¶ä¸”ï¼Œéšç€å¾®æœåŠ¡æ—¥ç›Šèº«å½¢ï¼Œä¸€ä¸ªæœåŠ¡å¯¹åº”ä¸€ä¸ª DB æ˜¯æ¯”è¾ƒå¸¸è§çš„æ¶æ„é€‰æ‹©ã€‚</p>
<h3 id="Transactional-æ³¨è§£æœ‰å“ªäº›å±æ€§ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#Transactional-æ³¨è§£æœ‰å“ªäº›å±æ€§ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="@Transactional æ³¨è§£æœ‰å“ªäº›å±æ€§ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>@Transactional æ³¨è§£æœ‰å“ªäº›å±æ€§ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3><p><code>@Transactional</code> æ³¨è§£çš„<strong>å±æ€§</strong>å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">ç±»å‹</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">value</td>
<td align="left">String</td>
<td align="left">å¯é€‰çš„é™å®šæè¿°ç¬¦ï¼ŒæŒ‡å®šä½¿ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨</td>
</tr>
<tr>
<td align="left">propagation</td>
<td align="left">enum: Propagation</td>
<td align="left">å¯é€‰çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºè®¾ç½®</td>
</tr>
<tr>
<td align="left">isolation</td>
<td align="left">enum: Isolation</td>
<td align="left">å¯é€‰çš„äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®</td>
</tr>
<tr>
<td align="left">readOnly</td>
<td align="left">boolean</td>
<td align="left">è¯»å†™æˆ–åªè¯»äº‹åŠ¡ï¼Œé»˜è®¤è¯»å†™</td>
</tr>
<tr>
<td align="left">timeout</td>
<td align="left">int (in seconds granularity)</td>
<td align="left">äº‹åŠ¡è¶…æ—¶æ—¶é—´è®¾ç½®</td>
</tr>
<tr>
<td align="left">rollbackFor</td>
<td align="left">Classå¯¹è±¡æ•°ç»„ï¼Œå¿…é¡»ç»§æ‰¿è‡ªThrowable</td>
<td align="left">å¯¼è‡´äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»æ•°ç»„</td>
</tr>
<tr>
<td align="left">rollbackForClassName</td>
<td align="left">ç±»åæ•°ç»„ï¼Œå¿…é¡»ç»§æ‰¿è‡ªThrowable</td>
<td align="left">å¯¼è‡´äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»åå­—æ•°ç»„</td>
</tr>
<tr>
<td align="left">noRollbackFor</td>
<td align="left">Classå¯¹è±¡æ•°ç»„ï¼Œå¿…é¡»ç»§æ‰¿è‡ªThrowable</td>
<td align="left">ä¸ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»æ•°ç»„</td>
</tr>
<tr>
<td align="left">noRollbackForClassName</td>
<td align="left">ç±»åæ•°ç»„ï¼Œå¿…é¡»ç»§æ‰¿è‡ªThrowable</td>
<td align="left">ä¸ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»åå­—æ•°ç»„</td>
</tr>
</tbody></table>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ <code>@Transactional</code> çš„æ‰€æœ‰å±æ€§é»˜è®¤å€¼å³å¯ã€‚</li>
</ul>
<p>å…·ä½“<strong>ç”¨æ³•</strong>å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>@Transactional</code> å¯ä»¥ä½œç”¨äºæ¥å£ã€æ¥å£æ–¹æ³•ã€ç±»ä»¥åŠç±»æ–¹æ³•ä¸Šã€‚å½“ä½œç”¨äºç±»ä¸Šæ—¶ï¼Œè¯¥ç±»çš„æ‰€æœ‰ <code>public</code> æ–¹æ³•å°†éƒ½å…·æœ‰è¯¥ç±»å‹çš„äº‹åŠ¡å±æ€§ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨è¯¥æ ‡æ³¨æ¥è¦†ç›–ç±»çº§åˆ«çš„å®šä¹‰ã€‚</li>
<li>è™½ç„¶ <code>@Transactional</code> æ³¨è§£å¯ä»¥ä½œç”¨äºæ¥å£ã€æ¥å£æ–¹æ³•ã€ç±»ä»¥åŠç±»æ–¹æ³•ä¸Šï¼Œä½†æ˜¯ Spring å»ºè®®ä¸è¦åœ¨æ¥å£æˆ–è€…æ¥å£æ–¹æ³•ä¸Šä½¿ç”¨è¯¥æ³¨è§£ï¼Œå› ä¸ºè¿™åªæœ‰åœ¨ä½¿ç”¨åŸºäºæ¥å£çš„ä»£ç†æ—¶å®ƒæ‰ä¼šç”Ÿæ•ˆã€‚å¦å¤–ï¼Œ <strong><code>@Transactional</code> æ³¨è§£åº”è¯¥åªè¢«åº”ç”¨åˆ° <code>public</code> æ–¹æ³•ä¸Šï¼Œè¿™æ˜¯ç”± Spring AOP çš„æœ¬è´¨å†³å®šçš„</strong>ã€‚å¦‚æœä½ åœ¨ <code>protected</code>ã€<code>private</code> æˆ–è€…é»˜è®¤å¯è§æ€§çš„æ–¹æ³•ä¸Šä½¿ç”¨ <code>@Transactional</code> æ³¨è§£ï¼Œè¿™å°†è¢«å¿½ç•¥ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚<strong>è¿™ä¸€ç‚¹ï¼Œéå¸¸éœ€è¦æ³¨æ„</strong>ã€‚</li>
</ul>
<hr>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ç®€å•è¯´ä¸‹<strong>æºç </strong>ç›¸å…³çš„ä¸œè¥¿ã€‚</p>
<p><code>@Transactional</code> æ³¨è§£çš„å±æ€§ï¼Œä¼šè§£ææˆ <code>org.springframework.transaction.TransactionDefinition</code> å¯¹è±¡ï¼Œå³äº‹åŠ¡å®šä¹‰ã€‚TransactionDefinition ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TransactionDefinition</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPropagationBehavior</span><span class="params">()</span></span>; <span class="comment">// äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getIsolationLevel</span><span class="params">()</span></span>; <span class="comment">// äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getTimeout</span><span class="params">()</span></span>; <span class="comment">// äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isReadOnly</span><span class="params">()</span></span>; <span class="comment">// äº‹åŠ¡æ˜¯å¦åªè¯»</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>; <span class="comment">// äº‹åŠ¡çš„åå­—</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯èƒ½ä¼šèƒ–å‹æœ‰ä»¥åï¼Œ<code>@Transactional</code> æ³¨è§£çš„ <code>rollbackFor</code>ã€<code>rollbackForClassName</code>ã€<code>noRollbackFor</code>ã€<code>noRollbackForClassName</code> å±æ€§è²Œä¼¼æ²¡ä½“ç°å‡ºæ¥ï¼Ÿå®ƒä»¬æç°åœ¨ TransactionDefinition çš„å®ç°ç±» RuleBasedTransactionAttribute ä¸­ã€‚</li>
<li><code>#getPropagationBehavior()</code> æ–¹æ³•ï¼Œè¿”å›äº‹åŠ¡çš„<strong>ä¼ æ’­è¡Œä¸º</strong>ï¼Œè¯¥å€¼æ˜¯ä¸ªæšä¸¾ï¼Œåœ¨ä¸‹é¢æ¥è¯´ã€‚</li>
<li><code>#getIsolationLevel()</code> æ–¹æ³•ï¼Œè¿”å›äº‹åŠ¡çš„<strong>éš”ç¦»çº§åˆ«</strong>ï¼Œè¯¥å€¼æ˜¯ä¸ªæšä¸¾ï¼Œåœ¨ä¸‹é¢æ¥è¯´ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›éš”ç¦»çº§åˆ«ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›éš”ç¦»çº§åˆ«ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›éš”ç¦»çº§åˆ«ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›éš”ç¦»çº§åˆ«ï¼Ÿ</h3><p>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæ¶‰åŠçš„å†…å®¹ä¼šæ¯”è¾ƒå¤šï¼Œèƒ–å‹ç›´æ¥çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25419593">ã€Šæ•°æ®åº“å››å¤§ç‰¹æ€§ä»¥åŠäº‹åŠ¡éš”ç¦»çº§åˆ«ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4e3edbedb9a8">ã€Šäº”åˆ†é’Ÿææ¸…æ¥š MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‹</a></li>
</ul>
<p>å¦å¤–ï¼Œæœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä¸åŒæ•°æ®åº“å¯¹å››ä¸ªéš”ç¦»çº§åˆ«çš„æ”¯æŒå’Œå®ç°ç•¥æœ‰ä¸åŒã€‚å› ä¸ºæˆ‘ä»¬ç›®å‰äº’è”ç½‘ä¸»è¦ä½¿ç”¨ MySQL ä¸ºä¸»ï¼Œæ‰€ä»¥è‡³å°‘è¦ææ‡‚ MySQL å¯¹éš”ç¦»çº§åˆ«çš„æ”¯æŒå’Œå®ç°æƒ…å†µã€‚</p>
<p>åœ¨ TransactionDefinition æ¥å£ä¸­ï¼Œå®šä¹‰äº†â€œ<strong>å››ç§</strong>â€çš„éš”ç¦»çº§åˆ«æšä¸¾ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TransactionDefinition.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ã€Spring ç‹¬æœ‰ã€‘ä½¿ç”¨åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * MySQL é»˜è®¤é‡‡ç”¨çš„ REPEATABLE_READéš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="comment"> * Oracle é»˜è®¤é‡‡ç”¨çš„ READ_COMMITTEDéš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> ISOLATION_DEFAULT = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> ISOLATION_READ_UNCOMMITTED = Connection.TRANSACTION_READ_UNCOMMITTED;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> ISOLATION_READ_COMMITTED = Connection.TRANSACTION_READ_COMMITTED;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> ISOLATION_REPEATABLE_READ = Connection.TRANSACTION_REPEATABLE_READ;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ä½†æ˜¯è¿™å°†ä¸¥é‡å½±å“ç¨‹åºçš„æ€§èƒ½ã€‚é€šå¸¸æƒ…å†µä¸‹ä¹Ÿä¸ä¼šç”¨åˆ°è¯¥çº§åˆ«ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> ISOLATION_SERIALIZABLE = Connection.TRANSACTION_SERIALIZABLE;</span><br></pre></td></tr></table></figure>



<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›ä¼ æ’­çº§åˆ«ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›ä¼ æ’­çº§åˆ«ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›ä¼ æ’­çº§åˆ«ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼Ÿåˆ†æˆå“ªäº›ä¼ æ’­çº§åˆ«ï¼Ÿ</h3><p>äº‹åŠ¡çš„<strong>ä¼ æ’­è¡Œä¸º</strong>ï¼ŒæŒ‡çš„æ˜¯å½“å‰å¸¦æœ‰äº‹åŠ¡é…ç½®çš„æ–¹æ³•ï¼Œéœ€è¦æ€ä¹ˆå¤„ç†äº‹åŠ¡ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼šæ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡ä¸­è¿è¡Œã€‚</li>
<li>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œäº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼Œå¹¶ä¸æ˜¯æ•°æ®åº“äº‹åŠ¡è§„èŒƒä¸­çš„åè¯ï¼Œ<strong>è€Œæ˜¯ Spring è‡ªèº«æ‰€å®šä¹‰çš„</strong>ã€‚é€šè¿‡äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«ï¼ŒSpring æ‰çŸ¥é“å¦‚ä½•å¤„ç†äº‹åŠ¡ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡å‘¢ï¼Œè¿˜æ˜¯ç»§ç»­ä½¿ç”¨å½“å‰çš„äº‹åŠ¡ã€‚</li>
</ul>
<p>åœ¨ TransactionDefinition æ¥å£ä¸­ï¼Œå®šä¹‰äº†<strong>ä¸‰ç±»ä¸ƒç§</strong>ä¼ æ’­çº§åˆ«ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TransactionDefinition.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ========== æ”¯æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µ ========== </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨è¯¥äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_REQUIRED = <span class="number">0</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨è¯¥äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_SUPPORTS = <span class="number">1</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨è¯¥äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_MANDATORY = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ========== ä¸æ”¯æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µ ========== </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_REQUIRES_NEW = <span class="number">3</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_NOT_SUPPORTED = <span class="number">4</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_NEVER = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ========== å…¶ä»–æƒ…å†µ ========== </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ä½œä¸ºå½“å‰äº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡æ¥è¿è¡Œã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ç­‰ä»·äº &#123;<span class="doctag">@link</span> TransactionDefinition#PROPAGATION_REQUIRED&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> PROPAGATION_NESTED = <span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>åˆ†ç±»ä¹‹åï¼Œå…¶å®è¿˜æ˜¯æ¯”è¾ƒå¥½è®°çš„ã€‚å½“ç„¶ï¼Œç»å¤§æ•°åœºæ™¯ï¼Œæˆ‘ä»¬åªç”¨ <code>PROPAGATION_REQUIRED</code> ä¼ æ’­çº§åˆ«ã€‚</p>
</li>
<li><p>è¿™é‡Œéœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå‰é¢çš„å…­ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæ˜¯ Spring ä» EJB ä¸­å¼•å…¥çš„ï¼Œä»–ä»¬å…±äº«ç›¸åŒçš„æ¦‚å¿µã€‚è€Œ</p>
<p> PROPAGATION_NESTEDæ˜¯ Spring æ‰€ç‰¹æœ‰çš„ã€‚</p>
<ul>
<li>ä»¥ <code>PROPAGATION_NESTED</code> å¯åŠ¨çš„äº‹åŠ¡å†…åµŒäºå¤–éƒ¨äº‹åŠ¡ä¸­ï¼ˆå¦‚æœå­˜åœ¨å¤–éƒ¨äº‹åŠ¡çš„è¯ï¼‰ï¼Œæ­¤æ—¶ï¼Œå†…åµŒäº‹åŠ¡å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ï¼Œå®ƒä¾èµ–äºå¤–éƒ¨äº‹åŠ¡çš„å­˜åœ¨ï¼Œåªæœ‰é€šè¿‡å¤–éƒ¨çš„äº‹åŠ¡æäº¤ï¼Œæ‰èƒ½å¼•èµ·å†…éƒ¨äº‹åŠ¡çš„æäº¤ï¼ŒåµŒå¥—çš„å­äº‹åŠ¡ä¸èƒ½å•ç‹¬æäº¤ã€‚å¦‚æœç†Ÿæ‚‰ JDBC ä¸­çš„ä¿å­˜ç‚¹ï¼ˆSavePointï¼‰çš„æ¦‚å¿µï¼Œé‚£åµŒå¥—äº‹åŠ¡å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå…¶å®åµŒå¥—çš„å­äº‹åŠ¡å°±æ˜¯ä¿å­˜ç‚¹çš„ä¸€ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥åŒ…æ‹¬å¤šä¸ªä¿å­˜ç‚¹ï¼Œæ¯ä¸€ä¸ªåµŒå¥—å­äº‹åŠ¡ã€‚å¦å¤–ï¼Œå¤–éƒ¨äº‹åŠ¡çš„å›æ»šä¹Ÿä¼šå¯¼è‡´åµŒå¥—å­äº‹åŠ¡çš„å›æ»šã€‚</li>
<li>å½“ç„¶ï¼Œè™½ç„¶ä¸Šé¢ <code>PROPAGATION_NESTED</code> æ–‡å­—å¾ˆé•¿ï¼Œå®é™…æˆ‘ä»¬åŸºæœ¬æ²¡ç”¨è¿‡ã€‚æˆ–è€…è¯´ï¼Œå»æ‰åŸºæœ¬ï¼Œæˆ‘ä»¬æ ¹æœ¬æ²¡ç”¨è¿‡ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„è¶…æ—¶å±æ€§ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„è¶…æ—¶å±æ€§ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„è¶…æ—¶å±æ€§ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„è¶…æ—¶å±æ€§ï¼Ÿ</h3><p>æ‰€è°“äº‹åŠ¡è¶…æ—¶ï¼Œå°±æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡æ‰€å…è®¸æ‰§è¡Œçš„æœ€é•¿æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä½†äº‹åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™è‡ªåŠ¨å›æ»šäº‹åŠ¡ã€‚</p>
<p>åœ¨ TransactionDefinition ä¸­ä»¥ <code>int</code> çš„å€¼æ¥è¡¨ç¤ºè¶…æ—¶æ—¶é—´ï¼Œå…¶å•ä½æ˜¯ç§’ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ä¸ªå±æ€§ï¼Œè²Œä¼¼æˆ‘ä»¬åŸºæœ¬ä¹Ÿæ²¡ç”¨è¿‡ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„åªè¯»å±æ€§ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„åªè¯»å±æ€§ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„åªè¯»å±æ€§ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„åªè¯»å±æ€§ï¼Ÿ</h3><p>äº‹åŠ¡çš„åªè¯»å±æ€§æ˜¯æŒ‡ï¼Œå¯¹äº‹åŠ¡æ€§èµ„æºè¿›è¡Œåªè¯»æ“ä½œæˆ–è€…æ˜¯è¯»å†™æ“ä½œã€‚</p>
<ul>
<li>æ‰€è°“äº‹åŠ¡æ€§èµ„æºå°±æ˜¯æŒ‡é‚£äº›è¢«äº‹åŠ¡ç®¡ç†çš„èµ„æºï¼Œæ¯”å¦‚æ•°æ®æºã€JMS èµ„æºï¼Œä»¥åŠè‡ªå®šä¹‰çš„äº‹åŠ¡æ€§èµ„æºç­‰ç­‰ã€‚</li>
<li>å¦‚æœç¡®å®šåªå¯¹äº‹åŠ¡æ€§èµ„æºè¿›è¡Œåªè¯»æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†äº‹åŠ¡æ ‡å¿—ä¸ºåªè¯»çš„ï¼Œä»¥æé«˜äº‹åŠ¡å¤„ç†çš„æ€§èƒ½ã€‚æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://my.oschina.net/uniquejava/blog/80954">ã€Šä¸ä½¿ç”¨äº‹åŠ¡å’Œä½¿ç”¨åªè¯»äº‹åŠ¡çš„åŒºåˆ« ã€‹</a> ã€‚</li>
</ul>
<p>åœ¨ TransactionDefinition ä¸­ä»¥ <code>boolean</code> ç±»å‹æ¥è¡¨ç¤ºè¯¥äº‹åŠ¡æ˜¯å¦åªè¯»ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„å›æ»šè§„åˆ™ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„å›æ»šè§„åˆ™ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„å›æ»šè§„åˆ™ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„å›æ»šè§„åˆ™ï¼Ÿ</h3><p>å›æ»šè§„åˆ™ï¼Œå®šä¹‰äº†å“ªäº›å¼‚å¸¸ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šè€Œå“ªäº›ä¸ä¼šã€‚</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œäº‹åŠ¡åªæœ‰é‡åˆ°è¿è¡ŒæœŸå¼‚å¸¸æ—¶æ‰ä¼šå›æ»šï¼Œè€Œåœ¨é‡åˆ°æ£€æŸ¥å‹å¼‚å¸¸æ—¶ä¸ä¼šå›æ»šï¼ˆè¿™ä¸€è¡Œä¸ºä¸EJBçš„å›æ»šè¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼‰ã€‚</li>
<li>ä½†æ˜¯ä½ å¯ä»¥å£°æ˜äº‹åŠ¡åœ¨é‡åˆ°ç‰¹å®šçš„æ£€æŸ¥å‹å¼‚å¸¸æ—¶åƒé‡åˆ°è¿è¡ŒæœŸå¼‚å¸¸é‚£æ ·å›æ»šã€‚åŒæ ·ï¼Œä½ è¿˜å¯ä»¥å£°æ˜äº‹åŠ¡é‡åˆ°ç‰¹å®šçš„å¼‚å¸¸ä¸å›æ»šï¼Œå³ä½¿è¿™äº›å¼‚å¸¸æ˜¯è¿è¡ŒæœŸå¼‚å¸¸ã€‚</li>
</ul>
<p>æ³¨æ„ï¼Œäº‹åŠ¡çš„å›æ»šè§„åˆ™ï¼Œå¹¶ä¸æ˜¯æ•°æ®åº“äº‹åŠ¡è§„èŒƒä¸­çš„åè¯ï¼Œ<strong>è€Œæ˜¯ Spring è‡ªèº«æ‰€å®šä¹‰çš„</strong>ã€‚</p>
<h3 id="ç®€å•ä»‹ç»-TransactionStatus-ï¼Ÿ"><a href="#ç®€å•ä»‹ç»-TransactionStatus-ï¼Ÿ" class="headerlink" title="ç®€å•ä»‹ç» TransactionStatus ï¼Ÿ"></a>ç®€å•ä»‹ç» TransactionStatus ï¼Ÿ</h3><blockquote>
<p>è‰¿è‰¿ï¼šè¿™ä¸ªå¯èƒ½ä¸æ˜¯ä¸€ä¸ªé¢è¯•é¢˜ï¼Œä¸»è¦æ»¡è¶³ä¸‹å¤§å®¶çš„å¥½å¥‡å¿ƒã€‚</p>
</blockquote>
<p>TransactionStatus æ¥å£ï¼Œè®°å½•äº‹åŠ¡çš„çŠ¶æ€ï¼Œä¸ä»…ä»…åŒ…å«äº‹åŠ¡æœ¬èº«ï¼Œè¿˜åŒ…å«äº‹åŠ¡çš„å…¶å®ƒä¿¡æ¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TransactionStatus.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TransactionStatus</span> <span class="keyword">extends</span> <span class="title">SavepointManager</span>, <span class="title">Flushable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æ˜¯æ–°åˆ›å»ºçš„äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isNewTransaction</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æœ‰ Savepoint</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * åœ¨ &#123;<span class="doctag">@link</span> TransactionDefinition#PROPAGATION_NESTED&#125; ä¼ æ’­çº§åˆ«ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasSavepoint</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ä¸ºåªå›æ»š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setRollbackOnly</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦ä¸ºåªå›æ»š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isRollbackOnly</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œ flush æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">flush</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦äº‹åŠ¡å·²ç»å®Œæˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isCompleted</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºä»€ä¹ˆæ²¡æœ‰äº‹åŠ¡å¯¹è±¡å‘¢ï¼Ÿåœ¨ TransactionStatus çš„å®ç°ç±» DefaultTransactionStatus ä¸­ï¼Œæœ‰ä¸ª <code>Object transaction</code> å±æ€§ï¼Œè¡¨ç¤ºäº‹åŠ¡å¯¹è±¡ã€‚</li>
<li><code>#isNewTransaction()</code> æ–¹æ³•ï¼Œè¡¨ç¤ºæ˜¯å¦æ˜¯æ–°åˆ›å»ºçš„äº‹åŠ¡ã€‚æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç­”æ¡ˆç»“åˆ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/Interview/#">ã€ŒSpring äº‹åŠ¡å¦‚ä½•å’Œä¸åŒçš„æ•°æ®æŒä¹…å±‚æ¡†æ¶åšé›†æˆï¼Ÿã€</a> é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹ <code>#commit(TransactionStatus status)</code> æ–¹æ³•çš„è§£é‡Šã€‚é€šè¿‡è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œå½“å‰äº‹åŠ¡æ˜¯å¦å½“å‰æ–¹æ³•æ‰€åˆ›å»ºçš„ï¼Œåªæœ‰åˆ›å»ºäº‹åŠ¡çš„æ–¹æ³•ï¼Œ<strong>æ‰èƒ½ä¸”åº”è¯¥çœŸæ­£çš„æäº¤äº‹åŠ¡</strong>ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨-Spring-äº‹åŠ¡æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"><a href="#ä½¿ç”¨-Spring-äº‹åŠ¡æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ Spring äº‹åŠ¡æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"></a>ä½¿ç”¨ Spring äº‹åŠ¡æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h3><ol>
<li>é€šè¿‡ PlatformTransactionManager ï¼Œä¸ºä¸åŒçš„æ•°æ®å±‚æŒä¹…æ¡†æ¶æä¾›ç»Ÿä¸€çš„ API ï¼Œæ— éœ€å…³å¿ƒåˆ°åº•æ˜¯åŸç”Ÿ JDBCã€Spring JDBCã€JPAã€Hibernate è¿˜æ˜¯ MyBatis ã€‚</li>
<li>é€šè¿‡ä½¿ç”¨å£°æ˜å¼äº‹åŠ¡ï¼Œä½¿ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†çš„é€»è¾‘åˆ†ç¦»ï¼Œæ›´åŠ æ¸…æ™°ã€‚</li>
</ol>
<p>ä»å€¾å‘ä¸Šæ¥è¯´ï¼Œè‰¿è‰¿æ¯”è¾ƒå–œæ¬¢<strong>æ³¨è§£</strong> + å£°æ˜å¼äº‹åŠ¡ã€‚</p>
<h2 id="Spring-Data-Access"><a href="#Spring-Data-Access" class="headerlink" title="Spring Data Access"></a>Spring Data Access</h2><h3 id="Spring-æ”¯æŒå“ªäº›-ORM-æ¡†æ¶ï¼Ÿ"><a href="#Spring-æ”¯æŒå“ªäº›-ORM-æ¡†æ¶ï¼Ÿ" class="headerlink" title="Spring æ”¯æŒå“ªäº› ORM æ¡†æ¶ï¼Ÿ"></a>Spring æ”¯æŒå“ªäº› ORM æ¡†æ¶ï¼Ÿ</h3><ul>
<li>Hibernate</li>
<li>JPA</li>
<li>MyBatis</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/3.0.0.M4/reference/html/ch13s04.html">JDO</a></li>
<li><a target="_blank" rel="noopener" href="https://db.apache.org/ojb/docu/howtos/howto-use-spring.html">OJB</a></li>
</ul>
<p>å¯èƒ½ä¼šæœ‰èƒ–å‹è¯´ï¼Œä¸æ˜¯åº”è¯¥è¿˜æœ‰ Spring JDBC å—ã€‚æ³¨æ„ï¼ŒSpring JDBC ä¸æ˜¯ ORM æ¡†æ¶ã€‚</p>
<h3 id="åœ¨-Spring-æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨-JDBC-ï¼Ÿ"><a href="#åœ¨-Spring-æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨-JDBC-ï¼Ÿ" class="headerlink" title="åœ¨ Spring æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ JDBC ï¼Ÿ"></a>åœ¨ Spring æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ JDBC ï¼Ÿ</h3><p>Spring æä¾›äº† Spring JDBC æ¡†æ¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ JDBC ã€‚</p>
<p>å¯¹äºå¼€å‘è€…ï¼Œåªéœ€è¦ä½¿ç”¨ JdbcTemplate ç±»ï¼Œå®ƒæä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•è§£å†³è¯¸å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼Œæ‰§è¡Œå†™å¥½çš„æˆ–å¯è°ƒç”¨çš„æ•°æ®åº“æ“ä½œè¯­å¥ï¼Œæä¾›è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ã€‚</p>
<p>æ²¡æœ‰ä½¿ç”¨è¿‡çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="https://www.tianmaying.com/tutorial/spring-jdbc-data-accessing">ã€ŠSpring JDBC è®¿é—®å…³ç³»å‹æ•°æ®åº“ã€‹</a> æ–‡ç« ã€‚</p>
<h3 id="Spring-æ•°æ®æ•°æ®è®¿é—®å±‚æœ‰å“ªäº›å¼‚å¸¸ï¼Ÿ"><a href="#Spring-æ•°æ®æ•°æ®è®¿é—®å±‚æœ‰å“ªäº›å¼‚å¸¸ï¼Ÿ" class="headerlink" title="Spring æ•°æ®æ•°æ®è®¿é—®å±‚æœ‰å“ªäº›å¼‚å¸¸ï¼Ÿ"></a>Spring æ•°æ®æ•°æ®è®¿é—®å±‚æœ‰å“ªäº›å¼‚å¸¸ï¼Ÿ</h3><p>é€šè¿‡ä½¿ç”¨ Spring æ•°æ®æ•°æ®è®¿é—®å±‚ï¼Œå®ƒç»Ÿä¸€äº†å„ä¸ªæ•°æ®æŒä¹…å±‚æ¡†æ¶çš„ä¸åŒå¼‚å¸¸ï¼Œç»Ÿä¸€è¿›è¡Œæä¾› <code>org.springframework.dao.DataAccessException</code> å¼‚å¸¸åŠå…¶å­ç±»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Spring/2018-12-24/09.jpg" alt="æµç¨‹å›¾"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Seif Zheng"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Seif Zheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fatefrank" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;fatefrank" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:astutenicol@gmail.com" title="E-Mail â†’ mailto:astutenicol@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Seif Zheng</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
